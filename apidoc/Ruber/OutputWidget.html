<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Ruber::OutputWidget</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (O)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Ruber.html" title="Ruber (module)">Ruber</a></span></span>
     &raquo; 
    <span class="title">OutputWidget</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Ruber::OutputWidget
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Qt::Widget</span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Qt::Widget</li>
          
            <li class="next">Ruber::OutputWidget</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="GuiStatesHandler.html" title="Ruber::GuiStatesHandler (module)">GuiStatesHandler</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/ruber/output_widget.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Widget meant to be used as tool widget to display the output of a program. It is
based on Qt Model/View classes and provides the following facitlities:</p>
<ul>
	<li>an easy way to display in different colors items with different meaning (for
  example, error message are displayed in a different color from output messages)</li>
	<li>a centralized way in which the user can choose the colors for different types
  of items</li>
	<li>a context menu with some standard actions, which can be enhanced with custom
  ones and is automatically (under certain conditions) shown to the user</li>
	<li>autoscrolling (which means that whenever new text is added, the view scrolls so
  that the text becomes visible)</li>
	<li>a centralized way for the user to turn on and off word wrapping (which can be
  ignored by widgets for which it doesn&#8217;t make sense)</li>
	<li>a mechanism which allows the user to click on an entry containing a file name
  in the widget to open the file in the editor. The mechanism can be customized
  by plugins to be better tailored to their needs (and can also be turned off)</li>
	<li>a model class, derived from <tt>Qt::StandardItemModel</tt>, which provides a
  couple of convenience methods to make text insertion even easier.</li>
</ul>
<p>Note that OutputWidget is not (and doesn&#8217;t derive from) one of the View classes.
Rather, it&#8217;s a normal <tt>Qt::Widget</tt> which has the view as its only child.
You can add other widgets to the OutputWidget as you would with any other widget:
create the widget with the OutputWidget as parent and add it to the OutputWidget&#8217;s
layout (which is a <tt>Qt::GridLayout</tt> where the view is at position 0,0).</p>
<p><b>Note:</b> this class defines two new roles (<tt>OutputTypeRole</tt> and <tt>IsTitleRole</tt>),
which correspond to <tt>Qt::UserRole</tt> and <tt>Qt::UserRole+1</tt>. Therefore,
if you need to define other custom roles, please have them start from
<tt>Ruber::OutputWidget::IsTitleRole+1</tt>.</p>
<p>===Colors
The <i>output_type</i> of an entry in the model can be set using the <tt>set_output_type</tt>
method. This has two effects: first, the item will be displayed using the color
chosen by the user for that output type; second, the name of the output type will
be stored in that item under the custom role <tt>OutputTypeRole</tt>.</p>
<p>There are several predefined output types: <ins>message</ins>, <tt>message_good</tt>,
<tt>message_bad</tt>, <ins>output</ins>,
<ins>output1</ins>, <ins>output2</ins>, <ins>warning</ins>, <ins>warning1</ins>, <ins>warning2</ins>, <ins>error</ins>, <ins>error1</ins> and <ins>error2</ins>.
The types ending with a number
can be used when you need different types with similar meaning. The <ins>message</ins> type
(and its variations) are meant to display messages which don&#8217;t come from the external
program but from Ruber itself (for example, a message telling that the external
problem exited successfully or exited with an error) Its good and bad version are
meant to display messages with good news and bad news respectively (for example:
&#8220;the program exited successfully&#8221; could be displayed using the <tt>message_good</tt>
type, while &#8220;the program crashed&#8221; could be displayed using the <tt>message_bad</tt>
type). The <ins>output</ins> type is meant
to be used to show the text written by the external program on standard output,
while the <ins>error</ins> type is used to display the text written on standard error. If
you can distinguish between warning and errors, you can use the <ins>warning</ins> type
for the latter.</p>
<p>The colors for the default output types are chosen by the user from the configuration
dialog and are used whenever those output types are requested.</p>
<p>New output types (and their associated colors) can be make known to the output
widget by using the <tt>set_color_for</tt> method. There&#8217;s no need to remove the
color, for example when the plugin is unloaded (indeed, there&#8217;s no way to do so).</p>
<p>===The context menu
This widget automatically creates a context menu containing three actions: copy,
copy selected and clear. Copy and copy selected copy the text contained respectively
in all the items and in the selected items to the clipboard. The clear action 
removes all the entries from the model.</p>
<p>You can add other actions to the menu by performing the following steps:</p>
<ul>
	<li>add an entry in the appropriate position of the <tt>action_list</tt> array. Note
  that it actually is an instance of ActionList, so it provides the <tt>insert_after</tt>
  and <tt>insert_before</tt> methods which allow to easily put the actions in the
  correct place. <tt>action_list</tt> should contain the <tt>object_name</tt> of
  the actions (and <strong>nil</strong> for the separators), not the action themselves</li>
	<li>create the actions (setting their <tt>object_name</tt> to the values inserted
  in <tt>action_list</tt>) and put them into the <ins>actions</ins> hash, using the <tt>object_name</tt>
  as keys. Of course, you also need to define the appropriate slots and connect
  them to the actions&#8217; signals.</li>
</ul>
<p>Note that actions can only be added <em>before</em> the menu is first shown (usually, you
do that in the widget&#8217;s constructor). The signal <tt>about_to_fill_menu</tt> is
emitted just before the menu is built: this is the last time you can add entries
to it.</p>
<p>OutputWidget mixes in the GuiStatesHandler module, which means you can define states
to enable and disable actions as usual. By default, two states are defined: <tt>no_text</tt>
and <tt>no_selection</tt>. As the names imply, the former is <strong>true</strong> when the model
is empty and <strong>false</strong> when there&#8217;s at least one item; the second is <strong>true</strong> when no
item is selected and <strong>false</strong> when there are selected items.</p>
<p>For the menu to be displayed automatically, the view should have a <tt>context_menu_requested(QPoint)</tt>
signal. The menu will be displayed in response to that signal, at the point given
as argument. For convenience, there are three classes <tt>OutputWidget::ListView</tt>,
<tt>OutputWidget::TreeView</tt> and <tt>OutputWidget::TableView</tt>, derived 
respectively from <tt>Qt::ListView</tt>, <tt>Qt::TreeView</tt> and <tt>Qt::TableView</tt>
which emit that signal from their <tt>contextMenuEvent</tt> method. If you use
one of these classes as view, the menu will work automatically.</p>
<p>===Autoscrolling
Whenever an item is added to the list, the view will be scrolled so that the added
item is visible. Plugins which don&#8217;t want this feature can disable it using the
<tt>auto_scroll</tt> accessor. Note that auto scrolling won&#8217;t happen if an item
is modified or removed</p>
<p>===Word Wrapping
If the user has enabled word wrapping for output widgets in the config dialog (
the general/wrap_output option), word wrapping will be automatically enabled for
all output widgets. If the user has disabled it, it will be disabled for all
widgets.</p>
<p>Subclasses can avoid the automatic behaviour by setting the <tt>ignore_word_wrap_option</tt>
attribute to <strong>true</strong> and managing word wrap by themselves. This is mostly useful
for output widgets for which word wrap is undesirable or meaningless.</p>
<p>===Opening files in the editor
Whenever the user activates an item, the text of the item is searched for a filename
(and optionally for a line number). If it&#8217;s found, a new editor view is opened
and the file is displayed in it. This process uses three methods:
<tt>maybe_open_file</tt>::
  the method connected to the view&#8217;s <tt>activated(QModelIndex)</tt> signal. It
  starts the search for the filename and, if successful, opens the editor view
<tt>find_filename_in_index</tt>::
  performs the search of the filename. By default, it uses <tt>find_filename_in_string</tt>,
  but subclasses can override it to change the behaviour
<tt>find_filename_in_string</tt>::
  the method used by default  by <tt>find_filename_in_index</tt> to find the
  filename.</p>
<p>If a relative filename is found, it&#8217;s considered relative to the directory contained
in the <tt>working_dir</tt> attribute.</p>
<p>===The <tt>OutputWidget::Model</tt> class
It behaves as a standard <tt>Qt::StandardItemModel</tt>, but it provides an <ins>insert</ins>
method and an <tt>insert_lines</tt> method which make easier adding items. You
don&#8217;t need to use this model. If you don&#8217;t, simply pass another one to the OutputWidget
constructor</p>
<p>=Signals
=<tt>about_to_fill_menu()</tt>
Signal emitted immediately before the menu is created. You should connect to this
signal if you want to add actions to the menu at the last possible time. Usually,
however, you don't need it, as actions are usually created in the constructor.
=Slots</p>
<ul>
	<li><tt>show_menu(QPoint)</tt></li>
	<li><tt>selection_changed(QItemSelection, QItemSelection)</tt></li>
	<li><tt>rows_changed()</tt></li>
	<li><tt>do_auto_scroll(QModelIndex, int, int)</tt></li>
	<li><tt>copy()</tt></li>
	<li><tt>copy_selected()</tt></li>
	<li><tt>clear_output()</tt></li>
	<li><tt>maybe_open_file()</tt></li>
</ul>

  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="FilteredOutputWidget.html" title="Ruber::FilteredOutputWidget (class)">FilteredOutputWidget</a></span>, <span class='object_link'><a href="FindInFiles/ReplaceWidget.html" title="Ruber::FindInFiles::ReplaceWidget (class)">FindInFiles::ReplaceWidget</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="OutputWidget/ActionList.html" title="Ruber::OutputWidget::ActionList (class)">ActionList</a></span>, <span class='object_link'><a href="OutputWidget/ListView.html" title="Ruber::OutputWidget::ListView (class)">ListView</a></span>, <span class='object_link'><a href="OutputWidget/Model.html" title="Ruber::OutputWidget::Model (class)">Model</a></span>, <span class='object_link'><a href="OutputWidget/TableView.html" title="Ruber::OutputWidget::TableView (class)">TableView</a></span>, <span class='object_link'><a href="OutputWidget/TreeView.html" title="Ruber::OutputWidget::TreeView (class)">TreeView</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="OutputTypeRole-constant" class="">OutputTypeRole =
          <div class="docstring">
  <div class="discussion">
    <p>The role which contains a string with the output type of the index</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='const'>Qt</span><span class='op'>::</span><span class='const'>UserRole</span></pre></dd>
      
        <dt id="IsTitleRole-constant" class="">IsTitleRole =
          <div class="docstring">
  <div class="discussion">
    <p>The role which contains whether an item is or not the title</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='const'>OutputTypeRole</span> <span class='op'>+</span> <span class='int'>1</span></pre></dd>
      
    </dl>
  


  
  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#action_list-instance_method" title="#action_list (instance method)">- (Object) <strong>action_list</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>An ActionList containing the names of the actions and the separators (represented
by <strong>nil</strong>) to use to build the menu.</p></div></span>
  
</li>

    
      <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#actions-instance_method" title="#actions (instance method)">- (Object) <strong>actions</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>A hash having the names of actions to be inserted in the menu as keys and the actions
themselves as values.</p></div></span>
  
</li>

    
      <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#auto_scroll-instance_method" title="#auto_scroll (instance method)">- (Object) <strong>auto_scroll</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether auto scrolling should be enabled or not (default: <strong>true</strong>).</p></div></span>
  
</li>

    
      <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#ignore_word_wrap_option-instance_method" title="#ignore_word_wrap_option (instance method)">- (Object) <strong>ignore_word_wrap_option</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether word wrapping should be enabled and disabled automatically according to
the general/wrap_output setting or not (default: <strong>false</strong>).</p></div></span>
  
</li>

    
      <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#model-instance_method" title="#model (instance method)">- (Object) <strong>model</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The model used by the OutputWidget.</p></div></span>
  
</li>

    
      <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#skip_first_file_in_title-instance_method" title="#skip_first_file_in_title (instance method)">- (Object) <strong>skip_first_file_in_title</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#view-instance_method" title="#view (instance method)">- (Object) <strong>view</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The view used by the OutputWidget.</p></div></span>
  
</li>

    
      <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#working_dir-instance_method" title="#working_dir (instance method)">- (Object) <strong>working_dir</strong> </a>
    

    
      (also: #working_directory)
    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The directory used to resolve relative paths when opening a file (default <strong>nil</strong>).</p></div></span>
  
</li>

    
  </ul>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_output-instance_method" title="#clear_output (instance method)">- (Object) <strong>clear_output</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Removes all the entries from the model.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#copy-instance_method" title="#copy (instance method)">- (Object) <strong>copy</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Slot connected to the &#8216;Copy&#8217; action.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#copy_selected-instance_method" title="#copy_selected (instance method)">- (Object) <strong>copy_selected</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Slot connected to the &#8216;Copy Selection&#8217; action.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#create_standard_actions-instance_method" title="#create_standard_actions (instance method)">- (Object) <strong>create_standard_actions</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates the &#8216;Copy&#8217;, &#8216;Copy selected&#8217; and &#8216;Clear&#8217; actions and the correspongind 
state handlers.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#create_widgets-instance_method" title="#create_widgets (instance method)">- (Object) <strong>create_widgets</strong>(view) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates the layout and the view.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#do_auto_scroll-instance_method" title="#do_auto_scroll (instance method)">- (Object) <strong>do_auto_scroll</strong>(parent, start_idx, end_idx) </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Automatically scrolls to the first row of <i>end_idx</i> if auto scrolling is enabled.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#fill_menu-instance_method" title="#fill_menu (instance method)">- (Object) <strong>fill_menu</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates the menu, according to the contents of the <tt><code>action_list&lt;/tt&gt; and
&lt;tt&gt;</code>actions</tt> instance variables.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#find_filename_in_index-instance_method" title="#find_filename_in_index (instance method)">- (Object) <strong>find_filename_in_index</strong>(idx) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Method used by <tt>maybe_open_file</tt> to find out the name of the file to open
(if any) when an item is activated.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#find_filename_in_string-instance_method" title="#find_filename_in_string (instance method)">- (Object) <strong>find_filename_in_string</strong>(str) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Searches the given string for the first occurrence of a file name (possibly followed by a colon and a line
number).</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#has_title%3F-instance_method" title="#has_title? (instance method)">- (Boolean) <strong>has_title?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Tells whether the toplevel 0,0 element is the title or not.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (OutputWidget) <strong>initialize</strong>(parent = nil, opts = {}) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new OutputWidget.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#load_settings-instance_method" title="#load_settings (instance method)">- (Object) <strong>load_settings</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Loads the settings from the configuration file.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#maybe_open_file-instance_method" title="#maybe_open_file (instance method)">- (Object) <strong>maybe_open_file</strong>(idx) </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Searches for a filename in the DisplayRole of the <tt>Qt::ModelIndex</tt> idx (
using the <tt>find_filename_in_index</tt> method).</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#rows_changed-instance_method" title="#rows_changed (instance method)">- (Object) <strong>rows_changed</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Turns the <tt>no_text</tt> state on or off depending on whether the model
is empty or not.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#scroll_to-instance_method" title="#scroll_to (instance method)">- (Object) <strong>scroll_to</strong>(idx) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Scrolls the view so that the item corresponding to the index <em>idx</em> is visible.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#selection_changed-instance_method" title="#selection_changed (instance method)">- (Object) <strong>selection_changed</strong>(sel, desel) </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Slot connected to the view&#8217;s selection model&#8217;s selectionChanged signal.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#set_color_for-instance_method" title="#set_color_for (instance method)">- (Object) <strong>set_color_for</strong>(name, color) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Instructs the OutputWidget to use the <tt>Qt::Color</tt> <em>color</em> to display items
whose output type is <em>name</em>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#set_output_type-instance_method" title="#set_output_type (instance method)">- (Object) <strong>set_output_type</strong>(idx, type) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the output type associated with the <tt>Qt::ModelIndex</tt> <em>idx</em> to <em>type</em>
(a symbol).</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#setup_model-instance_method" title="#setup_model (instance method)">- (Object) <strong>setup_model</strong>(mod) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates the model (if needed) and makes some signal-slot connections.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#show_menu-instance_method" title="#show_menu (instance method)">- (Object) <strong>show_menu</strong>(pt) </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Shows the menu (asynchronously) at the point <em>pt</em>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#text_for_clipboard-instance_method" title="#text_for_clipboard (instance method)">- (Object) <strong>text_for_clipboard</strong>(indexes) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Method used by the <ins>copy</ins> and <tt>copy_selected</tt> methods to obtain the text
to put in the clipboard from the indexes.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#title%3D-instance_method" title="#title= (instance method)">- (Object) <strong>title</strong>(text) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Gives a title to the widget.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#update_index_color-instance_method" title="#update_index_color (instance method)">- (Object) <strong>update_index_color</strong>(idx) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Changes the foreground color of the Qt::ModelIndex <em>idx</em> and of its children so
that it matches the color set for its output type.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#with_auto_scrolling-instance_method" title="#with_auto_scrolling (instance method)">- (Object) <strong>with_auto_scrolling</strong>(val) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Executes the block with autoscrolling turned on or off according to <em>val</em>, without
permanently changing the autoscrolling setting.</p></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="GuiStatesHandler.html" title="Ruber::GuiStatesHandler (module)">GuiStatesHandler</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="GuiStatesHandler.html#change_state-instance_method" title="Ruber::GuiStatesHandler#change_state (method)">#change_state</a></span>, <span class='object_link'><a href="GuiStatesHandler.html#included-class_method" title="Ruber::GuiStatesHandler.included (method)">included</a></span>, <span class='object_link'><a href="GuiStatesHandler.html#initialize_states_handler-instance_method" title="Ruber::GuiStatesHandler#initialize_states_handler (method)">#initialize_states_handler</a></span>, <span class='object_link'><a href="GuiStatesHandler.html#register_action_handler-instance_method" title="Ruber::GuiStatesHandler#register_action_handler (method)">#register_action_handler</a></span>, <span class='object_link'><a href="GuiStatesHandler.html#remove_action_handler_for-instance_method" title="Ruber::GuiStatesHandler#remove_action_handler_for (method)">#remove_action_handler_for</a></span>, <span class='object_link'><a href="GuiStatesHandler.html#state-instance_method" title="Ruber::GuiStatesHandler#state (method)">#state</a></span></p>

  

  <h2>Signal Summary</h2>
  <ul class="summary" >
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#about_to_fill_menu-signalcode" title="about_to_fill_menu (signalcode)">- <strong>about_to_fill_menu</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#about_to_fill_menu-signalcode" title="about_to_fill_menu (signalcode)">- <strong>about_to_fill_menu</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
  </ul>





<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Ruber::OutputWidget (class)">OutputWidget</a></span></tt>) <strong>initialize</strong>(parent = nil, opts = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates a new OutputWidget. <em>parent</em> is the parent widget. <em>opts</em> can contain
the following keys:
<ins>:view</ins>:: the view to use. It can be either a widget derived from <tt>Qt::AbstractItemView</tt>,
          which will be used as view, or one of the symbols <ins>:list</ins>, <ins>:tree</ins> or
          <ins>:table</ins>. If it&#8217;s a symbol, then the view will be a new instance of
          OutputWidget::ListView, OutputWidget::TreeView or OutputWidget::TableView
          respectively. Defaults to <ins>:list</ins>.
<ins>:model</ins>:: the model to use. If this option isn&#8217;t given, then a new instance of
           OutputWidget::Model will be used
<tt>use_default_font</tt>::
  whether or not to use the application\&#8217;s default font in the view. If <strong>false</strong>
  (the default), then the font chosen by the user for the general/output_font
  option will be used.</p>
<p><b>Note:</b> if a widget is specified as value of the <ins>:view</ins> option, it will become
a child of the new OutputWidget.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 269</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span> <span class='id parent'>parent</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='ivar'>@ignore_word_wrap_option</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@working_dir</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@skip_first_file_in_title</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@use_default_font</span> <span class='op'>=</span> <span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:use_default_font</span><span class='rbracket'>]</span>
  
  <span class='kw'>super</span> <span class='id parent'>parent</span>
  <span class='id initialize_states_handler'>initialize_states_handler</span>
  <span class='id create_widgets'>create_widgets</span><span class='lparen'>(</span><span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:view</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='symbol'>:list</span><span class='rparen'>)</span>
  <span class='id setup_model'>setup_model</span> <span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:model</span><span class='rbracket'>]</span>
  <span class='id connect'>connect</span> <span class='ivar'>@view</span><span class='period'>.</span><span class='id selection_model'>selection_model</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>selectionChanged(QItemSelection, QItemSelection)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>selection_changed(QItemSelection, QItemSelection)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='id connect'>connect</span> <span class='ivar'>@view</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>activated(QModelIndex)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>maybe_open_file(QModelIndex)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='ivar'>@auto_scroll</span> <span class='op'>=</span> <span class='kw'>true</span>
  
  <span class='ivar'>@colors</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@action_list</span> <span class='op'>=</span> <span class='const'>ActionList</span><span class='period'>.</span><span class='id new'>new</span> 
  <span class='ivar'>@action_list</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>copy</span><span class='tstring_end'>'</span></span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>copy_selected</span><span class='tstring_end'>'</span></span> <span class='op'>&lt;&lt;</span> <span class='kw'>nil</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>clear</span><span class='tstring_end'>'</span></span>
  <span class='ivar'>@actions</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  
  <span class='id connect'>connect</span> <span class='ivar'>@view</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>context_menu_requested(QPoint)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>show_menu(QPoint)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  
  <span class='ivar'>@menu</span> <span class='op'>=</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Menu</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>self</span>
  
  <span class='id create_standard_actions'>create_standard_actions</span>
  <span class='id change_state'>change_state</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>no_text</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>true</span>
  <span class='id change_state'>change_state</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>no_selection</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="action_list-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="action_list-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>action_list</strong>  <span class="extras">(readonly, private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>An ActionList containing the names of the actions and the separators (represented
by <strong>nil</strong>) to use to build the menu. The default is [&#8216;copy&#8217;, &#8216;copy_selected&#8217;, nil, &#8216;clear&#8217;].</p>
<p><b>Note:</b> this is private</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


227
228
229</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 227</span>

<span class='kw'>def</span> <span class='id action_list'>action_list</span>
  <span class='ivar'>@action_list</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="actions-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="actions-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>actions</strong>  <span class="extras">(readonly, private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>A hash having the names of actions to be inserted in the menu as keys and the actions
themselves as values. By default, it contains the &#8216;copy&#8217;, &#8216;copy_selected&#8217; and
&#8216;clear&#8217; actions.</p>
<p><b>Note:</b> this is private</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 236</span>

<span class='kw'>def</span> <span class='id actions'>actions</span>
  <span class='ivar'>@actions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="auto_scroll=-instance_method"></span>
      <span id="auto_scroll-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="auto_scroll-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>auto_scroll</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Whether auto scrolling should be enabled or not (default: <strong>true</strong>)</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 200</span>

<span class='kw'>def</span> <span class='id auto_scroll'>auto_scroll</span>
  <span class='ivar'>@auto_scroll</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="ignore_word_wrap_option=-instance_method"></span>
      <span id="ignore_word_wrap_option-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="ignore_word_wrap_option-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>ignore_word_wrap_option</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Whether word wrapping should be enabled and disabled automatically according to
the general/wrap_output setting or not (default: <strong>false</strong>)</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 206</span>

<span class='kw'>def</span> <span class='id ignore_word_wrap_option'>ignore_word_wrap_option</span>
  <span class='ivar'>@ignore_word_wrap_option</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="model-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="model-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>model</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The model used by the OutputWidget</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


241
242
243</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 241</span>

<span class='kw'>def</span> <span class='id model'>model</span>
  <span class='ivar'>@model</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="skip_first_file_in_title=-instance_method"></span>
      <span id="skip_first_file_in_title-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="skip_first_file_in_title-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>skip_first_file_in_title</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 219</span>

<span class='kw'>def</span> <span class='id skip_first_file_in_title'>skip_first_file_in_title</span>
  <span class='ivar'>@skip_first_file_in_title</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="view-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="view-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>view</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The view used by the OutputWidget</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 246</span>

<span class='kw'>def</span> <span class='id view'>view</span>
  <span class='ivar'>@view</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="working_dir=-instance_method"></span>
      <span id="working_dir-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="working_dir-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>working_dir</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='working_directory-instance_method'>working_directory</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>The directory used to resolve relative paths when opening a file (default <strong>nil</strong>)</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


211
212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 211</span>

<span class='kw'>def</span> <span class='id working_dir'>working_dir</span>
  <span class='ivar'>@working_dir</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="clear_output-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>clear_output</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Removes all the entries from the model</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


435
436
437</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 435</span>

<span class='kw'>def</span> <span class='id clear_output'>clear_output</span>
  <span class='ivar'>@model</span><span class='period'>.</span><span class='id remove_rows'>remove_rows</span> <span class='int'>0</span><span class='comma'>,</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id row_count'>row_count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>clear_output()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="copy-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>copy</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Slot connected to the &#8216;Copy&#8217; action.</p>
<p>It copies the content of all the items to the clipboard. The text is obtained
from the items by calling <tt>text_for_clipboard</tt> passing it all the items.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 564</span>

<span class='kw'>def</span> <span class='id copy'>copy</span>
  <span class='id items'>items</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id stack'>stack</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@model</span><span class='period'>.</span><span class='id row_count'>row_count</span><span class='period'>.</span><span class='id times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id r'>r</span><span class='op'>|</span>
    <span class='ivar'>@model</span><span class='period'>.</span><span class='id column_count'>column_count</span><span class='period'>.</span><span class='id times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id c'>c</span><span class='op'>|</span> <span class='id stack'>stack</span> <span class='op'>&lt;&lt;</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='id r'>r</span><span class='comma'>,</span> <span class='id c'>c</span><span class='rparen'>)</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='kw'>until</span> <span class='id stack'>stack</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id it'>it</span> <span class='op'>=</span>  <span class='id stack'>stack</span><span class='period'>.</span><span class='id shift'>shift</span>
    <span class='id items'>items</span> <span class='op'>&lt;&lt;</span> <span class='id it'>it</span>
    <span class='lparen'>(</span><span class='ivar'>@model</span><span class='period'>.</span><span class='id row_count'>row_count</span><span class='lparen'>(</span><span class='id it'>it</span><span class='rparen'>)</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id downto'>downto</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id r'>r</span><span class='op'>|</span>
      <span class='lparen'>(</span><span class='ivar'>@model</span><span class='period'>.</span><span class='id column_count'>column_count</span><span class='lparen'>(</span><span class='id it'>it</span><span class='rparen'>)</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id downto'>downto</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id c'>c</span><span class='op'>|</span> <span class='id stack'>stack</span><span class='period'>.</span><span class='id unshift'>unshift</span> <span class='id it'>it</span><span class='period'>.</span><span class='id child'>child</span><span class='lparen'>(</span><span class='id r'>r</span><span class='comma'>,</span> <span class='id c'>c</span><span class='rparen'>)</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id clp'>clp</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Application</span><span class='period'>.</span><span class='id clipboard'>clipboard</span>
  <span class='id clp'>clp</span><span class='period'>.</span><span class='id text'>text</span> <span class='op'>=</span> <span class='id text_for_clipboard'>text_for_clipboard</span> <span class='id items'>items</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>copy()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="copy_selected-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>copy_selected</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Slot connected to the &#8216;Copy Selection&#8217; action.</p>
<p>It copies the content of all the items to the clipboard. The text is obtained
from the items by calling <tt>text_for_clipboard</tt> passing it the selected items.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


587
588
589
590</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 587</span>

<span class='kw'>def</span> <span class='id copy_selected'>copy_selected</span>
  <span class='id clp'>clp</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Application</span><span class='period'>.</span><span class='id clipboard'>clipboard</span>
  <span class='id clp'>clp</span><span class='period'>.</span><span class='id text'>text</span> <span class='op'>=</span> <span class='id text_for_clipboard'>text_for_clipboard</span> <span class='ivar'>@view</span><span class='period'>.</span><span class='id selection_model'>selection_model</span><span class='period'>.</span><span class='id selected_indexes'>selected_indexes</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>copy_selected()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="create_standard_actions-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>create_standard_actions</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates the &#8216;Copy&#8217;, &#8216;Copy selected&#8217; and &#8216;Clear&#8217; actions and the correspongind 
state handlers</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


544
545
546
547
548
549
550
551
552
553
554
555
556</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 544</span>

<span class='kw'>def</span> <span class='id create_standard_actions'>create_standard_actions</span>
  <span class='ivar'>@actions</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>copy</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Action</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id a'>a</span><span class='op'>|</span> <span class='id a'>a</span><span class='period'>.</span><span class='id text'>text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;Copy</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span>
  <span class='ivar'>@actions</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>copy_selected</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Action</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id a'>a</span><span class='op'>|</span> <span class='id a'>a</span><span class='period'>.</span><span class='id text'>text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;Copy Selection</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span>
  <span class='ivar'>@actions</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>clear</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Action</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id a'>a</span><span class='op'>|</span> <span class='id a'>a</span><span class='period'>.</span><span class='id text'>text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>C&amp;lear</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span>
  <span class='id register_action_handler'>register_action_handler</span> <span class='ivar'>@actions</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>copy</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>!no_text</span><span class='tstring_end'>'</span></span>
  <span class='id register_action_handler'>register_action_handler</span> <span class='ivar'>@actions</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>copy_selected</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>no_text</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>no_selection</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id s'>s</span><span class='op'>|</span>
    <span class='op'>!</span><span class='lparen'>(</span><span class='id s'>s</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>no_text</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id s'>s</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>no_selection</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id register_action_handler'>register_action_handler</span>  <span class='ivar'>@actions</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>clear</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>!no_text</span><span class='tstring_end'>'</span></span>
  <span class='id connect'>connect</span> <span class='ivar'>@actions</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>copy</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='symbol'>:triggered</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:copy</span><span class='rparen'>)</span>
  <span class='id connect'>connect</span> <span class='ivar'>@actions</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>copy_selected</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='symbol'>:triggered</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:copy_selected</span><span class='rparen'>)</span>
  <span class='id connect'>connect</span> <span class='ivar'>@actions</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>clear</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='symbol'>:triggered</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:clear_output</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create_widgets-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>create_widgets</strong>(view)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates the layout and the view. <em>view</em> has the same meaning as the <tt>:view</tt>
option in the constructor</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


529
530
531
532
533
534
535
536
537
538</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 529</span>

<span class='kw'>def</span> <span class='id create_widgets'>create_widgets</span> <span class='id view'>view</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id layout'>layout</span> <span class='op'>=</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>GridLayout</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id view'>view</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Qt</span><span class='op'>::</span><span class='const'>Widget</span><span class='rparen'>)</span>
    <span class='ivar'>@view</span> <span class='op'>=</span> <span class='id view'>view</span>
    <span class='ivar'>@view</span><span class='period'>.</span><span class='id parent'>parent</span> <span class='op'>=</span> <span class='kw'>self</span>
  <span class='kw'>else</span> <span class='ivar'>@view</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id const_get'>const_get</span><span class='lparen'>(</span><span class='id view'>view</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id capitalize'>capitalize</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>View</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='ivar'>@view</span><span class='period'>.</span><span class='id selection_mode'>selection_mode</span> <span class='op'>=</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>AbstractItemView</span><span class='op'>::</span><span class='const'>ExtendedSelection</span>
  <span class='id layout'>layout</span><span class='period'>.</span><span class='id add_widget'>add_widget</span>  <span class='ivar'>@view</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_auto_scroll-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>do_auto_scroll</strong>(parent, start_idx, end_idx)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Automatically scrolls to the first row of <i>end_idx</i> if auto scrolling is enabled.</p>
<p>Note: all parameters are considered relative to the model associated with the view,
not with the <code>model</code> attribute (of course, this only matters in subclasses where
the two differ, such as <span class='object_link'><a href="FilteredOutputWidget.html" title="Ruber::FilteredOutputWidget (class)">FilteredOutputWidget</a></span>).</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


494
495
496</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 494</span>

<span class='kw'>def</span> <span class='id do_auto_scroll'>do_auto_scroll</span> <span class='id parent'>parent</span><span class='comma'>,</span> <span class='id start_idx'>start_idx</span><span class='comma'>,</span> <span class='id end_idx'>end_idx</span>
  <span class='id scroll_to'>scroll_to</span> <span class='ivar'>@view</span><span class='period'>.</span><span class='id model'>model</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='id end_idx'>end_idx</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id parent'>parent</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@auto_scroll</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>do_auto_scroll(QModelIndex, int, int)</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="fill_menu-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>fill_menu</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates the menu, according to the contents of the <tt><code>action_list&lt;/tt&gt; and
&lt;tt&gt;</code>actions</tt> instance variables.</p>
<p>Before creating the menu, it emits the <tt>about_to_fill_menu()</tt> signal. Connecting
to this signal allows to do some last-minute changes to the actions which will
be inserted in the menu.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


506
507
508
509
510
511
512
513</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 506</span>

<span class='kw'>def</span> <span class='id fill_menu'>fill_menu</span>
  <span class='id emit'>emit</span> <span class='id about_to_fill_menu'>about_to_fill_menu</span>
  <span class='ivar'>@action_list</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id a'>a</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id a'>a</span> <span class='kw'>then</span> <span class='ivar'>@menu</span><span class='period'>.</span><span class='id add_action'>add_action</span> <span class='ivar'>@actions</span><span class='lbracket'>[</span><span class='id a'>a</span><span class='rbracket'>]</span>
    <span class='kw'>else</span> <span class='ivar'>@menu</span><span class='period'>.</span><span class='id add_separator'>add_separator</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="find_filename_in_index-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>find_filename_in_index</strong>(idx)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Method used by <tt>maybe_open_file</tt> to find out the name of the file to open
(if any) when an item is activated.</p>
<p><em>idx</em> can be either the <tt>Qt::ModelIndex</tt> corresponding to the activated
item or a string. The first form is used when this method is called from the
<tt>activated(QModelIndex)</tt> signal of the view; the string form is usually
called by overriding methods using <strong>super</strong>.</p>
<p>The actual work is done by <tt>find_filename_in_string</tt>, which returns the
first occurrence of what it considers a filename (possibly followed by a line
number).</p>
<p>If <tt>find_filename_in_string</tt> finds a filename, this method makes sure it
actually corresponds to an existing file and, if it&#8217;s a relative path, expands
it, considering it relative to the <tt>working_dir</tt> attribute. If that
attribute is not set, the behaviour is undefined (most likely, an exception will
be raised).</p>
<p>If <em>idx</em> is the title (see <tt>title=</tt>) and <tt>skip_first_file_in_title</tt>
is <strong>true</strong>, all the text from the beginning to the first space or colon is removed
from it before being passed to <tt>find_filename_in_string</tt>. The reason is
that often the title contains the command line of a program, for example:</p>
/usr/bin/ruby /path/to/script.rb
<p>In this case, when the user activates the title, he will most likely want to
open <tt>/path/to/script.rb</tt> rather than <tt>/usr/bin/ruby</tt> (which, being
an executable, couldn&#8217;t even be correctly displayed). Nothing like this will
ever happen if <em>idx</em> is a string.</p>
<p>Subclasses can override this method to extend or change its functionality. They
have two choices on how to do this. The simplest is useful if they want to alter
the string. In this case they can retrieve the text from the index, change it
then call <strong>super</strong> passing the modified string as argument. Otherwise, they should
reimplement all the functionality. In this case, the method should:</p>
<ul>
	<li>take a <tt>Qt::ModelIndex</tt> or a string as argument</li>
	<li>return a string with the name of the file or an array containing a string and
the associated line number (if found) if a file name is found</li>
	<li>return <strong>nil</strong> if no file name is found</li>
	<li>convert relative file names to absolute (either using the <tt>working_dir</tt>
attribute or any other way they see fit)</li>
</ul>
<p>A subclass can decide to completely disable this functionality by overriding this
method with one which always returns <strong>nil</strong>.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 716</span>

<span class='kw'>def</span> <span class='id find_filename_in_index'>find_filename_in_index</span> <span class='id idx'>idx</span>
  <span class='id str'>str</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id idx'>idx</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='kw'>then</span> <span class='id idx'>idx</span>
  <span class='kw'>elsif</span> <span class='ivar'>@skip_first_file_in_title</span> <span class='kw'>and</span> <span class='id idx'>idx</span><span class='period'>.</span><span class='id data'>data</span><span class='lparen'>(</span><span class='const'>IsTitleRole</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_bool'>to_bool</span>
      <span class='id idx'>idx</span><span class='period'>.</span><span class='id data'>data</span><span class='period'>.</span><span class='id to_string'>to_string</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[^\s:]+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span> <span class='id idx'>idx</span><span class='period'>.</span><span class='id data'>data</span><span class='period'>.</span><span class='id to_string'>to_string</span>
  <span class='kw'>end</span>
  <span class='id res'>res</span> <span class='op'>=</span> <span class='id find_filename_in_string'>find_filename_in_string</span> <span class='id str'>str</span>
  <span class='id d'>d</span> <span class='id res'>res</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id res'>res</span>
  <span class='id res'>res</span> <span class='op'>=</span> <span class='const'>Array</span> <span class='id res'>res</span>
  <span class='id res'>res</span> <span class='op'>&lt;&lt;</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='id res'>res</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>==</span> <span class='int'>1</span>
  <span class='comment'>#if res[0] is an url with scheme file:, transform it into a regular file
</span>  <span class='comment'>#name by removing the scheme and the two following slash
</span>  <span class='id res'>res</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id sub!'>sub!</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>^file://</span><span class='regexp_end'>}</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='kw'>if</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Url</span><span class='period'>.</span><span class='id file_url?'>file_url?</span><span class='lparen'>(</span><span class='id res'>res</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>then</span> <span class='id res'>res</span>
  <span class='kw'>else</span>
    <span class='id res'>res</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id join'>join</span> <span class='ivar'>@working_dir</span><span class='comma'>,</span> <span class='id res'>res</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='const'>Pathname</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id res'>res</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id absolute?'>absolute?</span>
    <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id exist?'>exist?</span><span class='lparen'>(</span><span class='id res'>res</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='op'>!</span><span class='const'>File</span><span class='period'>.</span><span class='id directory?'>directory?</span><span class='lparen'>(</span><span class='id res'>res</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id res'>res</span>
    <span class='kw'>else</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="find_filename_in_string-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>find_filename_in_string</strong>(str)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Searches the given string for the first occurrence of a file name (possibly followed by a colon and a line
number). If a file name is found, returns an array containing the file name and
the corresponding line number (if present). Returns <strong>nil</strong> if no file name was found.</p>
<p>What is a file name and what isn&#8217;t is a bit arbitrary. Here&#8217;s what this method
recognizes as a filename:</p>
<ul>
	<li>an absolute path not containing spaces and colons starting with &#8216;/&#8217;</li>
	<li>an absolute path not containing spaces and colons starting with &#8216;~&#8217; or &#8216;~user&#8217;
(they&#8217;re expanded using <code>File.expand_path</code>)</li>
	<li>a relative path starting with <code>./</code> or <code>../</code> (either followed by a slash or not)</li>
	<li>a relative path of the form <code>.filename</code> or <code>.dirname/dir/file</code></li>
	<li>any string not containing spaces or colons followed by a colon and a line number</li>
	<li>absolute URLs with an authority component</li>
</ul>
<p>File names enclosed in quotes or parentheses are recognized.</p>
<p>The first three entries of the previous list can be followed by a colon and a line
number; for the last one they&#8217;re mandatory</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 749</span>

<span class='kw'>def</span> <span class='id find_filename_in_string'>find_filename_in_string</span> <span class='id str'>str</span>
  <span class='comment'>#This ensures that file names inside quotes or brackets are found. It's
</span>  <span class='comment'>#easier replacing quotes and brackets with spaces than to modify the main
</span>  <span class='comment'>#regexp to take them into account
</span>  <span class='id str'>str</span> <span class='op'>=</span> <span class='id str'>str</span><span class='period'>.</span><span class='id gsub'>gsub</span> <span class='tstring'><span class='regexp_beg'>%r|</span><span class='tstring_content'>['&quot;`&lt;&gt;\(\)\[\]\{\}]</span><span class='regexp_end'>|</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span>
  <span class='id matches'>matches</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id attempts'>attempts</span> <span class='op'>=</span> <span class='lbracket'>[</span>
    <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>(?:^|\s)([\w+.-]+:/{1,2}(?:/[^/:\s]+)+)(?::(\d+))?(?:$|[,.;:\s])</span><span class='regexp_end'>}</span></span><span class='comma'>,</span> <span class='comment'>#URLS
</span>    <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>(?:^|\s)((?:/[^/\s:]+)+)(?::(\d+))?(?:$|[,.;:\s])</span><span class='regexp_end'>}</span></span><span class='comma'>,</span> <span class='comment'>#absolute files
</span>    <span class='comment'>#absolute files referring to user home directory: ~/xyz or ~user/xyz
</span>    <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>(?:^|\s)(~[\w_-]*(?:/[^/\s:]+)+)(?::(\d+))?(?:$|[,.;:\s])</span><span class='regexp_end'>}</span></span><span class='comma'>,</span>
    <span class='comment'>#relative files starting with ./ and ../
</span>    <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>(?:^|\s)(\.{1,2}(?:/[^/\s:]+)+)(?::(\d+))?(?:$|[,.;:\s])</span><span class='regexp_end'>}</span></span><span class='comma'>,</span>
    <span class='comment'>#hidden files or directories (.filename or .dir/filename)
</span>    <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>(?:^|\s)(\.[^/\s:]+(?:/[^/\s:]+)*)(?::(\d+))?(?:$|[,.;:\s])</span><span class='regexp_end'>}</span></span><span class='comma'>,</span>
    <span class='comment'>#relative files containing, but not ending with a slash
</span>    <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>(?:^|\s)([^/\s:]+/[^\s:]*[^\s/:])(?::(\d+))?(?:$|[,.;:\s])</span><span class='regexp_end'>}</span></span><span class='comma'>,</span>
    <span class='comment'>#relative files not containing slashes but ending with the line number
</span>    <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>(?:^|\s)([^/\s:]+):(\d+)(?:$|[,.;:\s])</span><span class='regexp_end'>}</span></span>
  <span class='rbracket'>]</span>
  <span class='id attempts'>attempts</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id a'>a</span><span class='op'>|</span>
    <span class='id m'>m</span> <span class='op'>=</span> <span class='id str'>str</span><span class='period'>.</span><span class='id match'>match</span> <span class='id a'>a</span>
    <span class='id matches'>matches</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id m'>m</span><span class='period'>.</span><span class='id begin'>begin</span><span class='lparen'>(</span><span class='int'>0</span><span class='rparen'>)</span><span class='comma'>,</span><span class='lbracket'>[</span><span class='backref'>$1</span><span class='comma'>,</span><span class='backref'>$2</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id m'>m</span>
  <span class='kw'>end</span>
  <span class='id d'>d</span> <span class='id str'>str</span>
  <span class='id d'>d</span> <span class='id matches'>matches</span>
  <span class='id match'>match</span> <span class='op'>=</span> <span class='id matches'>matches</span><span class='period'>.</span><span class='id sort_by'>sort_by</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id i'>i</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id match'>match</span>
  <span class='id file'>file</span><span class='comma'>,</span> <span class='id line'>line</span> <span class='op'>=</span> <span class='op'>*</span><span class='id match'>match</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id file'>file</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id expand_path'>expand_path</span><span class='lparen'>(</span><span class='id file'>file</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id file'>file</span><span class='period'>.</span><span class='id start_with?'>start_with?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>~</span><span class='tstring_end'>'</span></span>
  <span class='id res'>res</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id file'>file</span><span class='rbracket'>]</span>
  <span class='id res'>res</span> <span class='op'>&lt;&lt;</span> <span class='id line'>line</span><span class='period'>.</span><span class='id to_i'>to_i</span> <span class='kw'>if</span> <span class='id line'>line</span>
  <span class='id res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="has_title?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_title?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Tells whether the toplevel 0,0 element is the title or not. See <tt>title=</tt>
for the meaning of the title</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


407
408
409</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 407</span>

<span class='kw'>def</span> <span class='id has_title?'>has_title?</span>
  <span class='ivar'>@model</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id data'>data</span><span class='lparen'>(</span><span class='const'>IsTitleRole</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_bool'>to_bool</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="load_settings-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>load_settings</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Loads the settings from the configuration file.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 414</span>

<span class='kw'>def</span> <span class='id load_settings'>load_settings</span>
  <span class='id cfg'>cfg</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span>
  <span class='id colors'>colors</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbol'>:message</span><span class='comma'>,</span> <span class='symbol'>:message_good</span><span class='comma'>,</span> <span class='symbol'>:message_bad</span><span class='comma'>,</span> <span class='symbol'>:output</span><span class='comma'>,</span> <span class='symbol'>:output1</span><span class='comma'>,</span> <span class='symbol'>:output2</span><span class='comma'>,</span> <span class='symbol'>:error</span><span class='comma'>,</span> <span class='symbol'>:error1</span><span class='comma'>,</span> <span class='symbol'>:error2</span><span class='comma'>,</span> <span class='symbol'>:warning</span><span class='comma'>,</span> <span class='symbol'>:warning1</span><span class='comma'>,</span> <span class='symbol'>:warning2</span><span class='rbracket'>]</span>
  <span class='id colors'>colors</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id c'>c</span><span class='op'>|</span> <span class='id set_color_for'>set_color_for</span> <span class='id c'>c</span><span class='comma'>,</span> <span class='id cfg'>cfg</span><span class='lbracket'>[</span><span class='symbol'>:output_colors</span><span class='comma'>,</span> <span class='id c'>c</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
  <span class='ivar'>@model</span><span class='period'>.</span><span class='id row_count'>row_count</span><span class='period'>.</span><span class='id times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id r'>r</span><span class='op'>|</span>
    <span class='ivar'>@model</span><span class='period'>.</span><span class='id column_count'>column_count</span><span class='period'>.</span><span class='id times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id c'>c</span><span class='op'>|</span>
      <span class='id update_index_color'>update_index_color</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='id r'>r</span><span class='comma'>,</span> <span class='id c'>c</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='ivar'>@view</span><span class='period'>.</span><span class='id font'>font</span> <span class='op'>=</span> <span class='id cfg'>cfg</span><span class='lbracket'>[</span><span class='symbol'>:general</span><span class='comma'>,</span> <span class='symbol'>:output_font</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='ivar'>@use_default_font</span>
  <span class='kw'>unless</span> <span class='ivar'>@ignore_word_wrap_option</span>
    <span class='comment'># Not all the views support word wrapping
</span>    <span class='kw'>begin</span> <span class='ivar'>@view</span><span class='period'>.</span><span class='id word_wrap'>word_wrap</span> <span class='op'>=</span> <span class='id cfg'>cfg</span><span class='lbracket'>[</span><span class='symbol'>:general</span><span class='comma'>,</span> <span class='symbol'>:wrap_output</span><span class='rbracket'>]</span> 
    <span class='kw'>rescue</span> <span class='const'>NoMethodError</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>load_settings()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="maybe_open_file-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>maybe_open_file</strong>(idx)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Searches for a filename in the DisplayRole of the <tt>Qt::ModelIndex</tt> idx (
using the <tt>find_filename_in_index</tt> method). If a filename is found, opens
a new editor view containing the file, scrolls it to the appropriate line and
hides the tool widget (<strong>self</strong>).</p>
<p>The behaviour of this method (which usually is only called via a signal-slot connection
to the views&#8217; <tt>activated(QModelindex) signal) changes according to the active 
keyboard modifiers:</p>
<ul>
	<li>if Ctrl or Shift are pressed and the view allows selection (that is, its selection
mode is not <ins>NoSelection</ins>), then this method does nothing. The reason for this
behaviour is that Ctrl and Shift are used to select items, so the user is most
likely doing that, not requesting to open a file</li>
	<li>if Meta is pressed, then the tool widget won&#8217;t be closed</li>
</ul>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


657
658
659
660
661
662
663
664
665
666
667
668</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 657</span>

<span class='kw'>def</span> <span class='id maybe_open_file'>maybe_open_file</span> <span class='id idx'>idx</span>
  <span class='id modifiers'>modifiers</span> <span class='op'>=</span> <span class='const'>Application</span><span class='period'>.</span><span class='id keyboard_modifiers'>keyboard_modifiers</span>
  <span class='kw'>if</span> <span class='ivar'>@view</span><span class='period'>.</span><span class='id selection_mode'>selection_mode</span> <span class='op'>!=</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>AbstractItemView</span><span class='op'>::</span><span class='const'>NoSelection</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>ControlModifier</span> <span class='op'>&amp;</span> <span class='id modifiers'>modifiers</span> <span class='op'>!=</span> <span class='int'>0</span> <span class='kw'>or</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>ShiftModifier</span> <span class='op'>&amp;</span> <span class='id modifiers'>modifiers</span> <span class='op'>!=</span> <span class='int'>0</span>
  <span class='kw'>end</span>
  <span class='id file'>file</span> <span class='op'>=</span> <span class='id find_filename_in_index'>find_filename_in_index</span> <span class='id idx'>idx</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id file'>file</span>
  <span class='id line'>line</span> <span class='op'>=</span> <span class='id file'>file</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id line'>line</span> <span class='op'>-=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id line'>line</span> <span class='op'>&gt;</span> <span class='int'>0</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id display_document'>display_document</span> <span class='id file'>file</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id line'>line</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id hide_tool'>hide_tool</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='const'>Qt</span><span class='op'>::</span><span class='const'>MetaModifier</span> <span class='op'>&amp;</span> <span class='id modifiers'>modifiers</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>maybe_open_file(QModelIndex)</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="rows_changed-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rows_changed</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Turns the <tt>no_text</tt> state on or off depending on whether the model
is empty or not</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


638
639
640</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 638</span>

<span class='kw'>def</span> <span class='id rows_changed'>rows_changed</span>
  <span class='id change_state'>change_state</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>no_text</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id row_count'>row_count</span> <span class='op'>==</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>rows_changed()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="scroll_to-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>scroll_to</strong>(idx) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Scrolls the view so that the item corresponding to the index <em>idx</em> is visible.</p>
<p><em>idx</em> can be:</p>
<ul>
	<li>a <tt>Qt::ModelIndex</tt></li>
	<li>a positive integer. In this case, the view will be scrolled so that the first
item toplevel item in the row <em>idx</em> is visible.</li>
	<li>a negative integer. It works as for a positive integer except that the rows are
counted from the end (the same as passing a negative integer to <tt>Array#[]</tt>)</li>
	<li><strong>nil</strong>. In this case, the view will be scrolled so that the first toplevel item
of the last row is visible.</li>
</ul>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 320</span>

<span class='kw'>def</span> <span class='id scroll_to'>scroll_to</span> <span class='id idx'>idx</span>
  <span class='kw'>case</span> <span class='id idx'>idx</span>
  <span class='kw'>when</span> <span class='const'>Numeric</span>
    <span class='id rc'>rc</span> <span class='op'>=</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id row_count'>row_count</span>
    <span class='kw'>if</span> <span class='id idx'>idx</span> <span class='op'>&gt;=</span> <span class='id rc'>rc</span> <span class='kw'>then</span> <span class='id idx'>idx</span> <span class='op'>=</span> <span class='id rc'>rc</span> <span class='op'>-</span><span class='int'>1</span>
    <span class='kw'>elsif</span> <span class='id idx'>idx</span> <span class='op'>&lt;</span> <span class='int'>0</span> <span class='kw'>and</span> <span class='id idx'>idx</span><span class='period'>.</span><span class='id abs'>abs</span> <span class='op'>&lt;</span> <span class='id rc'>rc</span> <span class='kw'>then</span> <span class='id idx'>idx</span> <span class='op'>=</span> <span class='id rc'>rc</span> <span class='op'>+</span> <span class='id idx'>idx</span>
    <span class='kw'>elsif</span> <span class='id idx'>idx</span> <span class='op'>&lt;</span> <span class='int'>0</span> <span class='kw'>then</span> <span class='id idx'>idx</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='kw'>end</span>
    <span class='id mod_idx'>mod_idx</span> <span class='op'>=</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id index'>index</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='int'>0</span>
    <span class='ivar'>@view</span><span class='period'>.</span><span class='id scroll_to'>scroll_to</span> <span class='id mod_idx'>mod_idx</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>AbstractItemView</span><span class='op'>::</span><span class='const'>PositionAtBottom</span>
  <span class='kw'>when</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>ModelIndex</span>
    <span class='id idx'>idx</span> <span class='op'>=</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='ivar'>@model</span><span class='period'>.</span><span class='id row_count'>row_count</span> <span class='op'>-</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id idx'>idx</span><span class='period'>.</span><span class='id valid?'>valid?</span>
    <span class='ivar'>@view</span><span class='period'>.</span><span class='id scroll_to'>scroll_to</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>AbstractItemView</span><span class='op'>::</span><span class='const'>PositionAtBottom</span>
  <span class='kw'>when</span> <span class='kw'>nil</span>
    <span class='ivar'>@view</span><span class='period'>.</span><span class='id scroll_to'>scroll_to</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='ivar'>@model</span><span class='period'>.</span><span class='id row_count'>row_count</span> <span class='op'>-</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span><span class='comma'>,</span> 
        <span class='const'>Qt</span><span class='op'>::</span><span class='const'>AbstractItemView</span><span class='op'>::</span><span class='const'>PositionAtBottom</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="selection_changed-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>selection_changed</strong>(sel, desel)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Slot connected to the view&#8217;s selection model&#8217;s selectionChanged signal.</p>
<p>Turns the <tt>no_selection</tt> state on or off depending on whether the selection
is empty or not</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


630
631
632</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 630</span>

<span class='kw'>def</span> <span class='id selection_changed'>selection_changed</span> <span class='id sel'>sel</span><span class='comma'>,</span> <span class='id desel'>desel</span>
  <span class='id change_state'>change_state</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>no_selection</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='op'>!</span><span class='ivar'>@view</span><span class='period'>.</span><span class='id selection_model'>selection_model</span><span class='period'>.</span><span class='id has_selection'>has_selection</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>selection_changed(QItemSelection, QItemSelection)</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="set_color_for-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_color_for</strong>(name, color) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Instructs the OutputWidget to use the <tt>Qt::Color</tt> <em>color</em> to display items
whose output type is <em>name</em>. <em>name</em> should be a symbol.</p>
<p>If a color had already been set for <em>name</em>, it will be overwritten</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


304
305
306</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 304</span>

<span class='kw'>def</span> <span class='id set_color_for'>set_color_for</span> <span class='id name'>name</span><span class='comma'>,</span> <span class='id color'>color</span>
  <span class='ivar'>@colors</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id color'>color</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_output_type-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_output_type</strong>(idx, type) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Sets the output type associated with the <tt>Qt::ModelIndex</tt> <em>idx</em> to <em>type</em>
(a symbol).</p>
<p>If a color has been associated with <em>type</em> (either because <em>type</em> is one of the
standard types or because it&#8217;s been set with <tt>set_color_for</tt>), the foreground
role of the index will be changed to that color and the <ins>OutputTypeRole</ins> of the
index will be set to a string version of <em>type</em>. In this case, <em>type</em> is returned.</p>
<p>If no color has been associated with <em>type</em>, this method does nothing and returns
<strong>nil</strong>.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


351
352
353
354
355
356
357
358</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 351</span>

<span class='kw'>def</span> <span class='id set_output_type'>set_output_type</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='id type'>type</span>
  <span class='id color'>color</span> <span class='op'>=</span> <span class='ivar'>@colors</span><span class='lbracket'>[</span><span class='id type'>type</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id color'>color</span>
    <span class='ivar'>@model</span><span class='period'>.</span><span class='id set_data'>set_data</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id from_value'>from_value</span><span class='lparen'>(</span><span class='id color'>color</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>ForegroundRole</span>
    <span class='ivar'>@model</span><span class='period'>.</span><span class='id set_data'>set_data</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id type'>type</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>OutputTypeRole</span>
    <span class='id type'>type</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="setup_model-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>setup_model</strong>(mod)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates the model (if needed) and makes some signal-slot connections</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


477
478
479
480
481
482
483
484
485</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 477</span>

<span class='kw'>def</span> <span class='id setup_model'>setup_model</span> <span class='id mod'>mod</span>
  <span class='ivar'>@model</span> <span class='op'>=</span> <span class='id mod'>mod</span> <span class='op'>||</span> <span class='const'>Model</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='ivar'>@model</span><span class='period'>.</span><span class='id insert_column'>insert_column</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id column_count'>column_count</span> <span class='op'>&lt;</span> <span class='int'>1</span>
  <span class='ivar'>@model</span><span class='period'>.</span><span class='id parent'>parent</span> <span class='op'>=</span> <span class='ivar'>@view</span>
  <span class='ivar'>@view</span><span class='period'>.</span><span class='id model'>model</span> <span class='op'>=</span> <span class='ivar'>@model</span>
  <span class='id connect'>connect</span> <span class='ivar'>@model</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rowsInserted(QModelIndex, int, int)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:rows_changed</span><span class='rparen'>)</span>
  <span class='id connect'>connect</span> <span class='ivar'>@model</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rowsRemoved(QModelIndex, int, int)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:rows_changed</span><span class='rparen'>)</span>
  <span class='id connect'>connect</span> <span class='ivar'>@model</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rowsInserted(QModelIndex, int, int)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>do_auto_scroll(QModelIndex, int, int)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="show_menu-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>show_menu</strong>(pt)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Shows the menu (asynchronously) at the point <em>pt</em>.</p>
<p>If the menu hasn&#8217;t as yet been created, it creates it.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


520
521
522
523</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 520</span>

<span class='kw'>def</span> <span class='id show_menu'>show_menu</span> <span class='id pt'>pt</span>
  <span class='id fill_menu'>fill_menu</span> <span class='kw'>if</span> <span class='ivar'>@menu</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  <span class='ivar'>@menu</span><span class='period'>.</span><span class='id popup'>popup</span> <span class='id pt'>pt</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>show_menu(QPoint)</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="text_for_clipboard-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>text_for_clipboard</strong>(indexes)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Method used by the <ins>copy</ins> and <tt>copy_selected</tt> methods to obtain the text
to put in the clipboard from the indexes.</p>
<p>The default behaviour is to create a string which contains the content of all the
toplevel items on the same row separated by tabs and separate different rows by
newlines. Child items are ignored.</p>
<p>Derived class can override this method (and, if they plan to put child items in
the view, they&#8217;re advised to do so). The method must accept an array of <tt>Qt::ModelIndex</tt>
as argument and return a string with the text to put in the clipboard.</p>
<p>The reason the default behaviour ignores child items is that their meaning (and
therefore the way their contents should be inserted into the string) depends
very much on the specific content.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


608
609
610
611
612
613
614
615
616
617
618
619
620
621
622</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 608</span>

<span class='kw'>def</span> <span class='id text_for_clipboard'>text_for_clipboard</span> <span class='id indexes'>indexes</span>
  <span class='id indexes'>indexes</span> <span class='op'>=</span> <span class='id indexes'>indexes</span><span class='period'>.</span><span class='id select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='op'>!</span><span class='id i'>i</span><span class='period'>.</span><span class='id parent'>parent</span><span class='period'>.</span><span class='id valid?'>valid?</span><span class='rbrace'>}</span>
  <span class='id rows'>rows</span> <span class='op'>=</span> <span class='id indexes'>indexes</span><span class='period'>.</span><span class='id group_by'>group_by</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id idx'>idx</span><span class='op'>|</span> <span class='id idx'>idx</span><span class='period'>.</span><span class='id row'>row</span><span class='rbrace'>}</span>
  <span class='id rows'>rows</span> <span class='op'>=</span> <span class='id rows'>rows</span><span class='period'>.</span><span class='id sort'>sort</span>
  <span class='id text'>text</span> <span class='op'>=</span> <span class='id rows'>rows</span><span class='period'>.</span><span class='id inject'>inject</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id res'>res</span><span class='comma'>,</span> <span class='id r'>r</span><span class='op'>|</span>
    <span class='id idxs'>idxs</span> <span class='op'>=</span> <span class='id r'>r</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id sort_by'>sort_by</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id i'>i</span><span class='period'>.</span><span class='id column'>column</span><span class='rbrace'>}</span>
    <span class='id idxs'>idxs</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id res'>res</span> <span class='op'>&lt;&lt;</span> <span class='id i'>i</span><span class='period'>.</span><span class='id data'>data</span><span class='period'>.</span><span class='id to_string'>to_string</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
    <span class='comment'># The above line gives \t as last character, while a \n is needed
</span>    <span class='id res'>res</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id res'>res</span>
  <span class='kw'>end</span>
  <span class='comment'># The above block leaves a \n at the end of the string which shouldn't be
</span>  <span class='comment'># there
</span>  <span class='id text'>text</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="title=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>title=</strong>(text) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Gives a title to the widget.</p>
<p>A title is a toplevel entry at position 0,0 with output type <ins>:message</ins> and has 
the <ins>IsTitleRole</ins> set to <strong>true</strong>. Of course, there can be only one item which is
a title.</p>
<p>If the item in position 0,0 is not a title, a new row is inserted at position 0,
its first element&#8217;s DisplayRole is set to <em>text</em> and its IsTitleRole is set to
true.</p>
<p>If the item in position 0,0 is a title, then its DisplayRole value is replaced
with <em>text</em>.</p>
<p>Usually, the title is created when the external program is started and changed
later if needed</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


389
390
391
392
393
394
395
396
397
398
399
400
401</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 389</span>

<span class='kw'>def</span> <span class='id title='>title=</span> <span class='id text'>text</span>
  <span class='id idx'>idx</span> <span class='op'>=</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id index'>index</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span>
  <span class='kw'>if</span> <span class='id idx'>idx</span><span class='period'>.</span><span class='id data'>data</span><span class='lparen'>(</span><span class='const'>IsTitleRole</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_bool'>to_bool</span>
    <span class='ivar'>@model</span><span class='period'>.</span><span class='id set_data'>set_data</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id text'>text</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='ivar'>@model</span><span class='period'>.</span><span class='id insert_column'>insert_column</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id column_count'>column_count</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='ivar'>@model</span><span class='period'>.</span><span class='id insert_row'>insert_row</span> <span class='int'>0</span>
    <span class='id idx'>idx</span> <span class='op'>=</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id index'>index</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span>
    <span class='ivar'>@model</span><span class='period'>.</span><span class='id set_data'>set_data</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id text'>text</span><span class='rparen'>)</span>
    <span class='ivar'>@model</span><span class='period'>.</span><span class='id set_data'>set_data</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>IsTitleRole</span>
  <span class='kw'>end</span>
  <span class='id set_output_type'>set_output_type</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='symbol'>:message</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update_index_color-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>update_index_color</strong>(idx)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Changes the foreground color of the Qt::ModelIndex <em>idx</em> and of its children so
that it matches the color set for its output type.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


459
460
461
462
463
464
465
466
467
468
469
470
471
472</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 459</span>

<span class='kw'>def</span> <span class='id update_index_color'>update_index_color</span> <span class='id idx'>idx</span>
  <span class='id type'>type</span> <span class='op'>=</span> <span class='id idx'>idx</span><span class='period'>.</span><span class='id data'>data</span><span class='lparen'>(</span><span class='const'>OutputTypeRole</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_string'>to_string</span><span class='period'>.</span><span class='id to_sym'>to_sym</span> <span class='kw'>rescue</span> <span class='kw'>nil</span>
  <span class='id color'>color</span> <span class='op'>=</span> <span class='ivar'>@colors</span><span class='lbracket'>[</span><span class='id type'>type</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id color'>color</span>
    <span class='ivar'>@model</span><span class='period'>.</span><span class='id set_data'>set_data</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id from_value'>from_value</span><span class='lparen'>(</span><span class='id color'>color</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>ForegroundRole</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='ivar'>@model</span><span class='period'>.</span><span class='id has_children'>has_children</span> <span class='id idx'>idx</span>
    <span class='ivar'>@model</span><span class='period'>.</span><span class='id row_count'>row_count</span><span class='lparen'>(</span><span class='id idx'>idx</span><span class='rparen'>)</span><span class='period'>.</span><span class='id times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id r'>r</span><span class='op'>|</span>
      <span class='ivar'>@model</span><span class='period'>.</span><span class='id column_count'>column_count</span><span class='lparen'>(</span><span class='id idx'>idx</span><span class='rparen'>)</span><span class='period'>.</span><span class='id times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id c'>c</span><span class='op'>|</span>
        <span class='id update_index_color'>update_index_color</span> <span class='id idx'>idx</span><span class='period'>.</span><span class='id child'>child</span><span class='lparen'>(</span><span class='id r'>r</span><span class='comma'>,</span> <span class='id c'>c</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="with_auto_scrolling-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>with_auto_scrolling</strong>(val) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Executes the block with autoscrolling turned on or off according to <em>val</em>, without
permanently changing the autoscrolling setting.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


364
365
366
367
368
369
370</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/output_widget.rb', line 364</span>

<span class='kw'>def</span> <span class='id with_auto_scrolling'>with_auto_scrolling</span> <span class='id val'>val</span>
  <span class='id old'>old</span> <span class='op'>=</span> <span class='ivar'>@auto_scroll</span>
  <span class='ivar'>@auto_scroll</span> <span class='op'>=</span> <span class='id val'>val</span>
  <span class='kw'>begin</span> <span class='kw'>yield</span>
  <span class='kw'>ensure</span> <span class='ivar'>@auto_scroll</span> <span class='op'>=</span> <span class='id old'>old</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>



  <div id="instance_method_details" class="method_details_list">
    <h2>Signal Details</h2>
    
      <div class="method_details first">
  <p class="signature first" id="about_to_fill_menu-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>about_to_fill_menu</strong> 
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="about_to_fill_menu-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>about_to_fill_menu</strong> 
</p>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Nov 13 18:00:49 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>