<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Ruber::ComponentManager::DepsSolver</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (D)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../Ruber.html" title="Ruber (module)">Ruber</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../ComponentManager.html" title="Ruber::ComponentManager (class)">ComponentManager</a></span></span>
     &raquo; 
    <span class="title">DepsSolver</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Ruber::ComponentManager::DepsSolver
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Ruber::ComponentManager::DepsSolver</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/ruber/component_manager.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Helper class which contains the methods needed to find all the plugins needed
  to satisfy the dependencies of a given set of plugins.</p>
The difference between this class and PluginSorter is that the latter needs
to know all the plugins which should be loaded, while this class has the job of
finding out which ones need to be loaded.

  </div>
</div>
<div class="tags">
  
</div>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (DepsSolver) <strong>initialize</strong>(to_load, availlable) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new <ins>DepsSolver</ins>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#remove_unneeded_deps-instance_method" title="#remove_unneeded_deps (instance method)">- (Object) <strong>remove_unneeded_deps</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Attempts to remove from the list of needed dependencies all those dependencies.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#solve-instance_method" title="#solve (instance method)">- (Object) <strong>solve</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Tries to resolve the dependencies for the given plugins, returning an array.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#solve_for-instance_method" title="#solve_for (instance method)">- (Object) <strong>solve_for</strong>(pl, errors, stack) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Recursively finds all the dependencies for the plugin described by the PluginSpecification.</p></div></span>
  
</li>

      
    </ul>
  







<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Ruber::ComponentManager::DepsSolver (class)">DepsSolver</a></span></tt>) <strong>initialize</strong>(to_load, availlable) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates a new <ins>DepsSolver</ins>.</p>
<i>to_load</i> is an array containing the PluginSpecification corresponding describing
the plugins to load, while <i>availlable</i> is an array containing the
PluginSpecification which can be used to resolve dependencies.

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/component_manager.rb', line 201</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span> <span class='id to_load'>to_load</span><span class='comma'>,</span> <span class='id availlable'>availlable</span>
  <span class='ivar'>@to_load</span> <span class='op'>=</span> <span class='id to_load'>to_load</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id i'>i</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id i'>i</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id to_h'>to_h</span>
  <span class='ivar'>@availlable</span> <span class='op'>=</span> <span class='id availlable'>availlable</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id i'>i</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id i'>i</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id to_h'>to_h</span>
  <span class='ivar'>@loaded_features</span> <span class='op'>=</span> <span class='id to_load'>to_load</span><span class='period'>.</span><span class='id inject'>inject</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id res'>res</span><span class='comma'>,</span> <span class='id i'>i</span><span class='op'>|</span>
    <span class='id i'>i</span><span class='period'>.</span><span class='id features'>features</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span> <span class='lparen'>(</span><span class='id res'>res</span><span class='lbracket'>[</span><span class='id f'>f</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='id i'>i</span><span class='rbrace'>}</span>
    <span class='id res'>res</span>
  <span class='kw'>end</span>
  <span class='ivar'>@availlable_plugins</span> <span class='op'>=</span> <span class='id availlable'>availlable</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id i'>i</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id i'>i</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id to_h'>to_h</span>
  <span class='ivar'>@availlable_features</span> <span class='op'>=</span> <span class='id availlable'>availlable</span><span class='period'>.</span><span class='id inject'>inject</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id res'>res</span><span class='comma'>,</span> <span class='id i'>i</span><span class='op'>|</span>
    <span class='id i'>i</span><span class='period'>.</span><span class='id features'>features</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span> <span class='lparen'>(</span><span class='id res'>res</span><span class='lbracket'>[</span><span class='id f'>f</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='id i'>i</span><span class='rbrace'>}</span>
    <span class='id res'>res</span>
  <span class='kw'>end</span>
  <span class='comment'># @res is an array containing the result, that is the list of names of
</span>  <span class='comment'># the plugins to load to satisfy all dependencies.
</span>  <span class='comment'># @deps is a hash containing the reasons for which a given plugin should
</span>  <span class='comment'># be loaded. Each key is the name of a plugin, while each value is an array
</span>  <span class='comment'># containing the list of plugins directly depending on the key. If the key
</span>  <span class='comment'># is in the list of plugins to load (that is in the first argument passed
</span>  <span class='comment'># to the constructor), the array contains nil.
</span>  <span class='ivar'>@res</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@deps</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id new'>new</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id h'>h</span><span class='comma'>,</span> <span class='id k'>k</span><span class='op'>|</span> <span class='id h'>h</span><span class='lbracket'>[</span><span class='id k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="remove_unneeded_deps-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>remove_unneeded_deps</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Attempts to remove from the list of needed dependencies all those dependencies
  which are there only to provide features already provided by other plugins.</p>
For example, if the list of needed plugins includes both the plugin <tt>:a</tt>
and the plugin <tt>:b</tt>, which provides the feature <tt>:a</tt>, then the
plugin <tt>:a</tt> whould be removed from the list.

If after removing plugins as described above, the list contains plugins which
aren&#8217;t needed anymore, because they were there only to satisfy the dependencies
of plugins which have already been removed, they&#8217;re also removed.

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/component_manager.rb', line 305</span>

<span class='kw'>def</span> <span class='id remove_unneeded_deps'>remove_unneeded_deps</span>
  <span class='id h'>h</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id new'>new</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id hash'>hash</span><span class='comma'>,</span> <span class='id k'>k</span><span class='op'>|</span> <span class='id hash'>hash</span><span class='lbracket'>[</span><span class='id k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
  <span class='comment'>#A hash having the features as keys and the plugins providing them
</span>  <span class='comment'>#as values
</span>  <span class='id deps_features'>deps_features</span> <span class='op'>=</span> <span class='ivar'>@res</span><span class='period'>.</span><span class='id inject'>inject</span><span class='lparen'>(</span><span class='id h'>h</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id res'>res</span><span class='comma'>,</span> <span class='id i'>i</span><span class='op'>|</span>
    <span class='ivar'>@availlable_plugins</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id features'>features</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span> <span class='id res'>res</span><span class='lbracket'>[</span><span class='id f'>f</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id i'>i</span><span class='rbrace'>}</span>
    <span class='id res'>res</span>
  <span class='kw'>end</span>
  <span class='id to_delete'>to_delete</span> <span class='op'>=</span> <span class='ivar'>@res</span><span class='period'>.</span><span class='id find'>find</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='op'>!</span><span class='ivar'>@deps</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='op'>!</span><span class='id deps_features'>deps_features</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id uniq'>uniq</span><span class='period'>.</span><span class='id only?'>only?</span> <span class='id i'>i</span><span class='rbrace'>}</span>
  <span class='kw'>until</span> <span class='id to_delete'>to_delete</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='ivar'>@res</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='id to_delete'>to_delete</span>
    <span class='id deps_features'>deps_features</span><span class='period'>.</span><span class='id each_value'>each_value</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id i'>i</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='id to_delete'>to_delete</span><span class='rbrace'>}</span>
    <span class='id new'>new</span> <span class='op'>=</span> <span class='id deps_features'>deps_features</span><span class='lbracket'>[</span><span class='id to_delete'>to_delete</span><span class='rbracket'>]</span>
    <span class='ivar'>@deps</span><span class='lbracket'>[</span><span class='id new'>new</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='ivar'>@deps</span><span class='lbracket'>[</span><span class='id to_delete'>to_delete</span><span class='rbracket'>]</span>
    <span class='ivar'>@deps</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='id to_delete'>to_delete</span>
    <span class='ivar'>@deps</span><span class='period'>.</span><span class='id each_value'>each_value</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id i'>i</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='id to_delete'>to_delete</span><span class='rbrace'>}</span>
    <span class='id to_delete'>to_delete</span> <span class='op'>=</span> <span class='ivar'>@res</span><span class='period'>.</span><span class='id find'>find</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='op'>!</span><span class='ivar'>@deps</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='op'>!</span><span class='id deps_features'>deps_features</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id only?'>only?</span> <span class='id i'>i</span><span class='rbrace'>}</span>
    <span class='id to_delete'>to_delete</span> <span class='op'>=</span> <span class='ivar'>@deps</span><span class='period'>.</span><span class='id find'>find</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id k'>k</span><span class='comma'>,</span> <span class='id v'>v</span><span class='op'>|</span> <span class='id v'>v</span><span class='period'>.</span><span class='id empty?'>empty?</span><span class='rbrace'>}</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>rescue</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id to_delete'>to_delete</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="solve-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>solve</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Tries to resolve the dependencies for the given plugins, returning an array
  containing the plugins needed to satisfy all the dependencies. When a plugin
  depends on a feature <em>f</em>, then <em>f</em> is included in the list of needed plugins, 
  together with its dependencies, unless another required plugin already provides
  that feature.</p>
If some dependencies can&#8217;t be satisfied, UnresolvedDep is raised. If there are
circular dependencies, CircularDep is raised.

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236
237
238
239
240
241
242
243
244
245</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/component_manager.rb', line 234</span>

<span class='kw'>def</span> <span class='id solve'>solve</span>
  <span class='id errors'>errors</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:missing</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='symbol'>:circular</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
  <span class='ivar'>@res</span> <span class='op'>=</span> <span class='ivar'>@to_load</span><span class='period'>.</span><span class='id values'>values</span><span class='period'>.</span><span class='id inject'>inject</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id r'>r</span><span class='comma'>,</span> <span class='id i'>i</span><span class='op'>|</span> 
    <span class='ivar'>@deps</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='period'>.</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='kw'>nil</span>
    <span class='id r'>r</span> <span class='op'>+</span> <span class='id solve_for'>solve_for</span><span class='lparen'>(</span><span class='id i'>i</span><span class='comma'>,</span> <span class='id errors'>errors</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id errors'>errors</span><span class='lbracket'>[</span><span class='symbol'>:missing</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='kw'>then</span> <span class='id raise'>raise</span> <span class='const'>UnresolvedDep</span><span class='period'>.</span><span class='id new'>new</span> <span class='id errors'>errors</span><span class='lbracket'>[</span><span class='symbol'>:missing</span><span class='rbracket'>]</span>
  <span class='kw'>elsif</span> <span class='op'>!</span><span class='id errors'>errors</span><span class='lbracket'>[</span><span class='symbol'>:circular</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='kw'>then</span> <span class='id raise'>raise</span> <span class='const'>CircularDep</span><span class='period'>.</span><span class='id new'>new</span> <span class='id errors'>errors</span><span class='lbracket'>[</span><span class='symbol'>:circular</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id remove_unneeded_deps'>remove_unneeded_deps</span>
  <span class='ivar'>@res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="solve_for-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>solve_for</strong>(pl, errors, stack)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Recursively finds all the dependencies for the plugin described by the PluginSpecification
  <em>pl</em>.</p>
<em>errors</em> is a hash used to store missing dependencies and circular dependencies.
It should have a <tt>:circular</tt> and a <tt>:missing</tt> key. The corresponding
values should be an array and a hash.

<em>stack</em> is an array containing the names of the plugins whose dependencies are
being solved and is used to detect circular dependencies. For example, if <em>stack</em>
is: <tt>[:a, :b, :c]</tt>, it would mean that we&#8217;re resolving the dependencies
of the plugin :c, which is a dependency of the plugin :b, which is a dependency
of the plugin :a. If this array contains <tt>pl.name</tt>, then there&#8217;s a circular
dependency.

<b>Note:</b> this method doesn&#8217;t raise exceptions if there are circular or missing
dependencies. Rather, it adds them to <em>errors</em> and goes on (this means that it
skips both missing and circular dependencies).

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/component_manager.rb', line 268</span>

<span class='kw'>def</span> <span class='id solve_for'>solve_for</span> <span class='id pl'>pl</span><span class='comma'>,</span> <span class='id errors'>errors</span><span class='comma'>,</span> <span class='id stack'>stack</span>
  <span class='id deps'>deps</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id stack'>stack</span><span class='period'>.</span><span class='id include?'>include?</span> <span class='id pl'>pl</span><span class='period'>.</span><span class='id name'>name</span>
    <span class='id errors'>errors</span><span class='lbracket'>[</span><span class='symbol'>:circular</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id stack'>stack</span><span class='period'>.</span><span class='id at'>at</span><span class='lparen'>(</span><span class='id stack'>stack</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='id pl'>pl</span><span class='period'>.</span><span class='id name'>name</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id pl'>pl</span><span class='period'>.</span><span class='id name'>name</span><span class='rbracket'>]</span>
    <span class='kw'>return</span> <span class='id deps'>deps</span>
  <span class='kw'>end</span>
  <span class='id stack'>stack</span> <span class='op'>&lt;&lt;</span> <span class='id pl'>pl</span><span class='period'>.</span><span class='id name'>name</span>
  <span class='kw'>unless</span> <span class='id pl'>pl</span><span class='period'>.</span><span class='id deps'>deps</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id pl'>pl</span><span class='period'>.</span><span class='id deps'>deps</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id dep'>dep</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='ivar'>@loaded_features</span><span class='period'>.</span><span class='id include?'>include?</span> <span class='id dep'>dep</span>
      <span class='id new_pl'>new_pl</span> <span class='op'>=</span> <span class='ivar'>@availlable_plugins</span><span class='lbracket'>[</span><span class='id dep'>dep</span><span class='rbracket'>]</span>
      <span class='kw'>if</span> <span class='id new_pl'>new_pl</span>
        <span class='id deps'>deps</span> <span class='op'>&lt;&lt;</span> <span class='id dep'>dep</span>
        <span class='ivar'>@deps</span><span class='lbracket'>[</span><span class='id dep'>dep</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id pl'>pl</span><span class='period'>.</span><span class='id name'>name</span>
        <span class='id deps'>deps</span> <span class='op'>+=</span> <span class='id solve_for'>solve_for</span> <span class='id new_pl'>new_pl</span><span class='comma'>,</span> <span class='id errors'>errors</span><span class='comma'>,</span> <span class='id stack'>stack</span>
      <span class='kw'>else</span>
        <span class='lparen'>(</span><span class='id errors'>errors</span><span class='lbracket'>[</span><span class='symbol'>:missing</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id dep'>dep</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='id pl'>pl</span><span class='period'>.</span><span class='id name'>name</span>
        <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id stack'>stack</span><span class='period'>.</span><span class='id pop'>pop</span>
  <span class='id deps'>deps</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>



</div>
    
    <div id="footer">
  Generated on Fri Apr 29 10:51:15 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.8 (ruby-1.9.2).
</div>

  </body>
</html>