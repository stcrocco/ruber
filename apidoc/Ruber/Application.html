<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Ruber::Application</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (A)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Ruber.html" title="Ruber (module)">Ruber</a></span></span>
     &raquo; 
    <span class="title">Application</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Ruber::Application
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../KDE/Application.html" title="KDE::Application (class)">KDE::Application</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="../KDE/Application.html" title="KDE::Application (class)">KDE::Application</a></span></li>
          
            <li class="next">Ruber::Application</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="PluginLike.html" title="Ruber::PluginLike (module)">PluginLike</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/ruber/application/application.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Application/DefaultDocumentExtension.html" title="Ruber::Application::DefaultDocumentExtension (class)">DefaultDocumentExtension</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="DEFAULT_PLUGIN_PATHS-constant" class="">DEFAULT_PLUGIN_PATHS =
          <div class="docstring">
  <div class="discussion">
    <p>The default paths where to look for plugins.</p>
<p>It includes <code>$KDEHOME/share/apps/ruber/plugins</code> and the <code>plugins</code> subdirectory
of the ruber installation directory</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code">[0], File.join('ruber','plugins')),
  RUBER_PLUGIN_DIR
]</pre></dd>
      
        <dt id="DEFAULT_PLUGINS-constant" class="">DEFAULT_PLUGINS =
          <div class="docstring">
  <div class="discussion">
    <p>The default plugins to load</p>
<p>Currently, they are: ruby_development, find_in_files, syntax_checker, command and state</p>

  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[</span><span class='tstring_end'>ruby_development</span></span></pre></dd>
      
    </dl>
  


  
  
  
  
  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#cmd_line_options-instance_method" title="#cmd_line_options (instance method)">- (Hash) <strong>cmd_line_options</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The command line options passed to ruber (after they&#8217;ve been processed).</p></div></span>
  
</li>

    
      <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#status-instance_method" title="#status (instance method)">- (Symbol) <strong>status</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; <span class="caps">HEAD</span>
===
The state Ruber is in.</p></div></span>
  
</li>

    
  </ul>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Application) <strong>initialize</strong>(manager, psf) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new instance of <span class='object_link'><a href="" title="Ruber::Application (class)">Application</a></span>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#load_core_components-instance_method" title="#load_core_components (instance method)">- (nil) <strong>load_core_components</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Loads the core components.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#load_settings-instance_method" title="#load_settings (instance method)">- (nil) <strong>load_settings</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Override of <span class='object_link'><a href="PluginLike.html#load_settings-instance_method" title="Ruber::PluginLike#load_settings (method)">PluginLike#load_settings</a></span>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#open_command_line_files-instance_method" title="#open_command_line_files (instance method)">- (Object) <strong>open_command_line_files</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Opens the files and/or project listed on the command line.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#plugin_directories-instance_method" title="#plugin_directories (instance method)">- (Array&lt;String&gt;) <strong>plugin_directories</strong> </a>
    

    
      (also: #plugin_dirs)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A list of the directories where Ruber looks for plugins.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#plugin_directories%3D-instance_method" title="#plugin_directories= (instance method)">- (Object) <strong>plugin_directories</strong>(dirs) </a>
    

    
      (also: #plugin_dirs=)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the list of directories where Ruber looks for plugins.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#quit_ruber-instance_method" title="#quit_ruber (instance method)">- (nil) <strong>quit_ruber</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Quits ruber.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#quitting%3F-instance_method" title="#quitting? (instance method)">- (Boolean) <strong>quitting?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether the application is quitting or not.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#register_with_config-instance_method" title="#register_with_config (instance method)">- (nil) <strong>register_with_config</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Registers the configuration options with the configuration manager.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#running%3F-instance_method" title="#running? (instance method)">- (Boolean) <strong>running?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether the application is running or not.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#safe_load_plugins-instance_method" title="#safe_load_plugins (instance method)">- (Boolen) <strong>safe_load_plugins</strong>(plugins, silent = false, dirs = nil) {|pso, ex| ... }</a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Loads plugins handling the exceptions they may raise in the meanwhile.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#setup-instance_method" title="#setup (instance method)">- (nil) <strong>setup</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Prepares the application for running.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#starting%3F-instance_method" title="#starting? (instance method)">- (Boolean) <strong>starting?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether the application is starting or has already started.</p></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="PluginLike.html" title="Ruber::PluginLike (module)">PluginLike</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="PluginLike.html#add_extensions_to_project-instance_method" title="Ruber::PluginLike#add_extensions_to_project (method)">#add_extensions_to_project</a></span>, <span class='object_link'><a href="PluginLike.html#add_options_to_project-instance_method" title="Ruber::PluginLike#add_options_to_project (method)">#add_options_to_project</a></span>, <span class='object_link'><a href="PluginLike.html#add_widgets_to_project-instance_method" title="Ruber::PluginLike#add_widgets_to_project (method)">#add_widgets_to_project</a></span>, <span class='object_link'><a href="PluginLike.html#create_tool_widget-instance_method" title="Ruber::PluginLike#create_tool_widget (method)">#create_tool_widget</a></span>, <span class='object_link'><a href="PluginLike.html#delayed_initialize-instance_method" title="Ruber::PluginLike#delayed_initialize (method)">#delayed_initialize</a></span>, <span class='object_link'><a href="PluginLike.html#initialize_plugin-instance_method" title="Ruber::PluginLike#initialize_plugin (method)">#initialize_plugin</a></span>, <span class='object_link'><a href="PluginLike.html#plugin_name-instance_method" title="Ruber::PluginLike#plugin_name (method)">#plugin_name</a></span>, <span class='object_link'><a href="PluginLike.html#query_close-instance_method" title="Ruber::PluginLike#query_close (method)">#query_close</a></span>, <span class='object_link'><a href="PluginLike.html#register_options-instance_method" title="Ruber::PluginLike#register_options (method)">#register_options</a></span>, <span class='object_link'><a href="PluginLike.html#register_with_project-instance_method" title="Ruber::PluginLike#register_with_project (method)">#register_with_project</a></span>, <span class='object_link'><a href="PluginLike.html#remove_extensions_from_project-instance_method" title="Ruber::PluginLike#remove_extensions_from_project (method)">#remove_extensions_from_project</a></span>, <span class='object_link'><a href="PluginLike.html#remove_from_project-instance_method" title="Ruber::PluginLike#remove_from_project (method)">#remove_from_project</a></span>, <span class='object_link'><a href="PluginLike.html#remove_options_from_project-instance_method" title="Ruber::PluginLike#remove_options_from_project (method)">#remove_options_from_project</a></span>, <span class='object_link'><a href="PluginLike.html#remove_widgets_from_project-instance_method" title="Ruber::PluginLike#remove_widgets_from_project (method)">#remove_widgets_from_project</a></span>, <span class='object_link'><a href="PluginLike.html#restore_session-instance_method" title="Ruber::PluginLike#restore_session (method)">#restore_session</a></span>, <span class='object_link'><a href="PluginLike.html#save_settings-instance_method" title="Ruber::PluginLike#save_settings (method)">#save_settings</a></span>, <span class='object_link'><a href="PluginLike.html#session_data-instance_method" title="Ruber::PluginLike#session_data (method)">#session_data</a></span>, <span class='object_link'><a href="PluginLike.html#setup_action-instance_method" title="Ruber::PluginLike#setup_action (method)">#setup_action</a></span>, <span class='object_link'><a href="PluginLike.html#setup_actions-instance_method" title="Ruber::PluginLike#setup_actions (method)">#setup_actions</a></span>, <span class='object_link'><a href="PluginLike.html#shutdown-instance_method" title="Ruber::PluginLike#shutdown (method)">#shutdown</a></span>, <span class='object_link'><a href="PluginLike.html#unload-instance_method" title="Ruber::PluginLike#unload (method)">#unload</a></span>, <span class='object_link'><a href="PluginLike.html#update_project-instance_method" title="Ruber::PluginLike#update_project (method)">#update_project</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../KDE/Application.html" title="KDE::Application (class)">KDE::Application</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../KDE/Application.html#with_override_cursor-class_method" title="KDE::Application.with_override_cursor (method)">with_override_cursor</a></span>, <span class='object_link'><a href="../KDE/Application.html#with_override_cursor-instance_method" title="KDE::Application#with_override_cursor (method)">#with_override_cursor</a></span></p>






<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Ruber::Application (class)">Application</a></span></tt>) <strong>initialize</strong>(manager, psf) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates a new instance of <span class='object_link'><a href="" title="Ruber::Application (class)">Ruber::Application</a></span></p>
<p>It loads the core components and sets up a single shot timer which calls <span class='object_link'><a href="#setup-instance_method" title="Ruber::Application#setup (method)">#setup</a></span>
and is fired as soon as the event loop starts.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="ComponentManager.html" title="Ruber::ComponentManager (class)">ComponentManager</a></span></tt>)</span>
      
      
        <span class='name'>manager</span>
      
      
      
        &mdash;
        <div class='inline'><p>the component manager</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="PluginSpecification.html" title="Ruber::PluginSpecification (class)">PluginSpecification</a></span></tt>)</span>
      
      
        <span class='name'>psf</span>
      
      
      
        &mdash;
        <div class='inline'><p>the plugin specification object describing the
application component</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 105</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span> <span class='id manager'>manager</span><span class='comma'>,</span> <span class='id psf'>psf</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='ivar'>@components</span> <span class='op'>=</span> <span class='id manager'>manager</span>
  <span class='ivar'>@components</span><span class='period'>.</span><span class='id parent'>parent</span> <span class='op'>=</span> <span class='kw'>self</span>
  <span class='const'>Ruber</span><span class='period'>.</span><span class='id instance_variable_set'>instance_variable_set</span> <span class='symbol'>:@components</span><span class='comma'>,</span> <span class='ivar'>@components</span>
  <span class='id initialize_plugin'>initialize_plugin</span> <span class='id psf'>psf</span>
  <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Global</span><span class='period'>.</span><span class='id dirs'>dirs</span><span class='period'>.</span><span class='id addPrefix'>addPrefix</span> <span class='const'>File</span><span class='period'>.</span><span class='id expand_path'>expand_path</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span> <span class='const'>RUBER_DATA_DIR</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>..</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>data</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id icon_path'>icon_path</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Global</span><span class='period'>.</span><span class='id dirs'>dirs</span><span class='period'>.</span><span class='id find_resource'>find_resource</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>icon</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ruber</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id window_icon'>window_icon</span> <span class='op'>=</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Icon</span><span class='period'>.</span><span class='id new'>new</span> <span class='id icon_path'>icon_path</span>
  <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Global</span><span class='period'>.</span><span class='id main_component'>main_component</span><span class='period'>.</span><span class='id about_data'>about_data</span><span class='period'>.</span><span class='id program_icon_name'>program_icon_name</span> <span class='op'>=</span> <span class='id icon_path'>icon_path</span>
  <span class='ivar'>@cmd_line_options</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>CmdLineArgs</span><span class='period'>.</span><span class='id parsed_args'>parsed_args</span>
  <span class='ivar'>@plugin_dirs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id load_core_components'>load_core_components</span>
  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='symbol'>:starting</span>
  <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Timer</span><span class='period'>.</span><span class='id single_shot'>single_shot</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:setup</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="cmd_line_options-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="cmd_line_options-instance_method">
  
    - (<tt>Hash</tt>) <strong>cmd_line_options</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The command line options passed to ruber (after they&#8217;ve been processed)</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>the command line options passed to ruber (after they&#8217;ve been processed)</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 74</span>

<span class='kw'>def</span> <span class='id cmd_line_options'>cmd_line_options</span>
  <span class='ivar'>@cmd_line_options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="status-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="status-instance_method">
  
    - (<tt><span class='object_link'><a href="../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>) <strong>status</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; <span class="caps">HEAD</span>
===
The state Ruber is in</p>
<p>Ruber can be in three states:</p>
<dl>
	<dt><strong>starting</strong></dt>
	<dd>from the time it&#8217;s launched to when <span class='object_link'><a href="#setup-instance_method" title="Ruber::Application#setup (method)">#setup</a></span> returns</dd>
	<dt><strong>running</strong></dt>
	<dd>from after <span class='object_link'><a href="#setup-instance_method" title="Ruber::Application#setup (method)">#setup</a></span> has returend to when the user chooses to quit
  it (either with the <code>File/Quit</code> menu entry or clicking on the button on the title
  bar)</dd>
	<dt><strong>quitting</strong></dt>
	<dd>from when the user chooses to quit Ruber onwards</dd>
</dl>
<p>&gt;&gt;&gt;&gt;&gt;&gt;&gt; master</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>the status of the application. It can be: <code>:starting</code>, <code>:running</code>
or <code>:quitting</code></p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 93</span>

<span class='kw'>def</span> <span class='id status'>status</span>
  <span class='ivar'>@status</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="load_core_components-instance_method">
  
    - (<tt>nil</tt>) <strong>load_core_components</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Loads the core components</p>
<p>In loading order, the core components are:</p>
<ul>
	<li>the configuration manager</li>
	<li>the document list</li>
	<li>the project list</li>
	<li>the main window</li>
</ul>
<p>In case loading one of the core components raises an exception, the user is
warned with a dialog and ruber is closed.</p>
<p>After creating the configuration manager, <span class='object_link'><a href="#register_with_config-instance_method" title="Ruber::Application#register_with_config (method)">#register_with_config</a></span> is called.</p>
<p>If a previous session is being restored, MainWindow#restore is called, otherwise
an empty document is created (unless the user specified some files or project
on the command line)</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 347</span>

<span class='kw'>def</span> <span class='id load_core_components'>load_core_components</span>
  <span class='kw'>begin</span>
    <span class='id current'>current</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>config</span><span class='tstring_end'>'</span></span>
    <span class='ivar'>@components</span><span class='period'>.</span><span class='id load_component'>load_component</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>config</span><span class='tstring_end'>'</span></span>
    <span class='id register_with_config'>register_with_config</span>
    <span class='qwords_beg'>%w[</span><span class='tstring_content'>documents</span><span class='words_sep'> </span><span class='tstring_content'>projects</span><span class='words_sep'> </span><span class='tstring_content'>main_window</span><span class='words_sep'>]</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span>
      <span class='id current'>current</span> <span class='op'>=</span> <span class='id i'>i</span>
      <span class='ivar'>@components</span><span class='period'>.</span><span class='id load_component'>load_component</span> <span class='id i'>i</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
    <span class='const'>ComponentLoadingErrorDialog</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id current'>current</span><span class='comma'>,</span> <span class='id e'>e</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='period'>.</span><span class='id exec'>exec</span>
    <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id application_terminated'>application_terminated</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id exit'>exit</span> <span class='int'>1</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id sessionRestored?'>sessionRestored?</span> <span class='kw'>then</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id restore'>restore</span> <span class='int'>1</span><span class='comma'>,</span> <span class='kw'>false</span>
  <span class='kw'>else</span>
    <span class='id open_command_line_files'>open_command_line_files</span>
    <span class='kw'>if</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:projects</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id projects'>projects</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='kw'>and</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:documents</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id documents'>documents</span><span class='period'>.</span><span class='id empty?'>empty?</span>
      <span class='id doc'>doc</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:documents</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id new_document'>new_document</span>
      <span class='comment'># This is the default document. Set the default_document attribute of
</span>      <span class='comment'># the ruber_default_document extension to true
</span>      <span class='comment'># TODO this extension is currently provided by the main window because
</span>      <span class='comment'># the application component is actually loaded after the other. This
</span>      <span class='comment'># is wrong. To avoid it, don't call load_core_components from initialize
</span>      <span class='comment'># but have the ruber starting code (in bin/ruber) start it manually. Then
</span>      <span class='comment'># move the extension to the application
</span>      <span class='id doc'>doc</span><span class='period'>.</span><span class='id extension'>extension</span><span class='lparen'>(</span><span class='symbol'>:ruber_default_document</span><span class='rparen'>)</span><span class='period'>.</span><span class='id default_document'>default_document</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id display_doc'>display_doc</span> <span class='id doc'>doc</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="load_settings-instance_method">
  
    - (<tt>nil</tt>) <strong>load_settings</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Override of <span class='object_link'><a href="PluginLike.html#load_settings-instance_method" title="Ruber::PluginLike#load_settings (method)">PluginLike#load_settings</a></span></p>
<p>It reads the list of plugin directories from the configuration object, replacing
all mentions of the installation paths for a different version of Ruber with the
installation path for the current version, and adds to the load path all missing
directories</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248
249
250
251
252
253
254
255
256
257
258</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 246</span>

<span class='kw'>def</span> <span class='id load_settings'>load_settings</span>
  <span class='ivar'>@plugin_dirs</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:general</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id plugin_dirs'>plugin_dirs</span>
  <span class='id ruber_base_dir'>ruber_base_dir</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id dirname'>dirname</span><span class='lparen'>(</span><span class='const'>RUBER_DIR</span><span class='rparen'>)</span>
  <span class='ivar'>@plugin_dirs</span><span class='period'>.</span><span class='id map!'>map!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id d'>d</span><span class='op'>|</span> 
    <span class='kw'>if</span> <span class='id d'>d</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='const'>File</span><span class='period'>.</span><span class='id join'>join</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id quote'>quote</span><span class='lparen'>(</span><span class='id ruber_base_dir'>ruber_base_dir</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ruber-\d+\.\d+\.\d+</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='regexp_end'>/</span></span>
      <span class='const'>RUBER_PLUGIN_DIR</span>
    <span class='kw'>else</span> <span class='id d'>d</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id new_dirs'>new_dirs</span> <span class='op'>=</span> <span class='ivar'>@plugin_dirs</span> <span class='op'>-</span> <span class='gvar'>$:</span>
  <span class='id new_dirs'>new_dirs</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id d'>d</span><span class='op'>|</span> <span class='gvar'>$:</span><span class='period'>.</span><span class='id unshift'>unshift</span> <span class='id d'>d</span><span class='rbrace'>}</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>load_settings()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="open_command_line_files-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>open_command_line_files</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Opens the files and/or project listed on the command line</p>
If neither files nor projects have been specified on the command line,
a single empty document is created.
@return [nil]

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


405
406
407
408
409
410
411
412
413
414
415
416
417
418
419</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 405</span>

<span class='kw'>def</span> <span class='id open_command_line_files'>open_command_line_files</span>
  <span class='id urls'>urls</span> <span class='op'>=</span> <span class='ivar'>@cmd_line_options</span><span class='period'>.</span><span class='id urls'>urls</span>
  <span class='id win'>win</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span>
  <span class='id projects'>projects</span><span class='comma'>,</span> <span class='id files'>files</span> <span class='op'>=</span> <span class='id urls'>urls</span><span class='period'>.</span><span class='id partition'>partition</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id u'>u</span><span class='op'>|</span> <span class='const'>File</span><span class='period'>.</span><span class='id extname'>extname</span><span class='lparen'>(</span><span class='id u'>u</span><span class='period'>.</span><span class='id to_local_file'>to_local_file</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>.ruprj</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span>
  <span class='id prj'>prj</span> <span class='op'>=</span> <span class='id win'>win</span><span class='period'>.</span><span class='id safe_open_project'>safe_open_project</span> <span class='id projects'>projects</span><span class='period'>.</span><span class='id last'>last</span><span class='period'>.</span><span class='id to_local_file'>to_local_file</span> <span class='kw'>unless</span> <span class='id projects'>projects</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  <span class='id files'>files</span> <span class='op'>+=</span> <span class='ivar'>@cmd_line_options</span><span class='period'>.</span><span class='id getOptionList'>getOptionList</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>file</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span>
    <span class='id url'>url</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Url</span><span class='period'>.</span><span class='id new'>new</span> <span class='id f'>f</span>
    <span class='id url'>url</span><span class='period'>.</span><span class='id path'>path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id expand_path'>expand_path</span><span class='lparen'>(</span><span class='id f'>f</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id url'>url</span><span class='period'>.</span><span class='id protocol'>protocol</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id url'>url</span>
  <span class='kw'>end</span>
  <span class='id files'>files</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span> 
    <span class='id win'>win</span><span class='period'>.</span><span class='id display_document'>display_document</span> <span class='id f'>f</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="plugin_directories-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>plugin_directories</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='plugin_dirs-instance_method'>plugin_dirs</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>A list of the directories where Ruber looks for plugins</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>a list of the directories where Ruber looks for plugins</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 125</span>

<span class='kw'>def</span> <span class='id plugin_directories'>plugin_directories</span>
  <span class='ivar'>@plugin_dirs</span><span class='period'>.</span><span class='id dup'>dup</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="plugin_directories=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>plugin_directories=</strong>(dirs) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='plugin_dirs=-instance_method'>plugin_dirs=</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>Sets the list of directories where Ruber looks for plugins</p>
<p>This also changes the setting in the global configuration object, but it <strong>doesn&#8217;t</strong>
write the change to file. It&#8217;s up to whoever called this method to do so.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt; dirs</tt>)</span>
      
      
        <span class='name'>the</span>
      
      
      
        &mdash;
        <div class='inline'><p>directories Ruber should search for plugins</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 138</span>

<span class='kw'>def</span> <span class='id plugin_directories='>plugin_directories=</span> <span class='id dirs'>dirs</span>
  <span class='ivar'>@plugin_directories</span> <span class='op'>=</span> <span class='id dirs'>dirs</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:general</span><span class='comma'>,</span> <span class='symbol'>:plugin_dirs</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@plugin_directories</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="quit_ruber-instance_method">
  
    - (<tt>nil</tt>) <strong>quit_ruber</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Quits ruber</p>
<p>Sets the application status to <code>:quitting</code> and calls <span class='object_link'><a href="ComponentManager.html#shutdown-instance_method" title="Ruber::ComponentManager#shutdown (method)">ComponentManager#shutdown</a></span></p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


150
151
152
153
154</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 150</span>

<span class='kw'>def</span> <span class='id quit_ruber'>quit_ruber</span>
  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='symbol'>:quitting</span>
  <span class='ivar'>@components</span><span class='period'>.</span><span class='id shutdown'>shutdown</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="quitting?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>quitting?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Whether the application is quitting or not</p>
<p>otherwise</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p><strong>true</strong> if the application status is <code>quitting</code> and <strong>false</strong></p></div>
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#status-instance_method" title="Ruber::Application#status (method)">#status</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 189</span>

<span class='kw'>def</span> <span class='id quitting?'>quitting?</span>
  <span class='ivar'>@status</span> <span class='op'>==</span> <span class='symbol'>:quitting</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="register_with_config-instance_method">
  
    - (<tt>nil</tt>) <strong>register_with_config</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Registers the configuration options with the configuration manager</p>
<p>This means, calling <span class='object_link'><a href="#load_settings-instance_method" title="Ruber::Application#load_settings (method)">#load_settings</a></span> and connecting to the configuration manager&#8217;s
settings_changedsignal.</p>
<p>This tasks are usually performed by <span class='object_link'><a href="PluginLike.html#initialize_plugin-instance_method" title="Ruber::PluginLike#initialize_plugin (method)">PluginLike#initialize_plugin</a></span>,
but as the config manager didn&#8217;t exist when that method was called,  it is
necessary to to them later</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


390
391
392
393
394
395
396</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 390</span>

<span class='kw'>def</span> <span class='id register_with_config'>register_with_config</span>
  <span class='id config'>config</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span>
  <span class='ivar'>@plugin_description</span><span class='period'>.</span><span class='id config_options'>config_options</span><span class='period'>.</span><span class='id each_value'>each_value</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id o'>o</span><span class='op'>|</span> <span class='id config'>config</span><span class='period'>.</span><span class='id add_option'>add_option</span> <span class='id o'>o</span><span class='rbrace'>}</span>
  <span class='id load_settings'>load_settings</span>
  <span class='id connect'>connect</span> <span class='id config'>config</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='symbol'>:settings_changed</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:load_settings</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="running?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>running?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Whether the application is running or not</p>
<p>otherwise</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p><strong>true</strong> if the application status is <code>running</code> and <strong>false</strong></p></div>
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#status-instance_method" title="Ruber::Application#status (method)">#status</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 178</span>

<span class='kw'>def</span> <span class='id running?'>running?</span>
  <span class='ivar'>@status</span> <span class='op'>==</span> <span class='symbol'>:running</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="safe_load_plugins-instance_method">
  
    - (<tt>Boolen</tt>) <strong>safe_load_plugins</strong>(plugins, silent = false, dirs = nil) {|pso, ex| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Loads plugins handling the exceptions they may raise in the meanwhile</p>
<p>It is a wrapper around <span class='object_link'><a href="ComponentManager.html#load_plugins-instance_method" title="Ruber::ComponentManager#load_plugins (method)">ComponentManager#load_plugins</a></span>.</p>
<p>If it&#8217;s given a block, it simply calls <span class='object_link'><a href="ComponentManager.html#load_plugins-instance_method" title="Ruber::ComponentManager#load_plugins (method)">ComponentManager#load_plugins</a></span> passing
it the block.</p>
<p>If no block is given, the behaviour in case of an exception depends on the <em>silent</em>
argument:</p>
<ul>
	<li>if <strong>true</strong>, then the error will be silently ignored and the component manager will
  go on loading the remaining plugins. Errors caused by those will be ignored as
  well</li>
	<li>if <strong>false</strong>, the user will be shown a <span class='object_link'><a href="ComponentLoadingErrorDialog.html" title="Ruber::ComponentLoadingErrorDialog (class)">ComponentLoadingErrorDialog</a></span>. According
  to what the user chooses in the dialog, the component manager will behave in
  a different way, as described in <span class='object_link'><a href="ComponentManager.html#load_plugins-instance_method" title="Ruber::ComponentManager#load_plugins (method)">ComponentManager#load_plugins</a></span></li>
</ul>
<p><strong>Note:</strong> this method doesn&#8217;t attempt to handle exceptions raised while computing
or sorting dependencies.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Symbol.html" title="Symbol (class)">Symbol</a></span>&gt;</tt>)</span>
      
      
        <span class='name'>plugins</span>
      
      
      
        &mdash;
        <div class='inline'><p>the names of the plugins to load. It doesn&#8217;t need
to include dependencies, as they&#8217;re computed automatically</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <span class='name'>silent</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>whether errors while loading plugins should be silently
ignored or not</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>, <tt>nil</tt>)</span>
      
      
        <span class='name'>dirs</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the directories where to look for plugins. If <strong>nil</strong>,
then the value returned by <span class='object_link'><a href="#plugin_directories-instance_method" title="Ruber::Application#plugin_directories (method)">#plugin_directories</a></span> will be used</p></div>
      
    </li>
  
</ul>
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
        <span class='type'>(<tt>pso</tt>, <tt>ex</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>block called when loading a plugin raises an exception</p></div>
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="PluginSpecification.html" title="Ruber::PluginSpecification (class)">PluginSpecification</a></span></tt>)</span>
      
      
        <span class='name'>pso</span>
      
      
      
        &mdash;
        <div class='inline'><p>the plugin specification object associated
with the plugin which raised the exception</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Exception</tt>)</span>
      
      
        <span class='name'>ex</span>
      
      
      
        &mdash;
        <div class='inline'><p>the exception raised while loading the plugin</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolen</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p><strong>true</strong> if the plugins were loaded successfully and <strong>false</strong> otherwise</p></div>
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="ComponentManager.html#load_plugins-instance_method" title="Ruber::ComponentManager#load_plugins (method)">ComponentManager#load_plugins</a></span></li>
    
      <li><span class='object_link'><a href="ComponentLoadingErrorDialog.html" title="Ruber::ComponentLoadingErrorDialog (class)">ComponentLoadingErrorDialog</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


226
227
228
229
230
231
232
233</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 226</span>

<span class='kw'>def</span> <span class='id safe_load_plugins'>safe_load_plugins</span> <span class='id plugins'>plugins</span><span class='comma'>,</span> <span class='id silent'>silent</span> <span class='op'>=</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id dirs'>dirs</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id blk'>blk</span>
  <span class='kw'>if</span> <span class='id blk'>blk</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='kw'>and</span> <span class='id silent'>silent</span> <span class='kw'>then</span> <span class='id blk'>blk</span> <span class='op'>=</span> <span class='id proc'>proc</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id _pl'>_pl</span><span class='comma'>,</span> <span class='id _e'>_e</span><span class='op'>|</span> <span class='symbol'>:silent</span><span class='rbrace'>}</span>
  <span class='kw'>elsif</span> <span class='id blk'>blk</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='id blk'>blk</span> <span class='op'>=</span> <span class='const'>Proc</span><span class='period'>.</span><span class='id new'>new</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id pl'>pl</span><span class='comma'>,</span> <span class='id e'>e</span><span class='op'>|</span> <span class='const'>ComponentLoadingErrorDialog</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id pl'>pl</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id e'>e</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span><span class='period'>.</span><span class='id exec'>exec</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='ivar'>@components</span><span class='period'>.</span><span class='id load_plugins'>load_plugins</span> <span class='id plugins'>plugins</span><span class='comma'>,</span> <span class='id dirs'>dirs</span> <span class='op'>||</span> <span class='ivar'>@plugin_dirs</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id blk'>blk</span>
  
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="setup-instance_method">
  
    - (<tt>nil</tt>) <strong>setup</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Prepares the application for running</p>
<p>It loads the plugins chosen by the user according to the configuration file. If
an error occurs while finding plugin dependencies (either because of a missing
dependency or a circular dependency), the user is shown a dialog asking what to
do (quit ruber or load no plugin). If an exception is raised while loading a plugin,
it&#8217;s handled according to the behaviour specified in <span class='object_link'><a href="#safe_load_plugins-instance_method" title="Ruber::Application#safe_load_plugins (method)">#safe_load_plugins</a></span> with no
block given.</p>
<p>It also takes care of the command line options, opening the files and projects
specified in it.</p>
<p>At the end, the main window is shown</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 276</span>

<span class='kw'>def</span> <span class='id setup'>setup</span>
  <span class='comment'># Create $KDEHOME/share/apps/ruber/plugins if it's missing
</span>  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id mkdir_p'>mkdir_p</span> <span class='const'>DEFAULT_PLUGIN_PATHS</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='id chosen_plugins'>chosen_plugins</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:general</span><span class='comma'>,</span> <span class='symbol'>:plugins</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_sym</span><span class='rparen'>)</span>
  <span class='id needed_plugins'>needed_plugins</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id deps_problem_msg'>deps_problem_msg</span> <span class='op'>=</span> <span class='const'>Proc</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id e'>e</span><span class='op'>|</span>
    <span class='heredoc_beg'>&lt;&lt;-EOS</span><span class='tstring_content'>    The following errors have occurred while attempting to resolve the dependencies among plugins you chose:
</span><span class='tstring_content'>    </span><span class='embexpr_beg'>#{</span><span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span><span class='rbrace'>}</span>
<span class='tstring_content'>
    
    Ruber will start with no plugin loaded. Please, use the Choose Plugins menu entry in the Settings menu to solve the issue.
</span><span class='heredoc_end'>    EOS
</span>  <span class='kw'>end</span>
  <span class='kw'>begin</span> 
    <span class='id availlable_plugins'>availlable_plugins</span> <span class='op'>=</span> <span class='const'>ComponentManager</span><span class='period'>.</span><span class='id find_plugins'>find_plugins</span> <span class='ivar'>@plugin_dirs</span><span class='comma'>,</span> <span class='kw'>true</span>
    <span class='id chosen_data'>chosen_data</span> <span class='op'>=</span> <span class='id chosen_plugins'>chosen_plugins</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id availlable_plugins'>availlable_plugins</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id compact'>compact</span>
    <span class='id found'>found</span> <span class='op'>=</span> <span class='id chosen_data'>chosen_data</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id i'>i</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='id found'>found</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>!=</span> <span class='id chosen_plugins'>chosen_plugins</span><span class='period'>.</span><span class='id size'>size</span>
      <span class='id missing'>missing</span> <span class='op'>=</span> <span class='id chosen_plugins'>chosen_plugins</span> <span class='op'>-</span> <span class='id found'>found</span>
      <span class='id question'>question</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-EOS</span><span class='tstring_content'>Ruber couldn't find some plugins it has been configured to automatically load at startup. They are:
</span><span class='embexpr_beg'>#{</span><span class='id missing'>missing</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span>
<span class='tstring_content'>
Do you want to start the application without them or to quit Ruber?
</span><span class='heredoc_end'>      EOS
</span>      <span class='id ans'>ans</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>MessageBox</span><span class='period'>.</span><span class='id question_yes_no'>question_yes_no</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id question'>question</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Missing plugins</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
          <span class='const'>KDE</span><span class='op'>::</span><span class='const'>GuiItem</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Start Ruber</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>GuiItem</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Quit</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
      <span class='id exit'>exit</span> <span class='kw'>if</span> <span class='id ans'>ans</span> <span class='op'>==</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>MessageBox</span><span class='op'>::</span><span class='const'>No</span>
      <span class='id chosen_plugins'>chosen_plugins</span> <span class='op'>=</span> <span class='id found'>found</span>
    <span class='kw'>end</span>
    <span class='id needed_plugins'>needed_plugins</span> <span class='op'>=</span> <span class='const'>ComponentManager</span><span class='period'>.</span><span class='id fill_dependencies'>fill_dependencies</span> <span class='id chosen_data'>chosen_data</span><span class='comma'>,</span> <span class='id availlable_plugins'>availlable_plugins</span><span class='period'>.</span><span class='id values'>values</span>
  <span class='kw'>rescue</span> <span class='const'>ComponentManager</span><span class='op'>::</span><span class='const'>DependencyError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
    <span class='const'>KDE</span><span class='op'>::</span><span class='const'>MessageBox</span><span class='period'>.</span><span class='id sorry'>sorry</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id deps_problem_msg'>deps_problem_msg</span><span class='period'>.</span><span class='id call'>call</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id plugins'>plugins</span> <span class='op'>=</span> <span class='id chosen_plugins'>chosen_plugins</span> <span class='op'>+</span> <span class='id needed_plugins'>needed_plugins</span>
  <span class='kw'>begin</span> 
    <span class='id res'>res</span> <span class='op'>=</span> <span class='id safe_load_plugins'>safe_load_plugins</span><span class='lparen'>(</span><span class='id plugins'>plugins</span><span class='rparen'>)</span> 
    <span class='kw'>unless</span> <span class='id res'>res</span>
      <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Internal</span><span class='period'>.</span><span class='id application_terminated'>application_terminated</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id exit'>exit</span> <span class='int'>1</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>ComponentManager</span><span class='op'>::</span><span class='const'>DependencyError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
    <span class='const'>KDE</span><span class='op'>::</span><span class='const'>MessageBox</span><span class='period'>.</span><span class='id error'>error</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id deps_problem_msg'>deps_problem_msg</span><span class='period'>.</span><span class='id call'>call</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id sessionRestored?'>sessionRestored?</span>
    <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:components</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id restore_session'>restore_session</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id last_session_data'>last_session_data</span>
  <span class='kw'>end</span>
  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='symbol'>:running</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id show'>show</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>setup()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="starting?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>starting?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Whether the application is starting or has already started</p>
<p>You should seldom need this method. It&#8217;s mostly useful for plugins which need to
erform different actions depending on whether they&#8217;re loaded at application
startup (in which case it&#8217;ll return <strong>true</strong>) or later (when it&#8217;ll return <strong>false</strong>)</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p><strong>true</strong> if the application status is <code>starting</code> and <strong>false</strong>
otherwise</p></div>
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><span class='object_link'><a href="#status-instance_method" title="Ruber::Application#status (method)">#status</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/application/application.rb', line 167</span>

<span class='kw'>def</span> <span class='id starting?'>starting?</span>
  <span class='ivar'>@status</span> <span class='op'>==</span> <span class='symbol'>:starting</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>



</div>
    
    <div id="footer">
  Generated on Mon Feb  7 15:09:09 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.4 (ruby-1.9.2).
</div>

  </body>
</html>