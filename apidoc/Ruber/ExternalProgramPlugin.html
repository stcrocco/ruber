<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Ruber::ExternalProgramPlugin</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (E)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Ruber.html" title="Ruber (module)">Ruber</a></span></span>
     &raquo; 
    <span class="title">ExternalProgramPlugin</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Ruber::ExternalProgramPlugin
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="GuiPlugin.html" title="Ruber::GuiPlugin (class)">GuiPlugin</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="Plugin.html" title="Ruber::Plugin (class)">Plugin</a></span></li>
          
            <li class="next"><span class='object_link'><a href="GuiPlugin.html" title="Ruber::GuiPlugin (class)">GuiPlugin</a></span></li>
          
            <li class="next">Ruber::ExternalProgramPlugin</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/ruber/external_program_plugin.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Base class for plugins whose main task is to run an external program and maybe
(not necessarily) to display the output in a tool widget.</p>
<p>Basically, this class is a wrapper for <tt><span class="caps">KDE</span>::Process</tt> providing a more
integrated <span class="caps">API</span> for the most common functions. In particular, it provides the 
following functionality:</p>
<ul>
	<li>automatic creation of the process</li>
	<li>automatic cleanup at shutdown</li>
	<li>automatic managing of buffered output</li>
	<li>nicer <span class="caps">API</span> to read from standard output and standard error</li>
	<li>simplified <span class="caps">API</span> to start the process</li>
	<li>automatic display of standard output and standard error in a tool widget (if required)</li>
	<li>display of the command line and of the process status in a tool widget (if required)</li>
</ul>
<p>To start the process, you simply call the <tt>run_process</tt> method, passing it
the name of the program to run, the working directory and the arguments.</p>
<p>When the process emits the <tt>readyReadStandardOutput()</tt> or the
<tt>readyReadStandardError()</tt>, the contents of the appropriate stream are read
and split into lines. The resulting array are passed to the <tt>process_standard_output</tt>
or <tt>process_standard_error</tt> method. Derived classes can override these methods
to do what they want with the output.</p>
<p>In general, you can&#8217;t be sure whether the data contained read from standard output
or error contains complete lines. To deal with this issue, whenob reading from a
stream, only full lines (that is, lines which end in &#8220;\n&#8221;) are passed to
<tt>process_standard_output</tt> or <tt>process_standard_error</tt>. If the last
line isn&#8217;t complete, it is stored in a buffer. The next time characters are read
from the process, if they came from the same channel, the buffer is added at the
beginning of the new stream; if they came from the other channel, they&#8217;re passed
to the appropriate <tt>process_standard_*</tt> method. This behaviour can be
changed by passing the appropriate arguments to the constructor.</p>
<p>Some methods in this class have the ability to insert data in a OutputWidget. They
will do so if the <tt><code>output_widget&lt;/tt&gt; instance variable (which is created in
the constructor, if it doesn't already exist) is not *nil*. Note that those methods
don't check if &lt;tt&gt;</code>output_widget</tt> actually is an OutputWidget or not. If it
is something else, you&#8217;ll get errors. In all the following documentation it is
assumed that:</p>
<ul>
	<li>the expression <i>the output widget</i> refers to the object the <tt>@output_widget</tt>
  instance variable refers to, unless it&#8217;s <strong>nil</strong></li>
	<li>everything concerning the output widget will be ignored (without giving any error)
  if the output widget doesn&#8217;t exist</li>
</ul>
<p>=Signals
=<tt>process_finished(int code, QString reason)</tt>
Signal emitted when the process finishes. _code_ is the exit code of the process,
while _reason_ is a string which can have one of the values "killed", "crash" or
be empty. If it's empty, it means that the program finished normally; "killed"
means that it was killed by the user and "crash" means that the program crashed.
=<tt>process_started()</tt>
Signal emitted when the process has started
=<tt>process_failed_to_start()</tt>
Signal emitted if the process couldn't be started (for example, because the given
program doesn't exist)
=Slots</p>
<ul>
	<li><tt>slot_process_finished(int, QProcess::ExitStatus)</tt></li>
	<li><tt>stop_process()</tt></li>
</ul>

  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="FindInFiles/FindInFilesPlugin.html" title="Ruber::FindInFiles::FindInFilesPlugin (class)">FindInFiles::FindInFilesPlugin</a></span>, <span class='object_link'><a href="RubyRunner/RubyRunnerPluginInternal.html" title="Ruber::RubyRunner::RubyRunnerPluginInternal (class)">RubyRunner::RubyRunnerPluginInternal</a></span></p>
</div>

  <h2>Constant Summary</h2>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Constants inherited from <span class='object_link'><a href="Plugin.html" title="Ruber::Plugin (class)">Plugin</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Plugin.html#LICENSES-constant" title="Ruber::Plugin::LICENSES (constant)">LICENSES</a></span></p>

  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#process-instance_method" title="#process (instance method)">- (Object) <strong>process</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The <tt><span class="caps">KDE</span>::Process</tt> used by the plugin.</p></div></span>
  
</li>

    
  </ul>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#display_exit_message-instance_method" title="#display_exit_message (instance method)">- (Object) <strong>display_exit_message</strong>(code, reason) </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Displays a message in the output widget describing the exit status of the program.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#do_stderr-instance_method" title="#do_stderr (instance method)">- (Object) <strong>do_stderr</strong>(str) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Pre-processes the string <em>str</em> then passes the resulting array to <tt>process_standard_error</tt>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#do_stdout-instance_method" title="#do_stdout (instance method)">- (Object) <strong>do_stdout</strong>(str) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Pre-processes the string <em>str</em> then passes the resulting array to <tt>process_standard_output</tt>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#failed_to_start-instance_method" title="#failed_to_start (instance method)">- (Object) <strong>failed_to_start</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Method called if the program fails to start (in response, but not connected to,
the process <tt>error(QProcess::ProcessError)</tt> signal if the argument is
<tt>Qt::Process::FailedToStart</tt>).</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (ExternalProgramPlugin) <strong>initialize</strong>(pdf, line_buffered = true) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new ExternalProgramPlugin.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#process_standard_error-instance_method" title="#process_standard_error (instance method)">- (nil) <strong>process_standard_error</strong>(lines) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Does something with the text written to standard error by the program.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#process_standard_output-instance_method" title="#process_standard_output (instance method)">- (nil) <strong>process_standard_output</strong>(lines) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Does something with the text written to standard output by the program.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#run_process-instance_method" title="#run_process (instance method)">- (Object) <strong>run_process</strong>(prog, dir, args, title = '') </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Starts the program.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#shutdown-instance_method" title="#shutdown (instance method)">- (Object) <strong>shutdown</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Prepares the plugin to be unloaded by killing the process (no signal will be emitted
from the process or the plugin from now on).</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#slot_process_finished-instance_method" title="#slot_process_finished (instance method)">- (Object) <strong>slot_process_finished</strong>(code, status) </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Slot called in response to the process&#8217; <tt>finished(int, QProcess::ExitStatus)</tt>
signal.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#stop_process-instance_method" title="#stop_process (instance method)">- (Object) <strong>stop_process</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Stops the process.</p></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="GuiPlugin.html" title="Ruber::GuiPlugin (class)">GuiPlugin</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="GuiPlugin.html#action_collection-instance_method" title="Ruber::GuiPlugin#action_collection (method)">#action_collection</a></span>, <span class='object_link'><a href="GuiPlugin.html#execute_action-instance_method" title="Ruber::GuiPlugin#execute_action (method)">#execute_action</a></span>, <span class='object_link'><a href="GuiPlugin.html#register_action_handler-instance_method" title="Ruber::GuiPlugin#register_action_handler (method)">#register_action_handler</a></span>, <span class='object_link'><a href="GuiPlugin.html#setup_actions-instance_method" title="Ruber::GuiPlugin#setup_actions (method)">#setup_actions</a></span>, <span class='object_link'><a href="GuiPlugin.html#unload-instance_method" title="Ruber::GuiPlugin#unload (method)">#unload</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Plugin.html" title="Ruber::Plugin (class)">Plugin</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Plugin.html#about_data-instance_method" title="Ruber::Plugin#about_data (method)">#about_data</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="PluginLike.html" title="Ruber::PluginLike (module)">PluginLike</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="PluginLike.html#add_extensions_to_project-instance_method" title="Ruber::PluginLike#add_extensions_to_project (method)">#add_extensions_to_project</a></span>, <span class='object_link'><a href="PluginLike.html#add_options_to_project-instance_method" title="Ruber::PluginLike#add_options_to_project (method)">#add_options_to_project</a></span>, <span class='object_link'><a href="PluginLike.html#add_widgets_to_project-instance_method" title="Ruber::PluginLike#add_widgets_to_project (method)">#add_widgets_to_project</a></span>, <span class='object_link'><a href="PluginLike.html#create_tool_widget-instance_method" title="Ruber::PluginLike#create_tool_widget (method)">#create_tool_widget</a></span>, <span class='object_link'><a href="PluginLike.html#delayed_initialize-instance_method" title="Ruber::PluginLike#delayed_initialize (method)">#delayed_initialize</a></span>, <span class='object_link'><a href="PluginLike.html#initialize_plugin-instance_method" title="Ruber::PluginLike#initialize_plugin (method)">#initialize_plugin</a></span>, <span class='object_link'><a href="PluginLike.html#load_settings-instance_method" title="Ruber::PluginLike#load_settings (method)">#load_settings</a></span>, <span class='object_link'><a href="PluginLike.html#plugin_name-instance_method" title="Ruber::PluginLike#plugin_name (method)">#plugin_name</a></span>, <span class='object_link'><a href="PluginLike.html#query_close-instance_method" title="Ruber::PluginLike#query_close (method)">#query_close</a></span>, <span class='object_link'><a href="PluginLike.html#register_options-instance_method" title="Ruber::PluginLike#register_options (method)">#register_options</a></span>, <span class='object_link'><a href="PluginLike.html#register_with_project-instance_method" title="Ruber::PluginLike#register_with_project (method)">#register_with_project</a></span>, <span class='object_link'><a href="PluginLike.html#remove_extensions_from_project-instance_method" title="Ruber::PluginLike#remove_extensions_from_project (method)">#remove_extensions_from_project</a></span>, <span class='object_link'><a href="PluginLike.html#remove_from_project-instance_method" title="Ruber::PluginLike#remove_from_project (method)">#remove_from_project</a></span>, <span class='object_link'><a href="PluginLike.html#remove_options_from_project-instance_method" title="Ruber::PluginLike#remove_options_from_project (method)">#remove_options_from_project</a></span>, <span class='object_link'><a href="PluginLike.html#remove_widgets_from_project-instance_method" title="Ruber::PluginLike#remove_widgets_from_project (method)">#remove_widgets_from_project</a></span>, <span class='object_link'><a href="PluginLike.html#restore_session-instance_method" title="Ruber::PluginLike#restore_session (method)">#restore_session</a></span>, <span class='object_link'><a href="PluginLike.html#save_settings-instance_method" title="Ruber::PluginLike#save_settings (method)">#save_settings</a></span>, <span class='object_link'><a href="PluginLike.html#session_data-instance_method" title="Ruber::PluginLike#session_data (method)">#session_data</a></span>, <span class='object_link'><a href="PluginLike.html#setup_action-instance_method" title="Ruber::PluginLike#setup_action (method)">#setup_action</a></span>, <span class='object_link'><a href="PluginLike.html#setup_actions-instance_method" title="Ruber::PluginLike#setup_actions (method)">#setup_actions</a></span>, <span class='object_link'><a href="PluginLike.html#unload-instance_method" title="Ruber::PluginLike#unload (method)">#unload</a></span>, <span class='object_link'><a href="PluginLike.html#update_project-instance_method" title="Ruber::PluginLike#update_project (method)">#update_project</a></span></p>


  <h2>Signal Summary</h2>
  <ul class="summary" >
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#process_finished-signalcode" title="process_finished (signalcode)">- <strong>process_finished</strong>(int arg1, QString arg2) </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#process_started-signalcode" title="process_started (signalcode)">- <strong>process_started</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#process_failed_to_start-signalcode" title="process_failed_to_start (signalcode)">- <strong>process_failed_to_start</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#process_finished-signalcode" title="process_finished (signalcode)">- <strong>process_finished</strong>(int arg1, QString arg2) </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#process_started-signalcode" title="process_started (signalcode)">- <strong>process_started</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#process_failed_to_start-signalcode" title="process_failed_to_start (signalcode)">- <strong>process_failed_to_start</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#process_finished-signalcode" title="process_finished (signalcode)">- <strong>process_finished</strong>(int arg1, QString arg2) </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#process_started-signalcode" title="process_started (signalcode)">- <strong>process_started</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#process_failed_to_start-signalcode" title="process_failed_to_start (signalcode)">- <strong>process_failed_to_start</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
  </ul>





<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Ruber::ExternalProgramPlugin (class)">ExternalProgramPlugin</a></span></tt>) <strong>initialize</strong>(pdf, line_buffered = true) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates a new ExternalProgramPlugin.</p>
<p><em>pdf</em> is the plugin info object for the plugin. If <i>line_buffered</i> is <strong>false</strong>,
buffering won&#8217;t be used (all the characters read from the process will be passed
to <tt>process_standard_output</tt> or <tt>process_standard_error</tt> even if they
don&#8217;t end in a newline).</p>
<p><b>Note:</b> the process&#8217; channel mode will be set to <tt>Qt::Process::SeparateChannels</tt>.
You can set it to any value you want later</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/external_program_plugin.rb', line 108</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span> <span class='id pdf'>pdf</span><span class='comma'>,</span> <span class='id line_buffered'>line_buffered</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>super</span> <span class='id pdf'>pdf</span>
  <span class='ivar'>@buffer</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@buffer_content_channel</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@line_buffered</span> <span class='op'>=</span> <span class='id line_buffered'>line_buffered</span>
  <span class='ivar'>@output_widget</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='kw'>defined?</span> <span class='ivar'>@output_widget</span>
  <span class='ivar'>@process</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Process</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>self</span>
  <span class='ivar'>@process</span><span class='period'>.</span><span class='id process_channel_mode'>process_channel_mode</span> <span class='op'>=</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Process</span><span class='op'>::</span><span class='const'>SeparateChannels</span>
  <span class='ivar'>@process</span><span class='period'>.</span><span class='id output_channel_mode'>output_channel_mode</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Process</span><span class='op'>::</span><span class='const'>SeparateChannels</span>
  <span class='ivar'>@process</span><span class='period'>.</span><span class='id connect'>connect</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='symbol'>:readyReadStandardOutput</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id do_stdout'>do_stdout</span> <span class='ivar'>@process</span><span class='period'>.</span><span class='id read_all_standard_output'>read_all_standard_output</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='kw'>end</span>
  <span class='ivar'>@process</span><span class='period'>.</span><span class='id connect'>connect</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='symbol'>:readyReadStandardError</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id do_stderr'>do_stderr</span> <span class='ivar'>@process</span><span class='period'>.</span><span class='id read_all_standard_error'>read_all_standard_error</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='kw'>end</span>
  <span class='id connect'>connect</span> <span class='ivar'>@process</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>finished(int, QProcess::ExitStatus)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>slot_process_finished(int, QProcess::ExitStatus)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='id connect'>connect</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>process_finished(int, QString)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>display_exit_message(int, QString)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='ivar'>@process</span><span class='period'>.</span><span class='id connect'>connect</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>error(QProcess::ProcessError)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id e'>e</span><span class='op'>|</span>
    <span class='id failed_to_start'>failed_to_start</span> <span class='kw'>if</span> <span class='id e'>e</span> <span class='op'>==</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Process</span><span class='op'>::</span><span class='const'>FailedToStart</span>
  <span class='kw'>end</span>
  <span class='id connect'>connect</span> <span class='ivar'>@process</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>started()</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>process_started()</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="process-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="process-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>process</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The <tt><span class="caps">KDE</span>::Process</tt> used by the plugin</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/external_program_plugin.rb', line 95</span>

<span class='kw'>def</span> <span class='id process'>process</span>
  <span class='ivar'>@process</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="display_exit_message-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>display_exit_message</strong>(code, reason)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Displays a message in the output widget describing the exit status of the program.</p>
<p>The message (output type message) has the format <i>program_name</i> <i>message</i>,
where message is:</p>
<ul>
	<li><tt>exited normally</tt> if <em>reason</em> is an empty string</li>
	<li><tt>was killed</tt> if <em>reason</em> is &#8216;killed&#8217;</li>
	<li><tt>exited with code</tt> <em>code</em> if <em>reason</em> is &#8216;crash&#8217;</li>
</ul>
<p>This method is meant to be connected to the <tt>process_finished(int, QString)</tt>
signal. Its arguments match those of the signal.</p>
<p>If you want to change the message, override this method. If you don&#8217;t want any
message and the <tt>@output_widget</tt> instance variable is not <strong>nil</strong>, you can
either disconnect this slot from the <tt>process_finished(int, QString)</tt>
signal or override this method without calling <strong>super</strong></p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/external_program_plugin.rb', line 371</span>

<span class='kw'>def</span> <span class='id display_exit_message'>display_exit_message</span> <span class='id code'>code</span><span class='comma'>,</span> <span class='id reason'>reason</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@output_widget</span>
  <span class='id mod'>mod</span> <span class='op'>=</span> <span class='ivar'>@output_widget</span><span class='period'>.</span><span class='id model'>model</span>
  <span class='id rc'>rc</span> <span class='op'>=</span> <span class='id mod'>mod</span><span class='period'>.</span><span class='id row_count'>row_count</span>
  <span class='id mod'>mod</span><span class='period'>.</span><span class='id insert_row'>insert_row</span> <span class='id rc'>rc</span>
  <span class='id idx'>idx</span> <span class='op'>=</span> <span class='id mod'>mod</span><span class='period'>.</span><span class='id index'>index</span> <span class='id rc'>rc</span><span class='comma'>,</span> <span class='int'>0</span>
  <span class='id type'>type</span> <span class='op'>=</span> <span class='symbol'>:message</span>
  <span class='id text'>text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Process </span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>case</span> <span class='id reason'>reason</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
    <span class='kw'>if</span> <span class='id code'>code</span> <span class='op'>==</span> <span class='int'>0</span> <span class='kw'>then</span> <span class='id text'>text</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>exited normally</span><span class='tstring_end'>'</span></span>
    <span class='kw'>else</span> 
      <span class='id text'>text</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>exited with code </span><span class='embexpr_beg'>#{</span><span class='id code'>code</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id type'>type</span> <span class='op'>=</span> <span class='symbol'>:message_bad</span>
    <span class='kw'>end</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>killed</span><span class='tstring_end'>'</span></span> <span class='kw'>then</span> <span class='id text'>text</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>killed</span><span class='tstring_end'>'</span></span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>crash</span><span class='tstring_end'>'</span></span> 
    <span class='id text'>text</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>crashed with code </span><span class='embexpr_beg'>#{</span><span class='id code'>code</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id type'>type</span> <span class='op'>=</span> <span class='symbol'>:message_bad</span>
  <span class='kw'>end</span>
  <span class='id mod'>mod</span><span class='period'>.</span><span class='id set_data'>set_data</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id text'>text</span><span class='rparen'>)</span>
  <span class='ivar'>@output_widget</span><span class='period'>.</span><span class='id set_output_type'>set_output_type</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='id type'>type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>display_exit_message(int, QString)</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="do_stderr-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>do_stderr</strong>(str)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Pre-processes the string <em>str</em> then passes the resulting array to <tt>process_standard_error</tt>.</p>
<p>Pre-processing the string means:</p>
<ul>
	<li>splitting it into lines</li>
	<li>emptying the buffer (by passing its contents to <tt>process_standard_output</tt>
  if it refers to standard output or prepending it to <em>str</em> if it refers to standard
  error)</li>
	<li>putting the last line in the buffer if it doesn&#8217;t end in a newline.</li>
</ul>
<p>If the plugin is not buffered, then only the first step is done.</p>
<p><b>Note:</b> if <em>str</em> is empty, nothing will happen. If it consists only of newlines,
it will cause the buffer to be emptied (as described above) and nothing else.
<b>Note:</b> consecutive newlines will be treated as a single newline</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/external_program_plugin.rb', line 234</span>

<span class='kw'>def</span> <span class='id do_stderr'>do_stderr</span> <span class='id str'>str</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id str'>str</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  <span class='kw'>if</span> <span class='ivar'>@line_buffered</span> <span class='kw'>and</span> <span class='ivar'>@buffer</span>
    <span class='id buffer'>buffer</span> <span class='op'>=</span> <span class='ivar'>@buffer</span>
    <span class='id channel'>channel</span> <span class='op'>=</span> <span class='ivar'>@buffer_content_channel</span>
    <span class='ivar'>@buffer</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@buffer_content_channel</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>if</span> <span class='id channel'>channel</span> <span class='op'>==</span> <span class='symbol'>:stderr</span>
      <span class='id str'>str</span> <span class='op'>=</span> <span class='id buffer'>buffer</span> <span class='op'>+</span> <span class='id str'>str</span>
      <span class='kw'>return</span> <span class='id do_stderr'>do_stderr</span> <span class='id str'>str</span>
    <span class='kw'>else</span> <span class='id process_standard_output'>process_standard_output</span> <span class='lbracket'>[</span><span class='id buffer'>buffer</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id lines'>lines</span> <span class='op'>=</span> <span class='id str'>str</span><span class='period'>.</span><span class='id split_lines'>split_lines</span>
  <span class='kw'>if</span> <span class='ivar'>@line_buffered</span> <span class='kw'>and</span> <span class='op'>!</span><span class='id str'>str</span><span class='period'>.</span><span class='id end_with?'>end_with?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@buffer</span> <span class='op'>=</span> <span class='id lines'>lines</span><span class='period'>.</span><span class='id pop'>pop</span>
    <span class='ivar'>@buffer_content_channel</span> <span class='op'>=</span> <span class='symbol'>:stderr</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id lines'>lines</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  <span class='id process_standard_error'>process_standard_error</span> <span class='id lines'>lines</span> 
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_stdout-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>do_stdout</strong>(str)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Pre-processes the string <em>str</em> then passes the resulting array to <tt>process_standard_output</tt>.</p>
<p>Pre-processing the string means:</p>
<ul>
	<li>splitting it into lines</li>
	<li>emptying the buffer (by passing its contents to <tt>process_standard_error</tt>
  if it refers to standard error or prepending it to <em>str</em> if it refers to standard
  output)</li>
	<li>putting the last line in the buffer if it doesn&#8217;t end in a newline.</li>
</ul>
<p>If the plugin is not buffered, then only the first step is done.</p>
<p><b>Note:</b> if <em>str</em> is empty, nothing will happen. If it consists only of newlines,
it will cause the buffer to be emptied (as described above) and nothing else.
<b>Note:</b> consecutive newlines will be treated as a single newline</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/external_program_plugin.rb', line 196</span>

<span class='kw'>def</span> <span class='id do_stdout'>do_stdout</span> <span class='id str'>str</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id str'>str</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  <span class='kw'>if</span> <span class='ivar'>@line_buffered</span> <span class='kw'>and</span> <span class='ivar'>@buffer</span>
    <span class='id buffer'>buffer</span> <span class='op'>=</span> <span class='ivar'>@buffer</span>
    <span class='id channel'>channel</span> <span class='op'>=</span> <span class='ivar'>@buffer_content_channel</span>
    <span class='ivar'>@buffer</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@buffer_content_channel</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>if</span> <span class='id channel'>channel</span> <span class='op'>==</span> <span class='symbol'>:stdout</span>
      <span class='id str'>str</span> <span class='op'>=</span> <span class='id buffer'>buffer</span> <span class='op'>+</span> <span class='id str'>str</span>
      <span class='kw'>return</span> <span class='id do_stdout'>do_stdout</span> <span class='id str'>str</span>
    <span class='kw'>else</span> <span class='id process_standard_error'>process_standard_error</span> <span class='lbracket'>[</span><span class='id buffer'>buffer</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id lines'>lines</span> <span class='op'>=</span> <span class='id str'>str</span><span class='period'>.</span><span class='id split_lines'>split_lines</span>
  <span class='kw'>if</span> <span class='ivar'>@line_buffered</span> <span class='kw'>and</span> <span class='op'>!</span><span class='id str'>str</span><span class='period'>.</span><span class='id end_with?'>end_with?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@buffer</span> <span class='op'>=</span> <span class='id lines'>lines</span><span class='period'>.</span><span class='id pop'>pop</span>
    <span class='ivar'>@buffer_content_channel</span> <span class='op'>=</span> <span class='symbol'>:stdout</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id lines'>lines</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  <span class='id process_standard_output'>process_standard_output</span> <span class='id lines'>lines</span> 
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="failed_to_start-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>failed_to_start</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Method called if the program fails to start (in response, but not connected to,
the process <tt>error(QProcess::ProcessError)</tt> signal if the argument is
<tt>Qt::Process::FailedToStart</tt>).</p>
<p>It emits the <tt>process_failed_to_start()</tt> signal and displays an appropriate
message to the output widget (using the <tt>:error1</tt> output type).</p>
<p>If <tt>@output_widget</tt> is not <strong>nil</strong> but you don&#8217;t want the message to be
generated, you&#8217;ll need to override this method. If you do so, don&#8217;t forget to
emit the <tt>failed_to_start()</tt> signal.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


318
319
320
321
322
323
324
325
326
327
328
329
330
331</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/external_program_plugin.rb', line 318</span>

<span class='kw'>def</span> <span class='id failed_to_start'>failed_to_start</span>
  <span class='id emit'>emit</span> <span class='id process_failed_to_start'>process_failed_to_start</span> 
  <span class='kw'>if</span> <span class='ivar'>@output_widget</span>
    <span class='id mod'>mod</span> <span class='op'>=</span> <span class='ivar'>@output_widget</span><span class='period'>.</span><span class='id model'>model</span>
    <span class='id rc'>rc</span> <span class='op'>=</span> <span class='id mod'>mod</span><span class='period'>.</span><span class='id row_count'>row_count</span>
    <span class='id mod'>mod</span><span class='period'>.</span><span class='id insert_row'>insert_row</span> <span class='id rc'>rc</span>
    <span class='id cmd'>cmd</span> <span class='op'>=</span> <span class='ivar'>@process</span><span class='period'>.</span><span class='id program'>program</span>
    <span class='id cmd_line'>cmd_line</span> <span class='op'>=</span> <span class='id cmd'>cmd</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span>
    <span class='id prog'>prog</span> <span class='op'>=</span> <span class='id cmd'>cmd</span><span class='period'>.</span><span class='id shift'>shift</span>
    <span class='id idx'>idx</span> <span class='op'>=</span> <span class='id mod'>mod</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='id rc'>rc</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span>
    <span class='id mod'>mod</span><span class='period'>.</span><span class='id set_data'>set_data</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id prog'>prog</span><span class='rbrace'>}</span><span class='tstring_content'> failed to start. The command line was </span><span class='embexpr_beg'>#{</span><span class='id cmd_line'>cmd_line</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='ivar'>@output_widget</span><span class='period'>.</span><span class='id set_output_type'>set_output_type</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='symbol'>:error1</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="process_standard_error-instance_method">
  
    - (<tt>nil</tt>) <strong>process_standard_error</strong>(lines)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Does something with the text written to standard error by the program.</p>
<p>The base class implementation of this method inserts the text at the end of the
output widget in the first column (one item per line) and sets the output type
to <ins>:output</ins>. Nothing is done if the output widget doesn&#8217;t exist. Subclasses
can reimplement this method to do something else (in this case, you don&#8217;t usually
want to call <strong>super</strong>)</p>
<p><em>lines</em> is an array where each entry corresponds to a line of output from the
program. If buffering is on, each entry is a complete line (or should be considered
such). If buffering is off, you&#8217;ll have to take care of newlines by yourself.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
        <span class='name'>lines</span>
      
      
      
        &mdash;
        <div class='inline'><p>the lines on standard error</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


294
295
296
297
298
299
300
301
302
303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/external_program_plugin.rb', line 294</span>

<span class='kw'>def</span> <span class='id process_standard_error'>process_standard_error</span> <span class='id lines'>lines</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@output_widget</span>
  <span class='id mod'>mod</span> <span class='op'>=</span> <span class='ivar'>@output_widget</span><span class='period'>.</span><span class='id model'>model</span>
  <span class='id rc'>rc</span> <span class='op'>=</span> <span class='id mod'>mod</span><span class='period'>.</span><span class='id row_count'>row_count</span>
  <span class='id mod'>mod</span><span class='period'>.</span><span class='id insert_rows'>insert_rows</span> <span class='id rc'>rc</span><span class='comma'>,</span> <span class='id lines'>lines</span><span class='period'>.</span><span class='id size'>size</span>
  <span class='id lines'>lines</span><span class='period'>.</span><span class='id each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id l'>l</span><span class='comma'>,</span> <span class='id i'>i</span><span class='op'>|</span>
    <span class='id idx'>idx</span> <span class='op'>=</span> <span class='id mod'>mod</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='id i'>i</span> <span class='op'>+</span> <span class='id rc'>rc</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span>
    <span class='id mod'>mod</span><span class='period'>.</span><span class='id set_data'>set_data</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id l'>l</span><span class='rparen'>)</span>
    <span class='ivar'>@output_widget</span><span class='period'>.</span><span class='id set_output_type'>set_output_type</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='symbol'>:error</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="process_standard_output-instance_method">
  
    - (<tt>nil</tt>) <strong>process_standard_output</strong>(lines)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Does something with the text written to standard output by the program.</p>
<p>The base class implementation of this method inserts the text at the end of the
output widget in the first column (one item per line) and sets the output type
to <ins>:output</ins>. Nothing is done if the output widget doesn&#8217;t exist. Subclasses
can reimplement this method to do something else (in this case, you don&#8217;t usually
want to call <strong>super</strong>)</p>
<p><em>lines</em> is an array where each entry corresponds to a line of output from the
program. If buffering is on, each entry is a complete line (or should be considered
such). If buffering is off, you&#8217;ll have to take care of newlines by yourself.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
        <span class='name'>lines</span>
      
      
      
        &mdash;
        <div class='inline'><p>the output lines</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271
272
273
274
275
276
277
278
279
280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/external_program_plugin.rb', line 269</span>

<span class='kw'>def</span> <span class='id process_standard_output'>process_standard_output</span> <span class='id lines'>lines</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@output_widget</span>
  <span class='id mod'>mod</span> <span class='op'>=</span> <span class='ivar'>@output_widget</span><span class='period'>.</span><span class='id model'>model</span>
  <span class='id rc'>rc</span> <span class='op'>=</span> <span class='id mod'>mod</span><span class='period'>.</span><span class='id row_count'>row_count</span>
  <span class='id mod'>mod</span><span class='period'>.</span><span class='id insert_rows'>insert_rows</span> <span class='id rc'>rc</span><span class='comma'>,</span> <span class='id lines'>lines</span><span class='period'>.</span><span class='id size'>size</span>
  <span class='id lines'>lines</span><span class='period'>.</span><span class='id each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id l'>l</span><span class='comma'>,</span> <span class='id i'>i</span><span class='op'>|</span>
    <span class='id idx'>idx</span> <span class='op'>=</span> <span class='id mod'>mod</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='id i'>i</span> <span class='op'>+</span> <span class='id rc'>rc</span><span class='comma'>,</span> <span class='int'>0</span><span class='rparen'>)</span>
    <span class='id mod'>mod</span><span class='period'>.</span><span class='id set_data'>set_data</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id l'>l</span><span class='rparen'>)</span>
    <span class='ivar'>@output_widget</span><span class='period'>.</span><span class='id set_output_type'>set_output_type</span> <span class='id idx'>idx</span><span class='comma'>,</span> <span class='symbol'>:output</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="run_process-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>run_process</strong>(prog, dir, args, title = '') 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Starts the program.</p>
<p><em>prog</em> is the name of the program (you don&#8217;t need to specify the absolute path
if it&#8217;s in <span class="caps">PATH</span>). <em>args</em> is an array containing the arguments. <em>dir</em> is the working
directory.</p>
<p><em>title</em> is the string to display in the output widget. If it is an empty string, the name
of the program followed by its arguments will be used. If it is <strong>nil</strong> or <strong>false</strong>,
the title won&#8217;t be set.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144
145
146
147
148
149
150
151
152
153
154</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/external_program_plugin.rb', line 142</span>

<span class='kw'>def</span> <span class='id run_process'>run_process</span> <span class='id prog'>prog</span><span class='comma'>,</span> <span class='id dir'>dir</span><span class='comma'>,</span> <span class='id args'>args</span><span class='comma'>,</span> <span class='id title'>title</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='ivar'>@buffer</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@buffer_content_channel</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@process</span><span class='period'>.</span><span class='id clear_program'>clear_program</span>
  <span class='ivar'>@process</span><span class='period'>.</span><span class='id working_directory'>working_directory</span> <span class='op'>=</span> <span class='id dir'>dir</span>
  <span class='id program'>program</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id prog'>prog</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id args'>args</span>
  <span class='ivar'>@process</span><span class='period'>.</span><span class='id program'>program</span> <span class='op'>=</span> <span class='id program'>program</span>
  <span class='kw'>if</span> <span class='ivar'>@output_widget</span> <span class='kw'>and</span> <span class='id title'>title</span>
    <span class='id title'>title</span> <span class='op'>=</span> <span class='id program'>program</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='id title'>title</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='ivar'>@output_widget</span><span class='period'>.</span><span class='id title'>title</span> <span class='op'>=</span> <span class='id title'>title</span>
  <span class='kw'>end</span>
  <span class='ivar'>@process</span><span class='period'>.</span><span class='id start'>start</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="shutdown-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>shutdown</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Prepares the plugin to be unloaded by killing the process (no signal will be emitted
from the process or the plugin from now on).</p>
<p>If you reimplement this method, don&#8217;t forget to call <strong>super</strong>. If you don&#8217;t you
might cause a crash when Ruber is closed</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/external_program_plugin.rb', line 172</span>

<span class='kw'>def</span> <span class='id shutdown'>shutdown</span>
  <span class='ivar'>@process</span><span class='period'>.</span><span class='id block_signals'>block_signals</span> <span class='kw'>true</span>
  <span class='ivar'>@process</span><span class='period'>.</span><span class='id kill'>kill</span>
  <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="slot_process_finished-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>slot_process_finished</strong>(code, status)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Slot called in response to the process&#8217; <tt>finished(int, QProcess::ExitStatus)</tt>
signal.</p>
<p>It emits the <tt>process_finished(int, QString)</tt> signal</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


339
340
341
342
343
344
345
346
347
348
349
350
351</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/external_program_plugin.rb', line 339</span>

<span class='kw'>def</span> <span class='id slot_process_finished'>slot_process_finished</span> <span class='id code'>code</span><span class='comma'>,</span> <span class='id status'>status</span>
  <span class='id str'>str</span> <span class='op'>=</span> <span class='ivar'>@process</span><span class='period'>.</span><span class='id read_all_standard_output'>read_all_standard_output</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='id str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id str'>str</span><span class='period'>.</span><span class='id end_with?'>end_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id do_stdout'>do_stdout</span> <span class='id str'>str</span>
  <span class='id str'>str</span> <span class='op'>=</span> <span class='ivar'>@process</span><span class='period'>.</span><span class='id read_all_standard_error'>read_all_standard_error</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='id str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id str'>str</span><span class='period'>.</span><span class='id end_with?'>end_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id do_stderr'>do_stderr</span> <span class='id str'>str</span>
  <span class='id reason'>reason</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='kw'>if</span> <span class='id status'>status</span> <span class='op'>==</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Process</span><span class='op'>::</span><span class='const'>CrashExit</span>
    <span class='id reason'>reason</span> <span class='op'>=</span> <span class='id code'>code</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>killed</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>crash</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
  <span class='id emit'>emit</span> <span class='id process_finished'>process_finished</span> <span class='id code'>code</span><span class='comma'>,</span> <span class='id reason'>reason</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>slot_process_finished(int, QProcess::ExitStatus)</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="stop_process-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>stop_process</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Stops the process.</p>
<p>It&#8217;s a shortcut for <tt>process.kill</tt></p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/external_program_plugin.rb', line 161</span>

<span class='kw'>def</span> <span class='id stop_process'>stop_process</span>
  <span class='ivar'>@process</span><span class='period'>.</span><span class='id kill'>kill</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>stop_process()</tt></p>

    
  </div>



  <div id="instance_method_details" class="method_details_list">
    <h2>Signal Details</h2>
    
      <div class="method_details first">
  <p class="signature first" id="process_finished-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>process_finished</strong>(int arg1, QString arg2) 
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="process_started-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>process_started</strong> 
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="process_failed_to_start-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>process_failed_to_start</strong> 
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="process_finished-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>process_finished</strong>(int arg1, QString arg2) 
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="process_started-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>process_started</strong> 
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="process_failed_to_start-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>process_failed_to_start</strong> 
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="process_finished-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>process_finished</strong>(int arg1, QString arg2) 
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="process_started-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>process_started</strong> 
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="process_failed_to_start-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>process_failed_to_start</strong> 
</p>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov 11 12:18:04 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>