<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Ruber::ChoosePluginsWidget</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Ruber.html" title="Ruber (module)">Ruber</a></span></span>
     &raquo; 
    <span class="title">ChoosePluginsWidget</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Ruber::ChoosePluginsWidget
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Qt::Widget</span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Qt::Widget</li>
          
            <li class="next">Ruber::ChoosePluginsWidget</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/ruber/main_window/choose_plugins_dlg.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Widget which implements most of the functionality of the ChoosePluginsDlg class.</p>
<p>It contains a list of plugins in the current search path, where the user can choose
the plugins to load (using checkboxes), and a list of directories where the user
can choose where to look for plugins.</p>
<p>In the plugin list, chosen plugins are shown with a selected mark, while plugins
which will be loaded to satisfy the dependencies of chosen plugins will be shown
with a partial mark.</p>
<p>Whenever the user changes the chosen plugins, the dependencies are re-computed.
If there&#8217;s a problem, the user is warned with a message box.</p>

  </div>
</div>
<div class="tags">
  
</div>

  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#apply_defaults-instance_method" title="#apply_defaults (instance method)">- (Object) <strong>apply_defaults</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets both the chosen plugins and the plugin directories to their default values
(see Appplication::DEFAULT_PLUGIN_PATHS and Application::DEFAULT_PLUGINS).</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#create_failure_message-instance_method" title="#create_failure_message (instance method)">- (Object) <strong>create_failure_message</strong>(e) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates an appropriate failure message for the exception <em>e</em>, which should be
an instance of ComponentManager::DependencyError.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#deps_satisfied%3F-instance_method" title="#deps_satisfied? (instance method)">- (Boolean) <strong>deps_satisfied?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns <strong>false</strong> if there&#8217;s a dependency problem among the chosen plugins and
<strong>true</strong> otherwise.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#fill_plugin_list-instance_method" title="#fill_plugin_list (instance method)">- (Object) <strong>fill_plugin_list</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Fills the list of plugins with the names, descriptions and paths of all plugins
found and marks each one according to whether it is among the chosen plugins,
the needed plugins or neither.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#find_deps-instance_method" title="#find_deps (instance method)">- (Object) <strong>find_deps</strong>(msg_type = :sorry) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Finds the dependencies of the chosen plugins and stores them in the
<tt>@needed_plugins</tt> instance variable.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (ChoosePluginsWidget) <strong>initialize</strong>(parent = nil) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new ChoosePluginsWidget.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#plugin_toggled-instance_method" title="#plugin_toggled (instance method)">- (Object) <strong>plugin_toggled</strong>(it) </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the plugin status to reflect the changes made to the plugin corresponding
to the item <em>it</em>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#plugins-instance_method" title="#plugins (instance method)">- (Object) <strong>plugins</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a hash containing both the chosen plugins and their dependencies.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#read_plugins-instance_method" title="#read_plugins (instance method)">- (Object) <strong>read_plugins</strong>(dirs) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Finds all the plugins in subdirectories of directories in the <em>dir</em> array,
reads their PDFs and stores the data in the <tt><code>plugins_files&lt;/tt&gt; and 
&lt;tt&gt;</code>plugin_data</tt> instance variables.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#sizeHint-instance_method" title="#sizeHint (instance method)">- (Object) <strong>sizeHint</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>:nodoc:.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#slot_directories_changed-instance_method" title="#slot_directories_changed (instance method)">- (nil) <strong>slot_directories_changed</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the plugin widgets and emits the <span class='object_link'><a href="#directories_changed-signalcode" title="Ruber::ChoosePluginsWidget#directories_changed (signalcode)">signal</a></span>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#update_plugin_status-instance_method" title="#update_plugin_status (instance method)">- (Object) <strong>update_plugin_status</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Changes the contents of the <tt><code>chosen_plugins&lt;/tt&gt; and &lt;tt&gt;</code>needed_plugins</tt>
instance variable to reflect the checked status of the plugins in the plugin list
widget.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#write_settings-instance_method" title="#write_settings (instance method)">- (Object) <strong>write_settings</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Writes the settings to the configuration file.</p></div></span>
  
</li>

      
    </ul>
  


  

  <h2>Signal Summary</h2>
  <ul class="summary" >
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#directories_changed-signalcode" title="directories_changed (signalcode)">- <strong>directories_changed</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#plugins_changed-signalcode" title="plugins_changed (signalcode)">- <strong>plugins_changed</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#directories_changed-signalcode" title="directories_changed (signalcode)">- <strong>directories_changed</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#plugins_changed-signalcode" title="plugins_changed (signalcode)">- <strong>plugins_changed</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'></div></span>
    </li>
  
  </ul>





<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Ruber::ChoosePluginsWidget (class)">ChoosePluginsWidget</a></span></tt>) <strong>initialize</strong>(parent = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates a new ChoosePluginsWidget.</p>
<p>The list of directories where to look for plugins is read from the configuration
file. The chosen plugins are read from the configuration file, but excluding all
those which aren&#8217;t currently loaded (the reason to do so is that a chosen plugin
might have failed to load and thus it should not appear in the chosen list). Also,
any plugin which is included in the chosen list but whose <span class="caps">PDF</span> can&#8217;t be found is
excluded.</p>
<p>Dependencies are then computed, and dependencies of the chosen plugins are marked
as such. If a dependency problem occurs, the user is warned and all plugins are
deselected.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 123</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span> <span class='id parent'>parent</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>super</span>
  <span class='ivar'>@ui</span> <span class='op'>=</span> <span class='const'>Ui</span><span class='op'>::</span><span class='const'>ChoosePluginsWidget</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='ivar'>@ui</span><span class='period'>.</span><span class='id setupUi'>setupUi</span> <span class='kw'>self</span>
  
  <span class='id dirs'>dirs</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:app</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id plugin_dirs'>plugin_dirs</span>
  
  <span class='ivar'>@chosen_plugins</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:general</span><span class='comma'>,</span> <span class='symbol'>:plugins</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_sym</span><span class='rparen'>)</span>
  <span class='id loaded'>loaded</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:components</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id plugins'>plugins</span><span class='period'>.</span><span class='id map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:plugin_name</span><span class='rparen'>)</span>
  <span class='ivar'>@chosen_plugins</span><span class='period'>.</span><span class='id delete_if'>delete_if</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='op'>!</span><span class='id loaded'>loaded</span><span class='period'>.</span><span class='id include?'>include?</span> <span class='id i'>i</span><span class='rbrace'>}</span>
  
  <span class='id read_plugins'>read_plugins</span> <span class='id dirs'>dirs</span>
  <span class='id res'>res</span> <span class='op'>=</span> <span class='id find_deps'>find_deps</span><span class='lparen'>(</span><span class='symbol'>:sorry</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id e'>e</span><span class='op'>|</span> 
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>There were problems making dependencies. </span><span class='embexpr_beg'>#{</span><span class='id create_failure_message'>create_failure_message</span> <span class='id e'>e</span><span class='rbrace'>}</span><span class='tstring_content'>\nAll plugins will be deselected</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id res'>res</span>
    <span class='ivar'>@chosen_plugins</span><span class='period'>.</span><span class='id clear'>clear</span>
    <span class='ivar'>@needed_plugins</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id m'>m</span> <span class='op'>=</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>StandardItemModel</span><span class='period'>.</span><span class='id new'>new</span> <span class='ivar'>@ui</span><span class='period'>.</span><span class='id plugins'>plugins</span>
  <span class='ivar'>@ui</span><span class='period'>.</span><span class='id plugins'>plugins</span><span class='period'>.</span><span class='id model'>model</span> <span class='op'>=</span> <span class='id m'>m</span>
  
  <span class='id connect'>connect</span> <span class='id m'>m</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>itemChanged(QStandardItem*)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>plugin_toggled(QStandardItem*)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  
  <span class='kw'>def</span> <span class='id m'>m</span><span class='period'>.</span><span class='id flags'>flags</span> <span class='id idx'>idx</span>
    <span class='const'>Qt</span><span class='op'>::</span><span class='const'>ItemIsSelectable</span><span class='op'>|</span><span class='const'>Qt</span><span class='op'>::</span><span class='const'>ItemIsEnabled</span><span class='op'>|</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>ItemIsUserCheckable</span>
  <span class='kw'>end</span>
  
  <span class='ivar'>@url</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>UrlRequester</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>self</span>
  <span class='ivar'>@ui</span><span class='period'>.</span><span class='id directories'>directories</span><span class='period'>.</span><span class='id custom_editor'>custom_editor</span> <span class='op'>=</span> <span class='ivar'>@url</span><span class='period'>.</span><span class='id custom_editor'>custom_editor</span>
  <span class='ivar'>@url</span><span class='period'>.</span><span class='id mode'>mode</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>File</span><span class='op'>::</span><span class='const'>Directory</span> <span class='op'>|</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>File</span><span class='op'>::</span><span class='const'>LocalOnly</span>
  <span class='id connect'>connect</span> <span class='ivar'>@ui</span><span class='period'>.</span><span class='id directories'>directories</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='symbol'>:changed</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:slot_directories_changed</span><span class='rparen'>)</span>      
  <span class='ivar'>@ui</span><span class='period'>.</span><span class='id directories'>directories</span><span class='period'>.</span><span class='id items'>items</span> <span class='op'>=</span> <span class='id dirs'>dirs</span>
  
  <span class='id fill_plugin_list'>fill_plugin_list</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="apply_defaults-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>apply_defaults</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Sets both the chosen plugins and the plugin directories to their default values
(see Appplication::DEFAULT_PLUGIN_PATHS and Application::DEFAULT_PLUGINS). If a
dependency problem occurs, the user is warned and all plugins are deselected</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 187</span>

<span class='kw'>def</span> <span class='id apply_defaults'>apply_defaults</span>
  <span class='id dirs'>dirs</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id default'>default</span> <span class='symbol'>:general</span><span class='comma'>,</span> <span class='symbol'>:plugin_dirs</span>
  <span class='ivar'>@chosen_plugins</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id default'>default</span><span class='lparen'>(</span> <span class='symbol'>:general</span><span class='comma'>,</span> <span class='symbol'>:plugins</span><span class='rparen'>)</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>,</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id i'>i</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rbrace'>}</span>
  <span class='id read_plugins'>read_plugins</span> <span class='id dirs'>dirs</span>
  <span class='id res'>res</span> <span class='op'>=</span> <span class='id find_deps'>find_deps</span><span class='lparen'>(</span><span class='symbol'>:sorry</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id e'>e</span><span class='op'>|</span> 
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>There were problems making dependencies. </span><span class='embexpr_beg'>#{</span><span class='id create_failure_message'>create_failure_message</span> <span class='id e'>e</span><span class='rbrace'>}</span><span class='tstring_content'>\nAll plugins will be deselected</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id res'>res</span>
    <span class='ivar'>@chosen_plugins</span><span class='period'>.</span><span class='id clear'>clear</span>
    <span class='ivar'>@needed_plugins</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='ivar'>@ui</span><span class='period'>.</span><span class='id directories'>directories</span><span class='period'>.</span><span class='id clear'>clear</span>
  <span class='ivar'>@ui</span><span class='period'>.</span><span class='id directories'>directories</span><span class='period'>.</span><span class='id items'>items</span> <span class='op'>=</span> <span class='id dirs'>dirs</span>
  
  <span class='id fill_plugin_list'>fill_plugin_list</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>apply_defaults()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="create_failure_message-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>create_failure_message</strong>(e)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates an appropriate failure message for the exception <em>e</em>, which should be
an instance of ComponentManager::DependencyError. It is meant to generate consistent
error messages for all the places in the widget where a dependency error can
happen.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


336
337
338
339
340
341
342
343
344
345
346
347
348
349</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 336</span>

<span class='kw'>def</span> <span class='id create_failure_message'>create_failure_message</span> <span class='id e'>e</span>
  <span class='kw'>case</span> <span class='id e'>e</span>
  <span class='kw'>when</span> <span class='const'>ComponentManager</span><span class='op'>::</span><span class='const'>UnresolvedDep</span>
    <span class='id deps'>deps</span> <span class='op'>=</span> <span class='id e'>e</span><span class='period'>.</span><span class='id missing'>missing</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id p1'>p1</span><span class='comma'>,</span> <span class='id p2'>p2</span><span class='op'>|</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id p1'>p1</span><span class='rbrace'>}</span><span class='tstring_content'>, needed by </span><span class='embexpr_beg'>#{</span><span class='id p2'>p2</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>, </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Some dependencies couldn't be satisifed:\n</span><span class='embexpr_beg'>#{</span><span class='id deps'>deps</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>when</span> <span class='const'>ComponentManager</span><span class='op'>::</span><span class='const'>CircularDep</span>
    <span class='id deps'>deps</span> <span class='op'>=</span> <span class='id e'>e</span><span class='period'>.</span><span class='id missing'>missing</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id p1'>p1</span><span class='comma'>,</span> <span class='id p2'>p2</span><span class='op'>|</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id p1'>p1</span><span class='rbrace'>}</span><span class='tstring_content'> and </span><span class='embexpr_beg'>#{</span><span class='id p2'>p2</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>There were circular dependencies between the following plugins:\n</span><span class='embexpr_beg'>#{</span><span class='id deps'>deps</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="deps_satisfied?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>deps_satisfied?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns <strong>false</strong> if there&#8217;s a dependency problem among the chosen plugins and
<strong>true</strong> otherwise.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


208
209
210
211
212
213
214
215</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 208</span>

<span class='kw'>def</span> <span class='id deps_satisfied?'>deps_satisfied?</span>
  <span class='kw'>begin</span> 
    <span class='id find_deps'>find_deps</span>
    <span class='kw'>true</span>
  <span class='kw'>rescue</span> <span class='const'>ComponentManager</span><span class='op'>::</span><span class='const'>UnresolvedDep</span><span class='comma'>,</span> <span class='const'>ComponentManager</span><span class='op'>::</span><span class='const'>CircularDep</span>
    <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="fill_plugin_list-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>fill_plugin_list</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Fills the list of plugins with the names, descriptions and paths of all plugins
found and marks each one according to whether it is among the chosen plugins,
the needed plugins or neither.</p>
<p>It also resizes the columns of the plugin list widget so that they match the
size of the contents.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


270
271
272
273
274
275
276
277
278
279
280
281
282
283</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 270</span>

<span class='kw'>def</span> <span class='id fill_plugin_list'>fill_plugin_list</span>
  <span class='id m'>m</span> <span class='op'>=</span> <span class='ivar'>@ui</span><span class='period'>.</span><span class='id plugins'>plugins</span><span class='period'>.</span><span class='id model'>model</span>
  <span class='id m'>m</span><span class='period'>.</span><span class='id clear'>clear</span>
  <span class='id m'>m</span><span class='period'>.</span><span class='id horizontal_header_labels'>horizontal_header_labels</span> <span class='op'>=</span> <span class='qwords_beg'>%w[</span><span class='tstring_content'>Name</span><span class='words_sep'> </span><span class='tstring_content'>Description</span><span class='words_sep'> </span><span class='tstring_content'>Directory</span><span class='words_sep'>]</span>
  <span class='ivar'>@plugins_files</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id k'>k</span><span class='comma'>,</span> <span class='id v'>v</span><span class='op'>|</span>
    <span class='id name'>name</span> <span class='op'>=</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>StandardItem</span><span class='period'>.</span><span class='id new'>new</span> <span class='id v'>v</span><span class='period'>.</span><span class='id about'>about</span><span class='period'>.</span><span class='id human_name'>human_name</span>
    <span class='id name'>name</span><span class='period'>.</span><span class='id data'>data</span> <span class='op'>=</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id k'>k</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span>
    <span class='id desc'>desc</span> <span class='op'>=</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>StandardItem</span><span class='period'>.</span><span class='id new'>new</span> <span class='id v'>v</span><span class='period'>.</span><span class='id about'>about</span><span class='period'>.</span><span class='id description'>description</span>
    <span class='id dir'>dir</span> <span class='op'>=</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>StandardItem</span><span class='period'>.</span><span class='id new'>new</span> <span class='id v'>v</span><span class='period'>.</span><span class='id directory'>directory</span>
    <span class='id m'>m</span><span class='period'>.</span><span class='id append_row'>append_row</span> <span class='lbracket'>[</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id desc'>desc</span><span class='comma'>,</span> <span class='id dir'>dir</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id update_plugin_status'>update_plugin_status</span>
  <span class='int'>3</span><span class='period'>.</span><span class='id times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='ivar'>@ui</span><span class='period'>.</span><span class='id plugins'>plugins</span><span class='period'>.</span><span class='id resize_column_to_contents'>resize_column_to_contents</span> <span class='id i'>i</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="find_deps-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>find_deps</strong>(msg_type = :sorry)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Finds the dependencies of the chosen plugins and stores them in the
<tt>@needed_plugins</tt> instance variable. If a dependency error occurs, if a
block was passed, a message box of type <em>type</em> is displayed. The text of the
message box is obtained by calling the block with the exception as argument. If
an error occurs and no block is passed, the exception is passed on.</p>
<p>This method returns <strong>nil</strong> if no error occurs and the value returned by the
message box otherwise.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


251
252
253
254
255
256
257
258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 251</span>

<span class='kw'>def</span> <span class='id find_deps'>find_deps</span> <span class='id msg_type'>msg_type</span> <span class='op'>=</span> <span class='symbol'>:sorry</span>
  <span class='id chosen_data'>chosen_data</span> <span class='op'>=</span> <span class='ivar'>@chosen_plugins</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='ivar'>@plugin_data</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
  <span class='kw'>begin</span> <span class='ivar'>@needed_plugins</span> <span class='op'>=</span> <span class='const'>ComponentManager</span><span class='period'>.</span><span class='id fill_dependencies'>fill_dependencies</span> <span class='id chosen_data'>chosen_data</span><span class='comma'>,</span> <span class='ivar'>@plugin_data</span><span class='period'>.</span><span class='id values'>values</span>
  <span class='kw'>rescue</span> <span class='const'>ComponentManager</span><span class='op'>::</span><span class='const'>UnresolvedDep</span><span class='comma'>,</span> <span class='const'>ComponentManager</span><span class='op'>::</span><span class='const'>CircularDep</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
    <span class='kw'>if</span> <span class='id block_given?'>block_given?</span> <span class='kw'>then</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>MessageBox</span><span class='period'>.</span><span class='id send'>send</span> <span class='id msg_type'>msg_type</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id e'>e</span><span class='rparen'>)</span>
    <span class='kw'>else</span> <span class='id raise'>raise</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="plugin_toggled-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>plugin_toggled</strong>(it)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Updates the plugin status to reflect the changes made to the plugin corresponding
to the item <em>it</em>.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


306
307
308
309
310
311
312
313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 306</span>

<span class='kw'>def</span> <span class='id plugin_toggled'>plugin_toggled</span> <span class='id it'>it</span>
  <span class='id name'>name</span> <span class='op'>=</span> <span class='id it'>it</span><span class='period'>.</span><span class='id data'>data</span><span class='period'>.</span><span class='id to_string'>to_string</span>
  <span class='kw'>if</span> <span class='id it'>it</span><span class='period'>.</span><span class='id check_state'>check_state</span> <span class='op'>==</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Checked</span> <span class='kw'>then</span> <span class='ivar'>@chosen_plugins</span> <span class='op'>&lt;&lt;</span> <span class='id name'>name</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
  <span class='kw'>else</span> <span class='ivar'>@chosen_plugins</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='id name'>name</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
  <span class='kw'>end</span>
  <span class='id find_deps'>find_deps</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id e'>e</span><span class='op'>|</span> <span class='id create_failure_message'>create_failure_message</span><span class='lparen'>(</span> <span class='id e'>e</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nPlease, be sure to correct the problem before pressing the OK or Apply button</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='id update_plugin_status'>update_plugin_status</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>plugin_toggled(QStandardItem*)</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="plugins-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>plugins</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns a hash containing both the chosen plugins and their dependencies. The
keys are the plugin names, while the values are the directories of the plugins.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


221
222
223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 221</span>

<span class='kw'>def</span> <span class='id plugins'>plugins</span>
  <span class='ivar'>@ui</span><span class='period'>.</span><span class='id plugins'>plugins</span><span class='period'>.</span><span class='id model'>model</span><span class='period'>.</span><span class='id enum_for'>enum_for</span><span class='lparen'>(</span><span class='symbol'>:each_row</span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id _'>_</span><span class='comma'>,</span> <span class='id dir'>dir</span><span class='op'>|</span>
    <span class='lbracket'>[</span><span class='id name'>name</span><span class='period'>.</span><span class='id data'>data</span><span class='period'>.</span><span class='id to_string'>to_string</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='comma'>,</span> <span class='id dir'>dir</span><span class='period'>.</span><span class='id text'>text</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id name'>name</span><span class='period'>.</span><span class='id checked?'>checked?</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id compact'>compact</span><span class='period'>.</span><span class='id to_h'>to_h</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read_plugins-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>read_plugins</strong>(dirs)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Finds all the plugins in subdirectories of directories in the <em>dir</em> array,
reads their PDFs and stores the data in the <tt><code>plugins_files&lt;/tt&gt; and 
&lt;tt&gt;</code>plugin_data</tt> instance variables. Also removes from the <tt>@chosen</tt>
instance variable the plugins whose <span class="caps">PDF</span> wasn&#8217;t found.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


235
236
237
238
239</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 235</span>

<span class='kw'>def</span> <span class='id read_plugins'>read_plugins</span> <span class='id dirs'>dirs</span>
  <span class='ivar'>@plugins_files</span> <span class='op'>=</span> <span class='const'>ComponentManager</span><span class='period'>.</span><span class='id find_plugins'>find_plugins</span> <span class='id dirs'>dirs</span><span class='comma'>,</span> <span class='kw'>true</span>
  <span class='ivar'>@plugin_data</span> <span class='op'>=</span> <span class='ivar'>@plugins_files</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id _'>_</span><span class='comma'>,</span> <span class='id v'>v</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id v'>v</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id v'>v</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id to_h'>to_h</span>
  <span class='ivar'>@chosen_plugins</span><span class='period'>.</span><span class='id delete_if'>delete_if</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='op'>!</span><span class='ivar'>@plugin_data</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sizeHint-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>sizeHint</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>:nodoc:</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 161</span>

<span class='kw'>def</span> <span class='id sizeHint'>sizeHint</span> <span class='comment'>#:nodoc:
</span>  <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Size</span><span class='period'>.</span><span class='id new'>new</span> <span class='int'>600</span><span class='comma'>,</span> <span class='int'>550</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="slot_directories_changed-instance_method">
  
    - (<tt>nil</tt>) <strong>slot_directories_changed</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Updates the plugin widgets and emits the <span class='object_link'><a href="#directories_changed-signalcode" title="Ruber::ChoosePluginsWidget#directories_changed (signalcode)">signal</a></span></p>
<p>If the dependencies aren&#8217;t respected, the user is warned with a message box.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


321
322
323
324
325
326
327</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 321</span>

<span class='kw'>def</span> <span class='id slot_directories_changed'>slot_directories_changed</span>
  <span class='id new_dirs'>new_dirs</span> <span class='op'>=</span> <span class='ivar'>@ui</span><span class='period'>.</span><span class='id directories'>directories</span><span class='period'>.</span><span class='id items'>items</span>
  <span class='id find_deps'>find_deps</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id e'>e</span><span class='op'>|</span> <span class='id create_failure_message'>create_failure_message</span><span class='lparen'>(</span> <span class='id e'>e</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nPlease, be sure to correct the problem before pressing the OK or Apply button</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='id fill_plugin_list'>fill_plugin_list</span>
  <span class='id emit'>emit</span> <span class='id directories_changed'>directories_changed</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>slot_directories_changed()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="update_plugin_status-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>update_plugin_status</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Changes the contents of the <tt><code>chosen_plugins&lt;/tt&gt; and &lt;tt&gt;</code>needed_plugins</tt>
instance variable to reflect the checked status of the plugins in the plugin list
widget. Emits the <tt>plugins_changed</tt> signal.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


290
291
292
293
294
295
296
297
298
299
300</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 290</span>

<span class='kw'>def</span> <span class='id update_plugin_status'>update_plugin_status</span>
  <span class='ivar'>@ui</span><span class='period'>.</span><span class='id plugins'>plugins</span><span class='period'>.</span><span class='id model'>model</span><span class='period'>.</span><span class='id each_row'>each_row</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id desc'>desc</span><span class='comma'>,</span> <span class='id dir'>dir</span><span class='op'>|</span>
    <span class='id plug_name'>plug_name</span> <span class='op'>=</span> <span class='id name'>name</span><span class='period'>.</span><span class='id data'>data</span><span class='period'>.</span><span class='id to_string'>to_string</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
    <span class='id state'>state</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='ivar'>@chosen_plugins</span><span class='period'>.</span><span class='id include?'>include?</span> <span class='id plug_name'>plug_name</span> <span class='kw'>then</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Checked</span>
    <span class='kw'>elsif</span> <span class='ivar'>@needed_plugins</span><span class='period'>.</span><span class='id include?'>include?</span> <span class='id plug_name'>plug_name</span> <span class='kw'>then</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>PartiallyChecked</span>
    <span class='kw'>else</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Unchecked</span>
    <span class='kw'>end</span>
    <span class='id name'>name</span><span class='period'>.</span><span class='id check_state'>check_state</span> <span class='op'>=</span> <span class='id state'>state</span>
  <span class='kw'>end</span>
  <span class='id emit'>emit</span> <span class='id plugins_changed'>plugins_changed</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write_settings-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>write_settings</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Writes the settings to the configuration file. The directories listed in the
  directory widget are stored in the <i>general/plugin_dirs</i> entry, while
  the chosen plugins are stored in the <i>general/plugins</i> entry. Plugins
  which haven&#8217;t been chosen but are dependencies of the chosen ones aren&#8217;t stored.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173
174
175
176
177
178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/main_window/choose_plugins_dlg.rb', line 171</span>

<span class='kw'>def</span> <span class='id write_settings'>write_settings</span>
  <span class='id dirs'>dirs</span> <span class='op'>=</span> <span class='ivar'>@ui</span><span class='period'>.</span><span class='id directories'>directories</span><span class='period'>.</span><span class='id items'>items</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:app</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id plugin_dirs'>plugin_dirs</span> <span class='op'>=</span> <span class='id dirs'>dirs</span>
  <span class='id plugins'>plugins</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@ui</span><span class='period'>.</span><span class='id plugins'>plugins</span><span class='period'>.</span><span class='id model'>model</span><span class='period'>.</span><span class='id each_row'>each_row</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id r'>r</span><span class='op'>|</span>
    <span class='id plugins'>plugins</span> <span class='op'>&lt;&lt;</span> <span class='id r'>r</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id data'>data</span><span class='period'>.</span><span class='id to_string'>to_string</span> <span class='kw'>if</span>  <span class='id r'>r</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id fully_checked?'>fully_checked?</span>
  <span class='kw'>end</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:general</span><span class='comma'>,</span> <span class='symbol'>:plugins</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id plugins'>plugins</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id write'>write</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>write_settings()</tt></p>

    
  </div>



  <div id="instance_method_details" class="method_details_list">
    <h2>Signal Details</h2>
    
      <div class="method_details first">
  <p class="signature first" id="directories_changed-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>directories_changed</strong> 
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="plugins_changed-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>plugins_changed</strong> 
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="directories_changed-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>directories_changed</strong> 
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="plugins_changed-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>plugins_changed</strong> 
</p>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov 11 12:12:04 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>