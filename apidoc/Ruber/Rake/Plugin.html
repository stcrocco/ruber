<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Ruber::Rake::Plugin</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (P)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../Ruber.html" title="Ruber (module)">Ruber</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Rake.html" title="Ruber::Rake (module)">Rake</a></span></span>
     &raquo; 
    <span class="title">Plugin</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Ruber::Rake::Plugin
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">RubyRunner::RubyRunnerPlugin</span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">RubyRunner::RubyRunnerPlugin</li>
          
            <li class="next">Ruber::Rake::Plugin</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">plugins/rake/rake.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Plugin object for the Rake plugin.</p>
<p>This plugin relies in a project extension to keep a list of project tasks.</p>

  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Plugin/Error.html" title="Ruber::Rake::Plugin::Error (class)">Error</a></span>, <span class='object_link'><a href="Plugin/RakeError.html" title="Ruber::Rake::Plugin::RakeError (class)">RakeError</a></span>, <span class='object_link'><a href="Plugin/RakefileNotFound.html" title="Ruber::Rake::Plugin::RakefileNotFound (class)">RakefileNotFound</a></span>, <span class='object_link'><a href="Plugin/Timeout.html" title="Ruber::Rake::Plugin::Timeout (class)">Timeout</a></span>
    
  
</p>


  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#choose_and_run_task-instance_method" title="#choose_and_run_task (instance method)">- (nil) <strong>choose_and_run_task</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Slot associated with the <code>rake-run</code> action.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#choose_task_for-instance_method" title="#choose_task_for (instance method)">- (String<sup>?</sup>) <strong>choose_task_for</strong>(prj) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Displays a dialog where the user can choose the task to run according to the settings
of the given project.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#display_task_retrival_error_dialog-instance_method" title="#display_task_retrival_error_dialog (instance method)">- (self) <strong>display_task_retrival_error_dialog</strong>(ex) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Displays a message box telling why rake failed to retrieve tasks.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#fill_project_menu-instance_method" title="#fill_project_menu (instance method)">- (nil) <strong>fill_project_menu</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Fills the Project Tasks menu, according to the current target.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#fill_quick_tasks_menu-instance_method" title="#fill_quick_tasks_menu (instance method)">- (Object) <strong>fill_quick_tasks_menu</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Fills the Quick Tasks menu.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#filter_options_to_find_tasks-instance_method" title="#filter_options_to_find_tasks (instance method)">- (Array&lt;String&gt;) <strong>filter_options_to_find_tasks</strong>(opts) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Given a list of rake options, creates a list containing only those which are safe
to use from Plugin.tasks.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#find_current_target-instance_method" title="#find_current_target (instance method)">- (DocumentProject, ...) <strong>find_current_target</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>The project to run rake for when one of the rake menu entries is chosen.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Plugin) <strong>initialize</strong>(psf) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of Plugin.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#load_settings-instance_method" title="#load_settings (instance method)">- (nil) <strong>load_settings</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Loads the settings.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#refresh_tasks-instance_method" title="#refresh_tasks (instance method)">- (nil) <strong>refresh_tasks</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the tasks.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#run_default_task-instance_method" title="#run_default_task (instance method)">- (nil) <strong>run_default_task</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Slot associated with the <code>rake-run_default</code> action.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#run_project_task-instance_method" title="#run_project_task (instance method)">- (nil) <strong>run_project_task</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Slot associated with the various project tasks actions defined by the user for the
current target.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#run_quick_task-instance_method" title="#run_quick_task (instance method)">- (nil) <strong>run_quick_task</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Slot associated with the various quick tasks actions defined by the user.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#run_rake-instance_method" title="#run_rake (instance method)">- (nil) <strong>run_rake</strong>(ruby, dir, data) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Runs rake, displaying the output in the associated output widget, according to
the given options.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#set_current_target-instance_method" title="#set_current_target (instance method)">- (nil) <strong>set_current_target</strong> </a>
    

    
  </span>
  
  
  
    <span class="note title"><strong>slot</strong></span>
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Changes the current target.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#setup_handlers-instance_method" title="#setup_handlers (instance method)">- (nil) <strong>setup_handlers</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates and registers the gui state handlers for the actions provided by the plugin.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#tasks-instance_method" title="#tasks (instance method)">- (Hash) <strong>tasks</strong>(ruby, dir, opts) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The rake tasks availlable, according to the given options.</p></div></span>
  
</li>

      
    </ul>
  


  

  <h2>Signal Summary</h2>
  <ul class="summary" >
  
    <li class="public ">
      <span class="summary_signature">
<!-- The sub is needed to remove the (Object) part -->
      <a href="#rake_finished-signalcode" title="rake_finished (signalcode)">- <strong>rake_finished</strong> </a>
      </span>
      <span class="summary_desc"><div class='inline'><p>Signal emitted when the rake program started with <span class='object_link'><a href="#run_rake-instance_method" title="Ruber::Rake::Plugin#run_rake (method)">Plugin#run_rake</a></span> has exited.</p></div></span>
    </li>
  
  </ul>





<h4>Methods API</h4>
<ul>
<li><span class='object_link'><a href="#tasks-instance_method" title="Ruber::Rake::Plugin#tasks (method)">Plugin#tasks</a></span></li>
<li><span class='object_link'><a href="#run_rake-instance_method" title="Ruber::Rake::Plugin#run_rake (method)">Plugin#run_rake</a></span></li>
</ul>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Ruber::Rake::Plugin (class)">Plugin</a></span></tt>) <strong>initialize</strong>(psf) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>A new instance of Plugin</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../PluginSpecification.html" title="Ruber::PluginSpecification (class)">Ruber::PluginSpecification</a></span></tt>)</span>
      
      
        <span class='name'>psf</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 132</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span> <span class='id psf'>psf</span>
  <span class='ivar'>@quick_tasks_actions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@project_tasks_actions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@current_target</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>super</span> <span class='id psf'>psf</span><span class='comma'>,</span> <span class='symbol'>:rake</span><span class='comma'>,</span> <span class='symbol'>:scope</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='symbol'>:global</span><span class='comma'>,</span> <span class='symbol'>:document</span><span class='rbracket'>]</span>
  <span class='id setup_handlers'>setup_handlers</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id change_state'>change_state</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake_running</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>false</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:autosave</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id register_plugin'>register_plugin</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span>
  <span class='ivar'>@output_widget</span> <span class='op'>=</span> <span class='ivar'>@widget</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id connect'>connect</span><span class='lparen'>(</span><span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='symbol'>:rake_finished</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id change_state'>change_state</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake_running</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id connect'>connect</span><span class='lparen'>(</span><span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='symbol'>:process_failed_to_start</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id change_state'>change_state</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake_running</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>false</span><span class='rbrace'>}</span>
  <span class='id connect'>connect</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:projects</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>current_project_changed(QObject*)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:set_current_target</span><span class='rparen'>)</span>
  <span class='id connect'>connect</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>current_document_changed(QObject*)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:set_current_target</span><span class='rparen'>)</span>
  <span class='id connect'>connect</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>process_finished(int, QString)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='symbol'>:rake_finished</span><span class='rparen'>)</span>
  <span class='id connect'>connect</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>extension_added(QString, QObject*)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:set_current_target</span><span class='rparen'>)</span>
  <span class='id connect'>connect</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>extension_removed(QString, QObject*)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:set_current_target</span><span class='rparen'>)</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:components</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id connect'>connect</span><span class='lparen'>(</span><span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>feature_loaded(QString, QObject*)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id f'>f</span><span class='comma'>,</span> <span class='id o'>o</span><span class='op'>|</span>
    <span class='id o'>o</span><span class='period'>.</span><span class='id register_plugin'>register_plugin</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id f'>f</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>autosave</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
  <span class='id fill_quick_tasks_menu'>fill_quick_tasks_menu</span>
  <span class='id set_current_target'>set_current_target</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="choose_and_run_task-instance_method">
  
    - (<tt>nil</tt>) <strong>choose_and_run_task</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Slot associated with the <code>rake-run</code> action</p>
<p>It displays a dialog where the user can choose a taks for the current target,
then executes it. If the user cancels the dialog, nothing else happens</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


369
370
371
372
373</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 369</span>

<span class='kw'>def</span> <span class='id choose_and_run_task'>choose_and_run_task</span>
  <span class='id task'>task</span> <span class='op'>=</span> <span class='id choose_task_for'>choose_task_for</span> <span class='ivar'>@current_target</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id task'>task</span>
  <span class='ivar'>@current_target</span><span class='period'>.</span><span class='id extension'>extension</span><span class='lparen'>(</span><span class='symbol'>:rake</span><span class='rparen'>)</span><span class='period'>.</span><span class='id run_rake'>run_rake</span> <span class='id task'>task</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>choose_and_run_task()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="choose_task_for-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt><sup>?</sup>) <strong>choose_task_for</strong>(prj)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Displays a dialog where the user can choose the task to run according to the settings
of the given project.</p>
<p>dialog with the Cancel button</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../AbstractProject.html" title="Ruber::AbstractProject (class)">AbstractProject</a></span></tt>)</span>
      
      
        <span class='name'>prj</span>
      
      
      
        &mdash;
        <div class='inline'><p>the project to read the settings from</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>the name of the chosen task or <strong>nil</strong> if the user closed the</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


384
385
386
387
388</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 384</span>

<span class='kw'>def</span> <span class='id choose_task_for'>choose_task_for</span> <span class='id prj'>prj</span>
  <span class='id dlg'>dlg</span> <span class='op'>=</span> <span class='const'>ChooseTaskDlg</span><span class='period'>.</span><span class='id new'>new</span> <span class='id prj'>prj</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id dlg'>dlg</span><span class='period'>.</span><span class='id exec'>exec</span> <span class='op'>==</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Dialog</span><span class='op'>::</span><span class='const'>Rejected</span>
  <span class='id dlg'>dlg</span><span class='period'>.</span><span class='id task'>task</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="display_task_retrival_error_dialog-instance_method">
  
    - (<tt>self</tt>) <strong>display_task_retrival_error_dialog</strong>(ex) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Displays a message box telling why rake failed to retrieve tasks</p>
<p>This method is meant to be called in a <code>rescue</code> clause for <span class='object_link'><a href="Plugin/RakeError.html" title="Ruber::Rake::Plugin::RakeError (class)">RakeError</a></span> 
exceptions from methods which call <span class='object_link'><a href="#tasks-instance_method" title="Ruber::Rake::Plugin#tasks (method)">#tasks</a></span>. According to the type of exception
raised, the appropriate text will be displayed in the message box.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Plugin/RakeError.html" title="Ruber::Rake::Plugin::RakeError (class)">RakeError</a></span></tt>)</span>
      
      
        <span class='name'>ex</span>
      
      
      
        &mdash;
        <div class='inline'><p>the exception describing the error</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


293
294
295
296
297
298
299
300
301
302
303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 293</span>

<span class='kw'>def</span> <span class='id display_task_retrival_error_dialog'>display_task_retrival_error_dialog</span> <span class='id ex'>ex</span>
  <span class='id msg'>msg</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id ex'>ex</span>
  <span class='kw'>when</span> <span class='const'>RakeError</span>
    <span class='comment'># The &lt;i&gt;&lt;/i&gt; tag is needed because (according to the QMessageBox documentation),
</span>    <span class='comment'># for the text to be interpreted as rich text, an html tag must be present
</span>    <span class='comment'># before the first newline.
</span>    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rake aborted with the following error message:&lt;i&gt;&lt;/i&gt;\n&lt;pre&gt;</span><span class='embexpr_beg'>#{</span><span class='id e'>e</span><span class='period'>.</span><span class='id rake_error'>rake_error</span><span class='rbrace'>}</span><span class='tstring_content'>\n</span><span class='embexpr_beg'>#{</span><span class='id e'>e</span><span class='period'>.</span><span class='id rake_backtrace'>rake_backtrace</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='tstring_content'>&lt;/pre&gt;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>when</span> <span class='const'>RakefileNotFound</span> <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No rakefile was found</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>when</span> <span class='const'>Timeout</span> <span class='kw'>then</span> <span class='id e'>e</span><span class='period'>.</span><span class='id message'>message</span>
  <span class='kw'>end</span>
  <span class='const'>KDE</span><span class='op'>::</span><span class='const'>MessageBox</span><span class='period'>.</span><span class='id sorry'>sorry</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id msg'>msg</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="fill_project_menu-instance_method">
  
    - (<tt>nil</tt>) <strong>fill_project_menu</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Fills the Project Tasks menu, according to the current target</p>
<p>It clears the menu, then inserts in the menu one action for each entry in the
current target&#8217;s rake/tasks option. If that option is empty, or if there&#8217;s no
current target, then a single, disabled entry with text &#8216;(Empty)&#8217; is inserted in
the menu</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 516</span>

<span class='kw'>def</span> <span class='id fill_project_menu'>fill_project_menu</span>
  <span class='ivar'>@gui</span><span class='period'>.</span><span class='id unplug_action_list'>unplug_action_list</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake-project_tasks_list</span><span class='tstring_end'>'</span></span>
  <span class='id mw'>mw</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span>
  <span class='ivar'>@project_tasks_actions</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id a'>a</span><span class='op'>|</span> 
    <span class='id mw'>mw</span><span class='period'>.</span><span class='id remove_action_handler_for'>remove_action_handler_for</span> <span class='id a'>a</span>
    <span class='id a'>a</span><span class='period'>.</span><span class='id dispose'>dispose</span>
  <span class='kw'>end</span>
  <span class='ivar'>@project_tasks_actions</span><span class='period'>.</span><span class='id clear'>clear</span>
  <span class='id coll'>coll</span> <span class='op'>=</span> <span class='ivar'>@gui</span><span class='period'>.</span><span class='id action_collection'>action_collection</span>
  <span class='kw'>if</span> <span class='ivar'>@current_target</span>
    <span class='id tasks'>tasks</span> <span class='op'>=</span> <span class='ivar'>@current_target</span><span class='lbracket'>[</span><span class='symbol'>:rake</span><span class='comma'>,</span> <span class='symbol'>:tasks</span><span class='rbracket'>]</span>
    <span class='id tasks'>tasks</span><span class='period'>.</span><span class='id each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id t'>t</span><span class='comma'>,</span> <span class='id x'>x</span><span class='op'>|</span>
      <span class='id desc'>desc</span><span class='comma'>,</span> <span class='id short'>short</span> <span class='op'>=</span> <span class='op'>*</span><span class='id x'>x</span>
      <span class='id a'>a</span> <span class='op'>=</span> <span class='id coll'>coll</span><span class='period'>.</span><span class='id add_action'>add_action</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rake-project_task-</span><span class='embexpr_beg'>#{</span><span class='id t'>t</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:run_project_task</span><span class='rparen'>)</span>
      <span class='id a'>a</span><span class='period'>.</span><span class='id text'>text</span> <span class='op'>=</span> <span class='id t'>t</span>
      <span class='id a'>a</span><span class='period'>.</span><span class='id shortcut'>shortcut</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Shortcut</span><span class='period'>.</span><span class='id new'>new</span> <span class='id short'>short</span> <span class='kw'>if</span> <span class='id short'>short</span>
      <span class='id a'>a</span><span class='period'>.</span><span class='id help_text'>help_text</span> <span class='op'>=</span> <span class='id desc'>desc</span>
      <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id register_action_handler'>register_action_handler</span> <span class='id a'>a</span><span class='comma'>,</span> 
          <span class='qwords_beg'>%w[</span><span class='tstring_content'>rake_running</span><span class='words_sep'> </span><span class='tstring_content'>active_project_exists</span><span class='words_sep'>]</span><span class='comma'>,</span> <span class='symbol'>:extra_id</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='comma'>,</span> 
          <span class='op'>&amp;</span><span class='ivar'>@quick_tasks_handler_prc</span>
      <span class='ivar'>@project_tasks_actions</span> <span class='op'>&lt;&lt;</span> <span class='id a'>a</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='ivar'>@project_tasks_actions</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id a'>a</span> <span class='op'>=</span> <span class='id coll'>coll</span><span class='period'>.</span><span class='id add_action'>add_action</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake-project_tasks_empty</span><span class='tstring_end'>'</span></span>
    <span class='id a'>a</span><span class='period'>.</span><span class='id text'>text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(Empty)</span><span class='tstring_end'>&quot;</span></span>
    <span class='id a'>a</span><span class='period'>.</span><span class='id enabled'>enabled</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='ivar'>@project_tasks_actions</span> <span class='op'>&lt;&lt;</span> <span class='id a'>a</span>
  <span class='kw'>end</span>
  <span class='ivar'>@gui</span><span class='period'>.</span><span class='id plug_action_list'>plug_action_list</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake-project_tasks_list</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='ivar'>@project_tasks_actions</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>fill_project_menu()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="fill_quick_tasks_menu-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>fill_quick_tasks_menu</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Fills the Quick Tasks menu</p>
<p>It removes the <code>rake-quick_tasks_list</code> action list from the menu, then
creates the actions according to the current content of the rake/quick_tasks
option and fills the menu again.</p>
<p>If the rake/quick_tasks option is empty, a single, disabled action with text 
<code>(Empty)</code> is inserted.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'></span>
      
      
      
      
        
        <div class='inline'><p>nil</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 335</span>

<span class='kw'>def</span> <span class='id fill_quick_tasks_menu'>fill_quick_tasks_menu</span>
  <span class='id mw'>mw</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span>
  <span class='ivar'>@quick_tasks_actions</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id a'>a</span><span class='op'>|</span> 
    <span class='id mw'>mw</span><span class='period'>.</span><span class='id remove_action_handler_for'>remove_action_handler_for</span> <span class='id a'>a</span> <span class='kw'>if</span> <span class='id a'>a</span><span class='period'>.</span><span class='id object_name'>object_name</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake-quick_task_empty_action</span><span class='tstring_end'>'</span></span>
    <span class='id a'>a</span><span class='period'>.</span><span class='id dispose'>dispose</span>
  <span class='kw'>end</span>
  <span class='ivar'>@gui</span><span class='period'>.</span><span class='id unplug_action_list'>unplug_action_list</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rake-quick_tasks_list</span><span class='tstring_end'>&quot;</span></span>
  <span class='id coll'>coll</span> <span class='op'>=</span> <span class='ivar'>@gui</span><span class='period'>.</span><span class='id action_collection'>action_collection</span>
  <span class='ivar'>@quick_tasks_actions</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:rake</span><span class='comma'>,</span> <span class='symbol'>:quick_tasks</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id sort'>sort</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id k'>k</span><span class='comma'>,</span> <span class='id v'>v</span><span class='op'>|</span>
    <span class='id a'>a</span> <span class='op'>=</span> <span class='id coll'>coll</span><span class='period'>.</span><span class='id add_action'>add_action</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rake-quick_task-</span><span class='embexpr_beg'>#{</span><span class='id k'>k</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:run_quick_task</span><span class='rparen'>)</span>
    <span class='id a'>a</span><span class='period'>.</span><span class='id text'>text</span> <span class='op'>=</span> <span class='id k'>k</span>
    <span class='id a'>a</span><span class='period'>.</span><span class='id shortcut'>shortcut</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Shortcut</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id v'>v</span><span class='rparen'>)</span>
    <span class='id mw'>mw</span><span class='period'>.</span><span class='id register_action_handler'>register_action_handler</span> <span class='id a'>a</span><span class='comma'>,</span> <span class='qwords_beg'>%w[</span><span class='tstring_content'>rake_running</span><span class='words_sep'> </span><span class='tstring_content'>active_project_exists</span><span class='words_sep'> </span><span class='tstring_content'>current_document</span><span class='words_sep'>]</span><span class='comma'>,</span>  <span class='symbol'>:extra_id</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='ivar'>@quick_tasks_handler_prc</span>
    <span class='id a'>a</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='ivar'>@quick_tasks_actions</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id a'>a</span> <span class='op'>=</span> <span class='id coll'>coll</span><span class='period'>.</span><span class='id add_action'>add_action</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake-quick_task_empty_action</span><span class='tstring_end'>'</span></span>
    <span class='id a'>a</span><span class='period'>.</span><span class='id text'>text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>(Empty)</span><span class='tstring_end'>'</span></span>
    <span class='id a'>a</span><span class='period'>.</span><span class='id enabled'>enabled</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id a'>a</span><span class='period'>.</span><span class='id object_name'>object_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake-quick_task_empty_action</span><span class='tstring_end'>'</span></span>
    <span class='ivar'>@quick_tasks_actions</span> <span class='op'>&lt;&lt;</span> <span class='id a'>a</span>
  <span class='kw'>end</span>
  <span class='ivar'>@gui</span><span class='period'>.</span><span class='id plug_action_list'>plug_action_list</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rake-quick_tasks_list</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@quick_tasks_actions</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="filter_options_to_find_tasks-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>filter_options_to_find_tasks</strong>(opts)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Given a list of rake options, creates a list containing only those which are safe
to use from tasks.</p>
<p>The options which will be removed are: -D, -n, -P, -q, &#8212;rules, -s,
-t, v, -V, -h, -e, -p and -E, because in a way or another have the capability
to change the rake output from what <tt>tasks_for</tt> expects.</p>
<p><b>Note:</b> this method creates a new array; it doesn&#8217;t modify <em>opts</em>.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span> &lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
        <span class='name'>opts</span>
      
      
      
        &mdash;
        <div class='inline'><p>a list of options to be passed to rake</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>an array containing only the safe options from <em>opts</em></p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


465
466
467
468
469
470
471
472
473
474
475
476
477
478
479</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 465</span>

<span class='kw'>def</span> <span class='id filter_options_to_find_tasks'>filter_options_to_find_tasks</span> <span class='id opts'>opts</span>
  <span class='id flags_to_delete'>flags_to_delete</span> <span class='op'>=</span> <span class='qwords_beg'>%w[</span><span class='tstring_content'>-D</span><span class='words_sep'> </span><span class='tstring_content'>--describe</span><span class='words_sep'> </span><span class='tstring_content'>-n</span><span class='words_sep'> </span><span class='tstring_content'>--dry-run</span><span class='words_sep'> </span><span class='tstring_content'>-P</span><span class='words_sep'> </span><span class='tstring_content'>--prereqs</span><span class='words_sep'> </span><span class='tstring_content'>-q</span><span class='words_sep'> </span><span class='tstring_content'>--quiet</span><span class='words_sep'>  </span><span class='tstring_content'>--rules</span><span class='words_sep'> </span><span class='tstring_content'>-s</span><span class='words_sep'> </span><span class='tstring_content'>--silent</span><span class='words_sep'> </span><span class='tstring_content'>-t</span><span class='words_sep'> </span><span class='tstring_content'>--trace</span><span class='words_sep'> </span><span class='tstring_content'>-v</span><span class='words_sep'> </span><span class='tstring_content'>--verbose</span><span class='words_sep'> </span><span class='tstring_content'>-V</span><span class='words_sep'> </span><span class='tstring_content'>--version</span><span class='words_sep'> </span><span class='tstring_content'>-h</span><span class='words_sep'> </span><span class='tstring_content'>-H</span><span class='words_sep'> </span><span class='tstring_content'>--help</span><span class='words_sep'>]</span>
  <span class='id opts'>opts</span> <span class='op'>=</span> <span class='id opts'>opts</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='id opts'>opts</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-D</span><span class='tstring_end'>'</span></span>
  <span class='id opts'>opts</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>--describe</span><span class='tstring_end'>'</span></span>
  <span class='id opts'>opts</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-n</span><span class='tstring_end'>'</span></span>
  <span class='qwords_beg'>%w[</span><span class='tstring_content'>-e</span><span class='words_sep'> </span><span class='tstring_content'>--execute</span><span class='words_sep'> </span><span class='tstring_content'>-p</span><span class='words_sep'> </span><span class='tstring_content'>--execute-print</span><span class='words_sep'> </span><span class='tstring_content'>-E</span><span class='words_sep'> </span><span class='tstring_content'>--execute-continue</span><span class='words_sep'>]</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id o'>o</span><span class='op'>|</span>
    <span class='id idxs'>idxs</span> <span class='op'>=</span> <span class='id opts'>opts</span><span class='period'>.</span><span class='id each_index'>each_index</span><span class='period'>.</span><span class='id find_all'>find_all</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id opts'>opts</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id o'>o</span><span class='rbrace'>}</span>
    <span class='id idxs'>idxs</span><span class='period'>.</span><span class='id reverse_each'>reverse_each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> 
      <span class='id opts'>opts</span><span class='period'>.</span><span class='id delete_at'>delete_at</span> <span class='id i'>i</span> <span class='op'>+</span> <span class='int'>1</span>
      <span class='id opts'>opts</span><span class='period'>.</span><span class='id delete_at'>delete_at</span> <span class='id i'>i</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id opts'>opts</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="find_current_target-instance_method">
  
    - (<tt><span class='object_link'><a href="../DocumentProject.html" title="Ruber::DocumentProject (class)">DocumentProject</a></span></tt>, ...) <strong>find_current_target</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The project to run rake for when one of the rake menu entries is chosen</p>
<p>document if the latter is a rakefile and doesn&#8217;t belong to the current project
it isn&#8217;t a rakefile
and there&#8217;s no open project</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../DocumentProject.html" title="Ruber::DocumentProject (class)">DocumentProject</a></span></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>the <span class='object_link'><a href="../DocumentProject.html" title="Ruber::DocumentProject (class)">DocumentProject</a></span> associated with the current</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Project.html" title="Ruber::Project (class)">Project</a></span></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>the current project, if the current file belongs to it or if</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>if there&#8217;s no open document or if the current document isn&#8217;t a rakefile</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


439
440
441
442
443
444
445
446
447
448</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 439</span>

<span class='kw'>def</span> <span class='id find_current_target'>find_current_target</span>
  <span class='id target'>target</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id current_document'>current_document</span><span class='period'>.</span><span class='id project'>project</span> <span class='kw'>rescue</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id target'>target</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='kw'>or</span> <span class='op'>!</span><span class='id target'>target</span><span class='period'>.</span><span class='id has_extension?'>has_extension?</span> <span class='symbol'>:rake</span>
    <span class='id prj'>prj</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:projects</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id current'>current</span>
    <span class='id target'>target</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id prj'>prj</span> <span class='kw'>and</span> <span class='id prj'>prj</span><span class='period'>.</span><span class='id has_extension?'>has_extension?</span> <span class='symbol'>:rake</span> <span class='kw'>then</span> <span class='id prj'>prj</span>
    <span class='kw'>else</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id target'>target</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="load_settings-instance_method">
  
    - (<tt>nil</tt>) <strong>load_settings</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Loads the settings</p>
<p>While loading the settings, it also builds the Quick Tasks menu</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166
167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 164</span>

<span class='kw'>def</span> <span class='id load_settings'>load_settings</span>
  <span class='id cfg'>cfg</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:rake</span><span class='rbracket'>]</span>
  <span class='comment'>#This method is called from Plugin#initialize before the gui is created
</span>  <span class='id fill_quick_tasks_menu'>fill_quick_tasks_menu</span> <span class='kw'>if</span> <span class='ivar'>@gui</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>load_settings()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="refresh_tasks-instance_method">
  
    - (<tt>nil</tt>) <strong>refresh_tasks</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Updates the tasks</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


554
555
556
557
558
559
560
561</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 554</span>

<span class='kw'>def</span> <span class='id refresh_tasks'>refresh_tasks</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:app</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id with_override_cursor'>with_override_cursor</span> <span class='kw'>do</span>
    <span class='kw'>begin</span> <span class='ivar'>@current_target</span><span class='period'>.</span><span class='id extension'>extension</span><span class='lparen'>(</span><span class='symbol'>:rake</span><span class='rparen'>)</span><span class='period'>.</span><span class='id update_tasks'>update_tasks</span>
    <span class='kw'>rescue</span> <span class='const'>Error</span> <span class='op'>=&gt;</span> <span class='id ex'>ex</span>
      <span class='id display_task_retrival_error_dialog'>display_task_retrival_error_dialog</span> <span class='id ex'>ex</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>refresh_tasks()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="run_default_task-instance_method">
  
    - (<tt>nil</tt>) <strong>run_default_task</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Slot associated with the <code>rake-run_default</code> action.</p>
<p>Runs the default task for the current target</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


396
397
398
399</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 396</span>

<span class='kw'>def</span> <span class='id run_default_task'>run_default_task</span>
  <span class='ivar'>@current_target</span><span class='period'>.</span><span class='id extension'>extension</span><span class='lparen'>(</span><span class='symbol'>:rake</span><span class='rparen'>)</span><span class='period'>.</span><span class='id run_rake'>run_rake</span> <span class='kw'>nil</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>run_default_task()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="run_project_task-instance_method">
  
    - (<tt>nil</tt>) <strong>run_project_task</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Slot associated with the various project tasks actions defined by the user for the
current target</p>
<p>Runs the rake task whose name is equal to the name of the action which called
this slot</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


423
424
425
426</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 423</span>

<span class='kw'>def</span> <span class='id run_project_task'>run_project_task</span>
  <span class='id task'>task</span> <span class='op'>=</span> <span class='id sender'>sender</span><span class='period'>.</span><span class='id text'>text</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='ivar'>@current_target</span><span class='period'>.</span><span class='id extension'>extension</span><span class='lparen'>(</span><span class='symbol'>:rake</span><span class='rparen'>)</span><span class='period'>.</span><span class='id run_rake'>run_rake</span> <span class='id task'>task</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>run_project_task()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="run_quick_task-instance_method">
  
    - (<tt>nil</tt>) <strong>run_quick_task</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Slot associated with the various quick tasks actions defined by the user</p>
<p>Runs the rake task whose name is equal to the name of the action which called
this slot</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


409
410
411
412</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 409</span>

<span class='kw'>def</span> <span class='id run_quick_task'>run_quick_task</span>
  <span class='id task'>task</span> <span class='op'>=</span> <span class='id sender'>sender</span><span class='period'>.</span><span class='id text'>text</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='ivar'>@current_target</span><span class='period'>.</span><span class='id extension'>extension</span><span class='lparen'>(</span><span class='symbol'>:rake</span><span class='rparen'>)</span><span class='period'>.</span><span class='id run_rake'>run_rake</span> <span class='id task'>task</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>run_quick_task()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="run_rake-instance_method">
  
    - (<tt>nil</tt>) <strong>run_rake</strong>(ruby, dir, data) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Runs rake, displaying the output in the associated output widget, according to
the given options.</p>
<p>rake. The system environment will be used if this is empty
executed if this is missing</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
        <span class='name'>ruby</span>
      
      
      
        &mdash;
        <div class='inline'><p>the path of the ruby interpreter to use to run rake</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
        <span class='name'>dir</span>
      
      
      
        &mdash;
        <div class='inline'><p>the directory rake should be run from</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>data</span>
      
      
      
        &mdash;
        <div class='inline'><p>a hash containing the options to pass to rake or ruby</p></div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <h3>Options Hash (<tt>data</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
          <span class="name">:ruby_options</span>
          <span class="default">
            
              &mdash; default:
              <tt>[]</tt>
            
          </span>
          &mdash;<div class='inline'><p>The arguments to pass to ruby itself</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">:rake</span>
          <span class="default">
            
              &mdash; default:
              <tt>Ruber[:config][:rake</tt>, <tt>:rake]</tt>
            
          </span>
          &mdash;<div class='inline'><p>The path to the rake program to use</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
          <span class="name">:options</span>
          <span class="default">
            
              &mdash; default:
              <tt>[]</tt>
            
          </span>
          &mdash;<div class='inline'><p>The options to pass to rake</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">:rakefile</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash;<div class='inline'><p>The rakefile to use (use the default rakefile
if <strong>nil</strong>)</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
          <span class="name">:env</span>
          <span class="default">
            
              &mdash; default:
              <tt>[]</tt>
            
          </span>
          &mdash;<div class='inline'><p>The environment variables to set before calling</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">:task</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash;<div class='inline'><p>The task to execute. The default task will be</p></div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


266
267
268
269
270
271
272
273
274
275
276
277
278
279
280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 266</span>

<span class='kw'>def</span> <span class='id run_rake'>run_rake</span> <span class='id ruby'>ruby</span><span class='comma'>,</span> <span class='id dir'>dir</span><span class='comma'>,</span> <span class='id data'>data</span>
  <span class='id rake'>rake</span> <span class='op'>=</span> <span class='id data'>data</span><span class='lbracket'>[</span><span class='symbol'>:rake</span><span class='rbracket'>]</span>
  <span class='id args'>args</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id data'>data</span><span class='lbracket'>[</span><span class='symbol'>:ruby_options</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='id rake'>rake</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id data'>data</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id args'>args</span> <span class='op'>+=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-f</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id data'>data</span><span class='lbracket'>[</span><span class='symbol'>:rakefile</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id data'>data</span><span class='lbracket'>[</span><span class='symbol'>:rakefile</span><span class='rbracket'>]</span>
  <span class='id args'>args</span> <span class='op'>&lt;&lt;</span> <span class='id data'>data</span><span class='lbracket'>[</span><span class='symbol'>:task</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id data'>data</span><span class='lbracket'>[</span><span class='symbol'>:task</span><span class='rbracket'>]</span>
  <span class='id env'>env</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id data'>data</span><span class='lbracket'>[</span><span class='symbol'>:env</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id process'>process</span><span class='period'>.</span><span class='id environment'>environment</span> <span class='op'>=</span> <span class='id process'>process</span><span class='period'>.</span><span class='id system_environment'>system_environment</span> <span class='op'>+</span> <span class='id env'>env</span>
  <span class='id cmd'>cmd</span> <span class='op'>=</span> <span class='id env'>env</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='id ruby'>ruby</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id args'>args</span> 
  <span class='ivar'>@widget</span><span class='period'>.</span><span class='id clear_output'>clear_output</span>
  <span class='ivar'>@widget</span><span class='period'>.</span><span class='id working_directory'>working_directory</span> <span class='op'>=</span> <span class='id dir'>dir</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id activate_tool'>activate_tool</span> <span class='ivar'>@widget</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id change_state'>change_state</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake_running</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>true</span>
  <span class='id run_process'>run_process</span> <span class='id ruby'>ruby</span><span class='comma'>,</span> <span class='id dir'>dir</span><span class='comma'>,</span> <span class='id args'>args</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_current_target-instance_method">
  
    - (<tt>nil</tt>) <strong>set_current_target</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Changes the current target.</p>
<p>It uses <span class='object_link'><a href="#find_current_target-instance_method" title="Ruber::Rake::Plugin#find_current_target (method)">#find_current_target</a></span> to find out the new current target, then, if it
is different from the old one, makes the necessary connections and disconnections
and refills the project menu</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


490
491
492
493
494
495
496
497
498
499
500
501
502
503
504</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 490</span>

<span class='kw'>def</span> <span class='id set_current_target'>set_current_target</span>
  <span class='id target'>target</span> <span class='op'>=</span> <span class='id find_current_target'>find_current_target</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id target'>target</span> <span class='op'>==</span> <span class='ivar'>@current_target</span>
  <span class='comment'># If the project is being closed, the extension may have been removed
</span>  <span class='kw'>if</span> <span class='ivar'>@current_target</span> <span class='kw'>and</span> <span class='ivar'>@current_target</span><span class='period'>.</span><span class='id extension'>extension</span><span class='lparen'>(</span><span class='symbol'>:rake</span><span class='rparen'>)</span>
    <span class='ivar'>@current_target</span><span class='period'>.</span><span class='id extension'>extension</span><span class='lparen'>(</span><span class='symbol'>:rake</span><span class='rparen'>)</span><span class='period'>.</span><span class='id disconnect'>disconnect</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='symbol'>:tasks_updated</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@current_target</span> <span class='op'>=</span> <span class='id target'>target</span>
  <span class='id fill_project_menu'>fill_project_menu</span>
  <span class='kw'>if</span> <span class='ivar'>@current_target</span>
    <span class='id connect'>connect</span> <span class='ivar'>@current_target</span><span class='period'>.</span><span class='id extension'>extension</span><span class='lparen'>(</span><span class='symbol'>:rake</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>SIGNAL</span><span class='lparen'>(</span><span class='symbol'>:tasks_updated</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='const'>SLOT</span><span class='lparen'>(</span><span class='symbol'>:fill_project_menu</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id set_state'>set_state</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake_has_target</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='op'>!</span><span class='ivar'>@current_target</span><span class='period'>.</span><span class='id nil?'>nil?</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>      <h3 style="font-size: 1em; margin-bottom: 0;">Slot Signature:</h3>
      <p style="margin-top: 5pt;"><tt>set_current_target()</tt></p>

    
      <div class="method_details ">
  <p class="signature " id="setup_handlers-instance_method">
  
    - (<tt>nil</tt>) <strong>setup_handlers</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates and registers the gui state handlers for the actions provided by the plugin.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


314
315
316
317
318
319
320
321</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 314</span>

<span class='kw'>def</span> <span class='id setup_handlers'>setup_handlers</span>
  <span class='ivar'>@quick_tasks_handler_prc</span> <span class='op'>=</span> <span class='const'>Proc</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id sts'>sts</span><span class='op'>|</span>
    <span class='op'>!</span><span class='id sts'>sts</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake_running</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>and</span> <span class='id sts'>sts</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake_has_target</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id register_action_handler'>register_action_handler</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake-run</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='ivar'>@quick_tasks_handler_prc</span>
  <span class='id register_action_handler'>register_action_handler</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rake-run_default</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='ivar'>@quick_tasks_handler_prc</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="tasks-instance_method">
  
    - (<tt>Hash</tt>) <strong>tasks</strong>(ruby, dir, opts) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The rake tasks availlable, according to the given options.</p>
<p>To obtain the task list, this method calls <tt>rake -T</tt> synchronously (this
means that the method won&#8217;t return until rake has finished). To avoid freezing
Ruber should rake go into an endless loop, this method will give up after a given
time (default: 30 seconds).</p>
<p>For this method to work, the output from <tt>rake -T</tt> should be a series of lines
of the form</p>
<p><tt>rake task_name    # Description</tt></p>
<p>However, rake accepts a number of options which may (at least potentially) change
this output. If any of these is included in the <code>:options</code> entry of <em>opts_, it&#8217;ll
be removed (see #filter_options_to_find&lt;/em&gt;tasks for a list of the problematic options)</p>
<p>rake.
must be of the form <tt><span class="caps">VARIABLE</span>=<span class="caps">VALUE</span></tt>
won&#8217;t be passed to rake, which will choose the rakefile by itself
rake hasn&#8217;t finished</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
        <span class='name'>ruby</span>
      
      
      
        &mdash;
        <div class='inline'><p>the path of the ruby interpreter to use</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
        <span class='name'>dir</span>
      
      
      
        &mdash;
        <div class='inline'><p>the directory rake should be run from</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>opts</span>
      
      
      
        &mdash;
        <div class='inline'><p>a hash containing options to pass to rake and ruby</p></div>
      
    </li>
  
</ul>

  
    
    
    
    
    
    
    <h3>Options Hash (<tt>opts</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">:rake</span>
          <span class="default">
            
              &mdash; default:
              <tt>Ruber[:config][:rake</tt>, <tt>:rake]</tt>
            
          </span>
          &mdash;<div class='inline'><p>the path to</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
          <span class="name">:options</span>
          <span class="default">
            
              &mdash; default:
              <tt>[]</tt>
            
          </span>
          &mdash;<div class='inline'><p>the options to pass to rake</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
          <span class="name">:env</span>
          <span class="default">
            
              &mdash; default:
              <tt>[]</tt>
            
          </span>
          &mdash;<div class='inline'><p>the environment to pass to rake. Each entry</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>&lt;<span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
          <span class="name">:ruby_options</span>
          <span class="default">
            
              &mdash; default:
              <tt>[]</tt>
            
          </span>
          &mdash;<div class='inline'><p>the arguments to pass to ruby</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="name">:rakefile</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          &mdash;<div class='inline'><p>the rakefile to use. If <strong>nil</strong>, the -f option</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="name">:timeout</span>
          <span class="default">
            
              &mdash; default:
              <tt>30</tt>
            
          </span>
          &mdash;<div class='inline'><p>the number of seconds before giving up if</p></div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>a hash with task names as keys and task descriptions as values</p></div>
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Plugin/RakeError.html" title="Ruber::Rake::Plugin::RakeError (class)">RakeError</a></span></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>if rake reports an error while executing the rakefile</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Plugin/RakefileNotFound.html" title="Ruber::Rake::Plugin::RakefileNotFound (class)">RakefileNotFound</a></span></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>if rake can&#8217;t find the rakefile</p></div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Plugin/Timeout.html" title="Ruber::Rake::Plugin::Timeout (class)">Timeout</a></span></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>if <tt>rake -T</tt> doesn&#8217;t exit after a suitable time</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/rake/rake.rb', line 209</span>

<span class='kw'>def</span> <span class='id tasks'>tasks</span> <span class='id ruby'>ruby</span><span class='comma'>,</span> <span class='id dir'>dir</span><span class='comma'>,</span> <span class='id opts'>opts</span>
  <span class='id rake'>rake</span> <span class='op'>=</span> <span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:rake</span><span class='rbracket'>]</span>
  <span class='id default_opts'>default_opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:options</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:env</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:ruby_options</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id default_opts'>default_opts</span><span class='period'>.</span><span class='id merge'>merge</span> <span class='id opts'>opts</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id filter_options_to_find_tasks'>filter_options_to_find_tasks</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:options</span><span class='rbracket'>]</span>
  <span class='id args'>args</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id rake'>rake</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-T</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id options'>options</span>
  <span class='id args'>args</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-f</span><span class='tstring_end'>'</span></span> <span class='op'>&lt;&lt;</span> <span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:rakefile</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:rakefile</span><span class='rbracket'>]</span>
  <span class='id env'>env</span> <span class='op'>=</span> <span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:env</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span>
  <span class='id cmd'>cmd</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id ruby'>ruby</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:ruby_options</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id args'>args</span>
  <span class='id timeout'>timeout</span> <span class='op'>=</span> <span class='id opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>30</span>
  <span class='kw'>begin</span>
    <span class='id out'>out</span><span class='comma'>,</span> <span class='id err'>err</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Timeout</span><span class='period'>.</span><span class='id timeout'>timeout</span><span class='lparen'>(</span><span class='id timeout'>timeout</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id _in'>_in</span><span class='comma'>,</span> <span class='id out'>out</span><span class='comma'>,</span> <span class='id err'>err</span> <span class='op'>=</span> <span class='const'>Open3</span><span class='period'>.</span><span class='id popen3'>popen3</span> <span class='id env'>env</span> <span class='op'>+</span> <span class='id cmd'>cmd</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
      <span class='lbracket'>[</span><span class='id out'>out</span><span class='period'>.</span><span class='id read'>read</span><span class='comma'>,</span> <span class='id err'>err</span><span class='period'>.</span><span class='id read'>read</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='op'>::</span><span class='const'>Timeout</span><span class='op'>::</span><span class='const'>Error</span>
    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>timeout</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id err'>err</span><span class='period'>.</span><span class='id sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*rake aborted!\s*\n</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id err'>err</span><span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>no rakefile found</span><span class='regexp_end'>/i</span></span> <span class='kw'>then</span> <span class='id raise'>raise</span> <span class='const'>RakefileNotFound</span><span class='comma'>,</span> <span class='id err'>err</span>
    <span class='kw'>elsif</span> <span class='id err'>err</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>timeout</span><span class='tstring_end'>'</span></span>
      <span class='id raise'>raise</span> <span class='const'>Timeout</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id timeout'>timeout</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id lines'>lines</span> <span class='op'>=</span> <span class='id err'>err</span><span class='period'>.</span><span class='id split_lines'>split_lines</span>
      <span class='id err'>err</span> <span class='op'>=</span> <span class='id lines'>lines</span><span class='period'>.</span><span class='id shift'>shift</span>
      <span class='id lines'>lines</span><span class='period'>.</span><span class='id delete_at'>delete_at</span><span class='lparen'>(</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id lines'>lines</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*\(See full trace</span><span class='regexp_end'>/</span></span>
      <span class='id raise'>raise</span> <span class='const'>RakeError</span><span class='period'>.</span><span class='id new'>new</span> <span class='id err'>err</span><span class='comma'>,</span> <span class='id lines'>lines</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id out'>out</span> <span class='op'>=</span> <span class='id out'>out</span><span class='period'>.</span><span class='id split_lines'>split_lines</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id l'>l</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id l'>l</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*rake\s*(.*)\s#\s+(.*)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>then</span> <span class='lbracket'>[</span><span class='backref'>$1</span><span class='period'>.</span><span class='id strip'>strip</span><span class='comma'>,</span> <span class='backref'>$2</span><span class='rbracket'>]</span>
    <span class='kw'>else</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id out'>out</span><span class='period'>.</span><span class='id compact!'>compact!</span>
  <span class='id out'>out</span><span class='period'>.</span><span class='id to_h'>to_h</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>



  <div id="instance_method_details" class="method_details_list">
    <h2>Signal Details</h2>
    
      <div class="method_details first">
  <p class="signature first" id="rake_finished-signalcode">
<!-- The sub is needed to remove the (Object) part -->
  - <strong>rake_finished</strong> 
</p><div class="docstring">
  <div class="discussion">
    <p>Signal emitted when the rake program started with <span class='object_link'><a href="#run_rake-instance_method" title="Ruber::Rake::Plugin#run_rake (method)">#run_rake</a></span> has exited</p>

  </div>
</div>
<div class="tags">
  
</div>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Sat Nov  6 13:28:57 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>