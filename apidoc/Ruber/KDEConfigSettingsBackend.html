<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Ruber::KDEConfigSettingsBackend
  
    &mdash; Ruber API
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (K)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Ruber.html" title="Ruber (module)">Ruber</a></span></span>
     &raquo; 
    <span class="title">KDEConfigSettingsBackend</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Ruber::KDEConfigSettingsBackend
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Ruber::KDEConfigSettingsBackend</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/ruber/kde_config_option_backend.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Backend for SettingsContainer which saves the options using the <span class="caps">KDE</span> configuration
system (namely, <tt><span class="caps">KDE</span>::Config</tt>).</p>
<p>To allow to store values of types which the <span class="caps">KDE</span> configuration system can&#8217;t handle
(for example, hashes or symbols), those values are converted to strings using <span class="caps">YAML</span>
on writing and converted back to their original values on reading. This also happens
when the value of the option and its default value are of different classes (the
reason for this is that otherwise the object would be converted to the class of 
the default value when calling <tt><span class="caps">KDE</span>::ConfigGroup#read_entry</tt>).</p>
<p>To know which options are stored as <span class="caps">YAML</span> strings and which aren&#8217;t, an extra option
is written to file. It&#8217;s store in the &#8220;Ruber Internal&#8221; group under the &#8220;Yaml options&#8221;
key and contains a list of the options which have been stored in <span class="caps">YAML</span> format. Each
entry of this option has the form &#8220;group_name/option_name&#8221;.</p>
<p>Group names and option names are converted to a more human friendly form before
being written to the file: underscores are replaced by spaces and the first letters
of all the words are capitalized.</p>
<hr />
<p><span class="caps">TODO</span>: it seems that writing and reading some kind of options doesn&#8217;t work for the ruby bindings,
while it works in C++ (for example, fonts). To work around this, I&#8217;ve changed a
bit the code where the actual read and write was done. I&#8217;ve asked on the mailing
list about this. When I get an answer, I&#8217;ll see how to better fix this.</p>

  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="RECOGNIZED_CLASSES-constant" class="">RECOGNIZED_CLASSES =
          <div class="docstring">
  <div class="discussion">
    <p>An array containing the classes which can be handled directly by <span class="caps">KDE</span>::Config.
<ins>Array</ins> isn&#8217;t included because whether it can be handled or not depends on its
contents.</p>

  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='comma'>,</span> <span class='const'>String</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Font</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Point</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Rect</span><span class='comma'>,</span>
<span class='const'>Qt</span><span class='op'>::</span><span class='const'>Size</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Color</span><span class='comma'>,</span> <span class='const'>Fixnum</span><span class='comma'>,</span> <span class='const'>Bignum</span><span class='comma'>,</span> <span class='const'>TrueClass</span><span class='comma'>,</span> <span class='const'>FalseClass</span><span class='comma'>,</span>
<span class='const'>Float</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>DateTime</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Time</span><span class='rbracket'>]</span></pre></dd>
      
    </dl>
  





  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D-instance_method" title="#[] (instance method)">- (Object) <strong>[]</strong>(opt) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the option corresponding to <em>opt</em>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#humanize-instance_method" title="#humanize (instance method)">- (Object) <strong>humanize</strong>(data) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the human-friendly version of the <em>data</em> (which must be a string or symbol).</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (KDEConfigSettingsBackend) <strong>initialize</strong>(filename = nil, mode = KDE::Config::FullConfig) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new KDEConfigSettingsBackend.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#need_yaml%3F-instance_method" title="#need_yaml? (instance method)">- (Boolean) <strong>need_yaml?</strong>(opt, value) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Tells whether the value <em>value</em> for the option represented by the option object
<em>opt</em> needs to be stored using <span class="caps">YAML</span> or not.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#recognized_value%3F-instance_method" title="#recognized_value? (instance method)">- (Boolean) <strong>recognized_value?</strong>(value) </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Tells whether the object <em>value</em> is recognized by <tt><span class="caps">KDE</span>::ConfigGroup</tt>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#write-instance_method" title="#write (instance method)">- (Object) <strong>write</strong>(opts) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Writes the options back to the file.</p></div></span>
  
</li>

      
    </ul>
  







<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Ruber::KDEConfigSettingsBackend (class)">KDEConfigSettingsBackend</a></span></tt>) <strong>initialize</strong>(filename = nil, mode = KDE::Config::FullConfig) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates a new KDEConfigSettingsBackend. <em>filename</em> is the name of the file where
the options will be stored, while <em>mode</em> is the open flag to pass to
<tt><span class="caps">KDE</span>::SharedConfig#open_config</tt>. If <em>filename</em> is not given, the global config
object is used.</p>
<p><b>Note:</b> this class uses <tt><span class="caps">KDE</span>::SharedConfig</tt>, rather than a regular
<tt><span class="caps">KDE</span>::Config</tt>. This means that if another instance of this class is created
for the same file, they&#8217;ll share the configuration object.</p>

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/kde_config_option_backend.rb', line 73</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span> <span class='id filename'>filename</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id mode'>mode</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Config</span><span class='op'>::</span><span class='const'>FullConfig</span>
  <span class='ivar'>@config</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id filename'>filename</span> <span class='kw'>then</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>SharedConfig</span><span class='period'>.</span><span class='id open_config'>open_config</span> <span class='id filename'>filename</span><span class='comma'>,</span> <span class='id mode'>mode</span>
  <span class='kw'>else</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Global</span><span class='period'>.</span><span class='id config'>config</span>
  <span class='kw'>end</span>
  <span class='id yaml_options'>yaml_options</span> <span class='op'>=</span> <span class='ivar'>@config</span><span class='period'>.</span><span class='id group'>group</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Ruber Internal</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id read_entry'>read_entry</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Yaml options</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@yaml_options</span> <span class='op'>=</span> <span class='id yaml_options'>yaml_options</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id o'>o</span><span class='op'>|</span> <span class='id o'>o</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span><span class='lparen'>(</span> <span class='op'>&amp;</span><span class='symbol'>:to_sym</span><span class='rparen'>)</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="[]-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>[]</strong>(opt) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns the option corresponding to <em>opt</em>. <em>opt</em> is an option object with
the characteristics specified in SettingsContainer#add_option. If an option with
the same name and value of <em>opt</em> isn&#8217;t stored in the file, the option
default value will be returned</p>

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89
90
91
92
93
94
95
96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/kde_config_option_backend.rb', line 87</span>

<span class='kw'>def</span> <span class='op'>[]</span> <span class='id opt'>opt</span>
  <span class='id grp'>grp</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>ConfigGroup</span><span class='period'>.</span><span class='id new'>new</span> <span class='ivar'>@config</span><span class='comma'>,</span> <span class='id humanize'>humanize</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id group'>group</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id opt'>opt</span><span class='period'>.</span><span class='id default'>default</span><span class='period'>.</span><span class='id deep_copy'>deep_copy</span> <span class='kw'>unless</span> <span class='id grp'>grp</span><span class='period'>.</span><span class='id has_key'>has_key</span><span class='lparen'>(</span><span class='id humanize'>humanize</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@yaml_options</span><span class='period'>.</span><span class='id include?'>include?</span> <span class='lbracket'>[</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id group'>group</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='period'>.</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='kw'>or</span> <span class='op'>!</span><span class='id recognized_value?'>recognized_value?</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id default'>default</span><span class='rparen'>)</span>
    <span class='const'>YAML</span><span class='period'>.</span><span class='id load'>load</span> <span class='id grp'>grp</span><span class='period'>.</span><span class='id read_entry'>read_entry</span> <span class='id humanize'>humanize</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='kw'>else</span>
<span class='comment'>#Uncomment the following lines if the state/open_projects is read as a string
</span><span class='comment'>#         begin grp.read_entry humanize(opt.name), opt.default
</span><span class='comment'>#         rescue ArgumentError
</span>    <span class='lparen'>(</span><span class='id grp'>grp</span><span class='period'>.</span><span class='id read_entry'>read_entry</span> <span class='id humanize'>humanize</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id from_value'>from_value</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id default'>default</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id value'>value</span>
<span class='comment'>#         end
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="humanize-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>humanize</strong>(data)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns the human-friendly version of the <em>data</em> (which must be a string or symbol).
This is obtained by replacing all underscores with spaces and capitalizing the
first letter of each word.</p>

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/kde_config_option_backend.rb', line 141</span>

<span class='kw'>def</span> <span class='id humanize'>humanize</span> <span class='id data'>data</span>
  <span class='id data'>data</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>_</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id s'>s</span><span class='op'>|</span> <span class='id s'>s</span><span class='period'>.</span><span class='id capitalize'>capitalize</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="need_yaml?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>need_yaml?</strong>(opt, value)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Tells whether the value <em>value</em> for the option represented by the option object
<em>opt</em> needs to be stored using <span class="caps">YAML</span> or not. In particular, this returns <strong>true</strong>
if the value can&#8217;t be handled by <tt><span class="caps">KDE</span>::ConfigGroup</tt> or if the class of <em>value</em>
and that of the default value of the option differ (except in the case when one
is <strong>true</strong> and the other is <strong>false</strong>) and <strong>false</strong> otherwise.</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/kde_config_option_backend.rb', line 165</span>

<span class='kw'>def</span> <span class='id need_yaml?'>need_yaml?</span> <span class='id opt'>opt</span><span class='comma'>,</span> <span class='id value'>value</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id recognized_value?'>recognized_value?</span> <span class='id value'>value</span> <span class='kw'>then</span> <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>elsif</span> <span class='id value'>value</span><span class='period'>.</span><span class='id class'>class</span> <span class='op'>==</span> <span class='id opt'>opt</span><span class='period'>.</span><span class='id default'>default</span><span class='period'>.</span><span class='id class'>class</span> <span class='kw'>then</span> <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>elsif</span> <span class='id value'>value</span><span class='period'>.</span><span class='id bool?'>bool?</span> <span class='kw'>and</span> <span class='id opt'>opt</span><span class='period'>.</span><span class='id default'>default</span><span class='period'>.</span><span class='id bool?'>bool?</span> <span class='kw'>then</span> <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>else</span> <span class='kw'>return</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="recognized_value?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>recognized_value?</strong>(value)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Tells whether the object <em>value</em> is recognized by <tt><span class="caps">KDE</span>::ConfigGroup</tt>. It
returns <strong>true</strong> if the object&#8217;s class is included in <tt>RECOGNIZED_CLASSES</tt>
or if it is an array and all its entries are of classes included in that array
and <strong>false</strong> otherwise.</p>

  </div>
</div>
<div class="tags">
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/kde_config_option_backend.rb', line 151</span>

<span class='kw'>def</span> <span class='id recognized_value?'>recognized_value?</span> <span class='id value'>value</span>
  <span class='kw'>if</span> <span class='const'>RECOGNIZED_CLASSES</span><span class='period'>.</span><span class='id include?'>include?</span> <span class='id value'>value</span><span class='period'>.</span><span class='id class'>class</span> <span class='kw'>then</span> <span class='kw'>true</span>
  <span class='kw'>elsif</span> <span class='id value'>value</span><span class='period'>.</span><span class='id is_a?'>is_a?</span> <span class='const'>Array</span> <span class='kw'>then</span> <span class='id value'>value</span><span class='period'>.</span><span class='id all?'>all?</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id v'>v</span><span class='op'>|</span> <span class='const'>RECOGNIZED_CLASSES</span><span class='period'>.</span><span class='id include?'>include?</span> <span class='id v'>v</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span>
  <span class='kw'>else</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>write</strong>(opts) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Writes the options back to the file. <em>options</em> is a
hash with option objects as keys and the corresponding values as entries. There
are two issues to be aware of:</p>
<ul>
	<li>if one of the options in <em>options</em> has a value which is equal to its default
  value, it won&#8217;t be written to file</li>
	<li><em>options</em> is interpreted as only containing the options which might have changed:
  any option already in the file but not contained in <em>options</em> is left unchanged</li>
</ul>
<p>This method also updates the list of options written in <span class="caps">YAML</span> format, both in memory
and on file.</p>

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ruber/kde_config_option_backend.rb', line 113</span>

<span class='kw'>def</span> <span class='id write'>write</span> <span class='id opts'>opts</span>
  <span class='id opts'>opts</span><span class='period'>.</span><span class='id each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id opt'>opt</span><span class='comma'>,</span> <span class='id value'>value</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id opt'>opt</span><span class='period'>.</span><span class='id default'>default</span> <span class='op'>==</span> <span class='id value'>value</span>
      <span class='ivar'>@config</span><span class='period'>.</span><span class='id group'>group</span><span class='lparen'>(</span><span class='id humanize'>humanize</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id group'>group</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id delete_entry'>delete_entry</span> <span class='id humanize'>humanize</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span>
      <span class='kw'>next</span>
    <span class='kw'>elsif</span> <span class='id need_yaml?'>need_yaml?</span> <span class='id opt'>opt</span><span class='comma'>,</span> <span class='id value'>value</span>
      <span class='ivar'>@config</span><span class='period'>.</span><span class='id group'>group</span><span class='lparen'>(</span><span class='id humanize'>humanize</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id group'>group</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id write_entry'>write_entry</span><span class='lparen'>(</span><span class='id humanize'>humanize</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>YAML</span><span class='period'>.</span><span class='id dump'>dump</span><span class='lparen'>(</span><span class='id value'>value</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='ivar'>@yaml_options</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id group'>group</span><span class='comma'>,</span> <span class='id opt'>opt</span><span class='period'>.</span><span class='id name'>name</span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
<span class='comment'>#Uncomment the following lines if the state/open_projects is written as a string
</span><span class='comment'>#           begin @config.group(humanize(opt.group)).write_entry(humanize(opt.name), value)
</span><span class='comment'>#           rescue ArgumentError
</span>      <span class='ivar'>@config</span><span class='period'>.</span><span class='id group'>group</span><span class='lparen'>(</span><span class='id humanize'>humanize</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id group'>group</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id write_entry'>write_entry</span><span class='lparen'>(</span><span class='id humanize'>humanize</span><span class='lparen'>(</span><span class='id opt'>opt</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>Qt</span><span class='op'>::</span><span class='const'>Variant</span><span class='period'>.</span><span class='id from_value'>from_value</span><span class='lparen'>(</span><span class='id value'>value</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='comment'>#           end
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='ivar'>@yaml_options</span><span class='period'>.</span><span class='id uniq!'>uniq!</span>
  <span class='ivar'>@config</span><span class='period'>.</span><span class='id group'>group</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Ruber Internal</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id write_entry'>write_entry</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Yaml options</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='ivar'>@yaml_options</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> <span class='id i'>i</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@config</span><span class='period'>.</span><span class='id sync'>sync</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>



</div>
    
    <div id="footer">
  Generated on Sun Oct 23 14:12:31 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.3 (ruby-1.9.3).
</div>

  </body>
</html>