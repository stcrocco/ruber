<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Ruber::State::Plugin</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (P)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../Ruber.html" title="Ruber (module)">Ruber</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../State.html" title="Ruber::State (module)">State</a></span></span>
     &raquo; 
    <span class="title">Plugin</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Ruber::State::Plugin
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Plugin.html" title="Ruber::Plugin (class)">Plugin</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="../Plugin.html" title="Ruber::Plugin (class)">Plugin</a></span></li>
          
            <li class="next">Ruber::State::Plugin</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">plugins/state/state.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Plugin object for the State plugin</p>

  </div>
</div>
<div class="tags">
  
</div>
  <h2>Constant Summary</h2>
  


  
  
  
  
  <h3 class="inherited">Constants inherited from <span class='object_link'><a href="../Plugin.html" title="Ruber::Plugin (class)">Plugin</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Plugin.html#LICENSES-constant" title="Ruber::Plugin::LICENSES (constant)">LICENSES</a></span></p>

  
  
  
  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#delayed_initialize-instance_method" title="#delayed_initialize (instance method)">- (nil) <strong>delayed_initialize</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Override of <span class='object_link'><a href="../PluginLike.html#delayed_initialize-instance_method" title="Ruber::PluginLike#delayed_initialize (method)">PluginLike#delayed_initialize</a></span>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="private ">
  <span class="summary_signature">
    
      <a href="#gather_settings-instance_method" title="#gather_settings (instance method)">- (Hash) <strong>gather_settings</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a hash with all the data needed to restore Ruber&#8217;s state.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Plugin) <strong>initialize</strong>(psf) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>with the plugin.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#restore-instance_method" title="#restore (instance method)">- (nil) <strong>restore</strong>(cfg = Ruber[:config]) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Restores ruber state according to the user settings and the data stored in the given object.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#restore_cursor_position%3F-instance_method" title="#restore_cursor_position? (instance method)">- (Boolean) <strong>restore_cursor_position?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Tells whether or not the cursor position should be restored.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#restore_document-instance_method" title="#restore_document (instance method)">- (nil) <strong>restore_document</strong>(doc) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Restores the given document.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#restore_documents-instance_method" title="#restore_documents (instance method)">- (nil) <strong>restore_documents</strong>(config = Ruber[:config]) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Restores the open documents according to a given configuration object.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#restore_last_state-instance_method" title="#restore_last_state (instance method)">- (nil) <strong>restore_last_state</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Restores Ruber&#8217;s state according to the user settings so that it matches the state
it was when it was last shut down.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#restore_project-instance_method" title="#restore_project (instance method)">- (nil) <strong>restore_project</strong>(prj) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Restores the given global project.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#restore_project_files%3F-instance_method" title="#restore_project_files? (instance method)">- (Boolean) <strong>restore_project_files?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Tells whether or not the open files in the project should be restored.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#restore_projects-instance_method" title="#restore_projects (instance method)">- (nil) <strong>restore_projects</strong>(conf = Ruber[:config]) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Restores the open projects according to a given configuration object.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#restore_session-instance_method" title="#restore_session (instance method)">- (nil) <strong>restore_session</strong>(data) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Restores Ruber&#8217;s state as it was in last session.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#save_settings-instance_method" title="#save_settings (instance method)">- (nil) <strong>save_settings</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Saves Ruber&#8217;s state to the global config object.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#session_data-instance_method" title="#session_data (instance method)">- (Hash) <strong>session_data</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Override of <span class='object_link'><a href="../PluginLike.html#session_data-instance_method" title="Ruber::PluginLike#session_data (method)">PluginLike#session_data</a></span>.</p></div></span>
  
</li>

      
        <!-- Provides the  slot annotation -->
<li class="public ">
  <span class="summary_signature">
    
      <a href="#with-instance_method" title="#with (instance method)">- (Object) <strong>with</strong>(hash) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Executes a block temporarily overriding the user&#8217;s settings about what should be
restored and what shouldn&#8217;t.</p></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../Plugin.html" title="Ruber::Plugin (class)">Plugin</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Plugin.html#about_data-instance_method" title="Ruber::Plugin#about_data (method)">#about_data</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../PluginLike.html" title="Ruber::PluginLike (module)">PluginLike</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../PluginLike.html#add_extensions_to_project-instance_method" title="Ruber::PluginLike#add_extensions_to_project (method)">#add_extensions_to_project</a></span>, <span class='object_link'><a href="../PluginLike.html#add_options_to_project-instance_method" title="Ruber::PluginLike#add_options_to_project (method)">#add_options_to_project</a></span>, <span class='object_link'><a href="../PluginLike.html#add_widgets_to_project-instance_method" title="Ruber::PluginLike#add_widgets_to_project (method)">#add_widgets_to_project</a></span>, <span class='object_link'><a href="../PluginLike.html#create_tool_widget-instance_method" title="Ruber::PluginLike#create_tool_widget (method)">#create_tool_widget</a></span>, <span class='object_link'><a href="../PluginLike.html#initialize_plugin-instance_method" title="Ruber::PluginLike#initialize_plugin (method)">#initialize_plugin</a></span>, <span class='object_link'><a href="../PluginLike.html#load_settings-instance_method" title="Ruber::PluginLike#load_settings (method)">#load_settings</a></span>, <span class='object_link'><a href="../PluginLike.html#plugin_name-instance_method" title="Ruber::PluginLike#plugin_name (method)">#plugin_name</a></span>, <span class='object_link'><a href="../PluginLike.html#query_close-instance_method" title="Ruber::PluginLike#query_close (method)">#query_close</a></span>, <span class='object_link'><a href="../PluginLike.html#register_options-instance_method" title="Ruber::PluginLike#register_options (method)">#register_options</a></span>, <span class='object_link'><a href="../PluginLike.html#register_with_project-instance_method" title="Ruber::PluginLike#register_with_project (method)">#register_with_project</a></span>, <span class='object_link'><a href="../PluginLike.html#remove_extensions_from_project-instance_method" title="Ruber::PluginLike#remove_extensions_from_project (method)">#remove_extensions_from_project</a></span>, <span class='object_link'><a href="../PluginLike.html#remove_from_project-instance_method" title="Ruber::PluginLike#remove_from_project (method)">#remove_from_project</a></span>, <span class='object_link'><a href="../PluginLike.html#remove_options_from_project-instance_method" title="Ruber::PluginLike#remove_options_from_project (method)">#remove_options_from_project</a></span>, <span class='object_link'><a href="../PluginLike.html#remove_widgets_from_project-instance_method" title="Ruber::PluginLike#remove_widgets_from_project (method)">#remove_widgets_from_project</a></span>, <span class='object_link'><a href="../PluginLike.html#setup_action-instance_method" title="Ruber::PluginLike#setup_action (method)">#setup_action</a></span>, <span class='object_link'><a href="../PluginLike.html#setup_actions-instance_method" title="Ruber::PluginLike#setup_actions (method)">#setup_actions</a></span>, <span class='object_link'><a href="../PluginLike.html#shutdown-instance_method" title="Ruber::PluginLike#shutdown (method)">#shutdown</a></span>, <span class='object_link'><a href="../PluginLike.html#unload-instance_method" title="Ruber::PluginLike#unload (method)">#unload</a></span>, <span class='object_link'><a href="../PluginLike.html#update_project-instance_method" title="Ruber::PluginLike#update_project (method)">#update_project</a></span></p>






<h4>Methods API</h4>
<ul>
<li><span class='object_link'><a href="#with-instance_method" title="Ruber::State::Plugin#with (method)">Plugin#with</a></span></li>
<li><span class='object_link'><a href="#restore-instance_method" title="Ruber::State::Plugin#restore (method)">Plugin#restore</a></span></li>
<li><span class='object_link'><a href="#restore_document-instance_method" title="Ruber::State::Plugin#restore_document (method)">Plugin#restore_document</a></span></li>
<li><span class='object_link'><a href="#restore_project-instance_method" title="Ruber::State::Plugin#restore_project (method)">Plugin#restore_project</a></span></li>
</ul>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Ruber::State::Plugin (class)">Plugin</a></span></tt>) <strong>initialize</strong>(psf) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>with the plugin</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../PluginSpecification.html" title="Ruber::PluginSpecification (class)">Ruber::PluginSpecification</a></span></tt>)</span>
      
      
        <span class='name'>psf</span>
      
      
      
        &mdash;
        <div class='inline'><p>the plugin specification object associated</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62
63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 62</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span> <span class='id psf'>psf</span>
  <span class='kw'>super</span>
  <span class='ivar'>@force_restore_project_files</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@force_restore_cursor_position</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="delayed_initialize-instance_method">
  
    - (<tt>nil</tt>) <strong>delayed_initialize</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Override of <span class='object_link'><a href="../PluginLike.html#delayed_initialize-instance_method" title="Ruber::PluginLike#delayed_initialize (method)">PluginLike#delayed_initialize</a></span></p>
<p>If the application is starting and there&#8217;s no open project and a single, pristine
document, it uses the <span class='object_link'><a href="#restore_last_state-instance_method" title="Ruber::State::Plugin#restore_last_state (method)">#restore_last_state</a></span> method to restore the last state Ruber
was according to the user preferences.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 77</span>

<span class='kw'>def</span> <span class='id delayed_initialize'>delayed_initialize</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:app</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id starting?'>starting?</span>
  <span class='kw'>if</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:projects</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_a'>to_a</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='kw'>and</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:docs</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_a'>to_a</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='kw'>and</span>
           <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:docs</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id pristine?'>pristine?</span>
    <span class='id restore_last_state'>restore_last_state</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="gather_settings-instance_method">
  
    - (<tt>Hash</tt>) <strong>gather_settings</strong>  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Creates a hash with all the data needed to restore Ruber&#8217;s state</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>a hash with the following keys:</p>
<ul>
	<li><code>:open_projects</code>: an array containing the project file of each open project.
 the first entry is the active project</li>
	<li><code>:open_documents</code>: an array with the name of the file corresponding to each
 open document (documents without an associated file can&#8217;t be restored and aren&#8217;t
 included). The order is that of opening</li>
	<li><code>:visible_documents</code>: an array with the name of the files corresponding to the
 documents associated with a file and having a view</li>
	<li><code>:active_document</code>: the name of the file associated with the active document or
 <strong>nil</strong> if there&#8217;s no open document</li>
</ul></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 313</span>

<span class='kw'>def</span> <span class='id gather_settings'>gather_settings</span>
  <span class='id res'>res</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id projects'>projects</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:projects</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id projects'>projects</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id pr'>pr</span><span class='op'>|</span> <span class='id pr'>pr</span><span class='period'>.</span><span class='id project_file'>project_file</span><span class='rbrace'>}</span>
  <span class='kw'>unless</span> <span class='id projects'>projects</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id active_prj'>active_prj</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:projects</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id current'>current</span>
    <span class='id projects'>projects</span><span class='period'>.</span><span class='id unshift'>unshift</span> <span class='id projects'>projects</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='id active_prj'>active_prj</span><span class='period'>.</span><span class='id project_file'>project_file</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id active_prj'>active_prj</span>
  <span class='kw'>end</span>
  <span class='id res'>res</span><span class='lbracket'>[</span><span class='symbol'>:open_projects</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id projects'>projects</span>
  <span class='id docs'>docs</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:docs</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id documents'>documents</span><span class='period'>.</span><span class='id select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id d'>d</span><span class='op'>|</span> <span class='id d'>d</span><span class='period'>.</span><span class='id has_file?'>has_file?</span><span class='rbrace'>}</span>
  <span class='id res'>res</span><span class='lbracket'>[</span><span class='symbol'>:open_documents</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id docs'>docs</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id doc'>doc</span><span class='op'>|</span> <span class='id doc'>doc</span><span class='period'>.</span><span class='id url'>url</span><span class='period'>.</span><span class='id to_encoded'>to_encoded</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbrace'>}</span>
  <span class='id visible_docs'>visible_docs</span> <span class='op'>=</span> <span class='id docs'>docs</span><span class='period'>.</span><span class='id select'>select</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id d'>d</span><span class='op'>|</span> <span class='id d'>d</span><span class='period'>.</span><span class='id view'>view</span><span class='rbrace'>}</span>
  <span class='id res'>res</span><span class='lbracket'>[</span><span class='symbol'>:visible_documents</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id visible_docs'>visible_docs</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id d'>d</span><span class='op'>|</span> <span class='id d'>d</span><span class='period'>.</span><span class='id url'>url</span><span class='period'>.</span><span class='id to_encoded'>to_encoded</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbrace'>}</span>
  <span class='id current_doc'>current_doc</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id current_document'>current_document</span><span class='period'>.</span><span class='id url'>url</span><span class='period'>.</span><span class='id to_encoded'>to_encoded</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='kw'>rescue</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='id res'>res</span><span class='lbracket'>[</span><span class='symbol'>:active_document</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id current_doc'>current_doc</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='op'>?</span> <span class='kw'>nil</span> <span class='op'>:</span> <span class='id current_doc'>current_doc</span>
  <span class='id res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="restore-instance_method">
  
    - (<tt>nil</tt>) <strong>restore</strong>(cfg = Ruber[:config]) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Restores ruber state according to the user settings and the data stored in the given object</p>
<p>The argument can be any object which has a <code>[]</code> method which takes two arguments
and behaves as the hash returned by <span class='object_link'><a href="#gather_settings-instance_method" title="Ruber::State::Plugin#gather_settings (method)">#gather_settings</a></span>.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>#[<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span>, <span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span>]</tt>)</span>
      
      
        <span class='name'>conf</span>
      
      
      
        &mdash;
        <div class='inline'><p>the object from which to read the state</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


233
234
235
236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 233</span>

<span class='kw'>def</span> <span class='id restore'>restore</span> <span class='id cfg'>cfg</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id cfg'>cfg</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='comma'>,</span> <span class='symbol'>:open_projects</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='kw'>then</span> <span class='id restore_projects'>restore_projects</span> <span class='id cfg'>cfg</span>
  <span class='kw'>else</span> <span class='id restore_documents'>restore_documents</span> <span class='id cfg'>cfg</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="restore_cursor_position?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>restore_cursor_position?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Tells whether or not the cursor position should be restored.</p>
<p>This takes into account user settings and eventual requests made by the programmer
using the <span class='object_link'><a href="#with-instance_method" title="Ruber::State::Plugin#with (method)">#with</a></span> method
otherwise</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p><strong>true</strong> if the cursor position should be restored and <strong>false</strong></p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 94</span>

<span class='kw'>def</span> <span class='id restore_cursor_position?'>restore_cursor_position?</span>
  <span class='kw'>if</span> <span class='ivar'>@force_restore_cursor_position</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='comma'>,</span> <span class='symbol'>:restore_cursor_position</span><span class='rbracket'>]</span>
  <span class='kw'>else</span> <span class='ivar'>@force_restore_cursor_position</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="restore_document-instance_method">
  
    - (<tt>nil</tt>) <strong>restore_document</strong>(doc) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Restores the given document</p>
<p>See <span class='object_link'><a href="DocumentExtension.html#restore-instance_method" title="Ruber::State::DocumentExtension#restore (method)">DocumentExtension#restore</a></span> for more information</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Document.html" title="Ruber::Document (class)">Ruber::Document</a></span></tt>)</span>
      
      
        <span class='name'>doc</span>
      
      
      
        &mdash;
        <div class='inline'><p>the document to restore</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 163</span>

<span class='kw'>def</span> <span class='id restore_document'>restore_document</span> <span class='id doc'>doc</span>
  <span class='id doc'>doc</span><span class='period'>.</span><span class='id extension'>extension</span><span class='lparen'>(</span><span class='symbol'>:state</span><span class='rparen'>)</span><span class='period'>.</span><span class='id restore'>restore</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="restore_documents-instance_method">
  
    - (<tt>nil</tt>) <strong>restore_documents</strong>(config = Ruber[:config]) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Restores the open documents according to a given configuration object</p>
<p>This method is called both when the session is restored and when ruber starts
up (if the user chose so).</p>
<p>for more information</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>#[<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span>, <span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span>]</tt>)</span>
      
      
        <span class='name'>conf</span>
      
      
      
        &mdash;
        <div class='inline'><p>the object from which to read the state. See <span class='object_link'><a href="#restore-instance_method" title="Ruber::State::Plugin#restore (method)">#restore</a></span></p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 210</span>

<span class='kw'>def</span> <span class='id restore_documents'>restore_documents</span> <span class='id config'>config</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span>
  <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:docs</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id close_all'>close_all</span>
  <span class='id files'>files</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='comma'>,</span> <span class='symbol'>:open_documents</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id files'>files</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  <span class='id active_file'>active_file</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='comma'>,</span> <span class='symbol'>:active_document</span><span class='rbracket'>]</span>
  <span class='id active_file'>active_file</span> <span class='op'>=</span> <span class='id files'>files</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id files'>files</span><span class='period'>.</span><span class='id include?'>include?</span> <span class='id active_file'>active_file</span>
  <span class='id mw'>mw</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span>
  <span class='id docs'>docs</span> <span class='op'>=</span> <span class='id files'>files</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span>
    <span class='lbracket'>[</span><span class='id f'>f</span><span class='comma'>,</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:docs</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id document'>document</span><span class='lparen'>(</span><span class='id f'>f</span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='kw'>rescue</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='id docs'>docs</span> <span class='op'>=</span> <span class='id docs'>docs</span><span class='period'>.</span><span class='id compact'>compact</span><span class='period'>.</span><span class='id to_h'>to_h</span>
  <span class='id visible_files'>visible_files</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='comma'>,</span> <span class='symbol'>:visible_documents</span><span class='rbracket'>]</span>
  <span class='id visible_files'>visible_files</span> <span class='op'>&amp;=</span> <span class='id docs'>docs</span><span class='period'>.</span><span class='id keys'>keys</span>
  <span class='id editors'>editors</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id mw'>mw</span><span class='period'>.</span><span class='id without_activating'>without_activating</span> <span class='kw'>do</span>
    <span class='id visible_files'>visible_files</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span> 
      <span class='id editors'>editors</span> <span class='op'>&lt;&lt;</span> <span class='id mw'>mw</span><span class='period'>.</span><span class='id editor_for!'>editor_for!</span><span class='lparen'>(</span><span class='id docs'>docs</span><span class='lbracket'>[</span><span class='id f'>f</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id active_url'>active_url</span> <span class='op'>=</span> <span class='const'>KDE</span><span class='op'>::</span><span class='const'>Url</span><span class='period'>.</span><span class='id new'>new</span> <span class='id active_file'>active_file</span>
    <span class='id active_doc'>active_doc</span> <span class='op'>=</span> <span class='id docs'>docs</span><span class='lbracket'>[</span><span class='id active_file'>active_file</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id editors'>editors</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id document'>document</span>
    <span class='id mw'>mw</span><span class='period'>.</span><span class='id display_document'>display_document</span> <span class='id active_doc'>active_doc</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="restore_last_state-instance_method">
  
    - (<tt>nil</tt>) <strong>restore_last_state</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Restores Ruber&#8217;s state according to the user settings so that it matches the state
it was when it was last shut down</p>
<p>The state information is read from the global configuration object.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


248
249
250
251
252
253
254
255</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 248</span>

<span class='kw'>def</span> <span class='id restore_last_state'>restore_last_state</span>
  <span class='kw'>case</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='comma'>,</span> <span class='symbol'>:startup_behaviour</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:restore_all</span> <span class='kw'>then</span> <span class='id restore'>restore</span>
  <span class='kw'>when</span> <span class='symbol'>:restore_projects_only</span>
    <span class='id with'>with</span><span class='lparen'>(</span><span class='symbol'>:restore_project_files</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='id restore_projects'>restore_projects</span><span class='rbrace'>}</span>
  <span class='kw'>when</span> <span class='symbol'>:restore_documents_only</span> <span class='kw'>then</span> <span class='id restore_documents'>restore_documents</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="restore_project-instance_method">
  
    - (<tt>nil</tt>) <strong>restore_project</strong>(prj) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Restores the given global project</p>
<p>See <span class='object_link'><a href="ProjectExtension.html#restore-instance_method" title="Ruber::State::ProjectExtension#restore (method)">Ruber::State::ProjectExtension#restore</a></span> for more information</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../Project.html" title="Ruber::Project (class)">Ruber::Project</a></span></tt>)</span>
      
      
        <span class='name'>prj</span>
      
      
      
        &mdash;
        <div class='inline'><p>the document to restore</p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 175</span>

<span class='kw'>def</span> <span class='id restore_project'>restore_project</span> <span class='id prj'>prj</span>
  <span class='id prj'>prj</span><span class='period'>.</span><span class='id extension'>extension</span><span class='lparen'>(</span><span class='symbol'>:state</span><span class='rparen'>)</span><span class='period'>.</span><span class='id restore'>restore</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="restore_project_files?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>restore_project_files?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Tells whether or not the open files in the project should be restored.</p>
<p>This takes into account user settings and eventual requests made by the programmer
using the <span class='object_link'><a href="#with-instance_method" title="Ruber::State::Plugin#with (method)">#with</a></span> method
otherwise</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p><strong>true</strong> if the open files in the project should be restored and <strong>false</strong></p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


109
110
111
112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 109</span>

<span class='kw'>def</span> <span class='id restore_project_files?'>restore_project_files?</span>
  <span class='kw'>if</span> <span class='ivar'>@force_restore_project_files</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='comma'>,</span> <span class='symbol'>:restore_project_files</span><span class='rbracket'>]</span>
  <span class='kw'>else</span> <span class='ivar'>@force_restore_project_files</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="restore_projects-instance_method">
  
    - (<tt>nil</tt>) <strong>restore_projects</strong>(conf = Ruber[:config]) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Restores the open projects according to a given configuration object</p>
<p>This method is called both when the session is restored and when ruber starts
up (if the user chose so).</p>
<p>for more information</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>#[<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span>, <span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span>]</tt>)</span>
      
      
        <span class='name'>conf</span>
      
      
        <em class="default">(defaults to: <tt>Ruber[:config]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the object from which to read the state. See <span class='object_link'><a href="#restore-instance_method" title="Ruber::State::Plugin#restore (method)">#restore</a></span></p></div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191
192
193
194
195
196
197
198</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 189</span>

<span class='kw'>def</span> <span class='id restore_projects'>restore_projects</span> <span class='id conf'>conf</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span>
  <span class='id projects'>projects</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:projects</span><span class='rbracket'>]</span>
  <span class='id projects'>projects</span><span class='period'>.</span><span class='id to_a'>to_a</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id pr'>pr</span><span class='op'>|</span> <span class='id projects'>projects</span><span class='period'>.</span><span class='id close_project'>close_project</span> <span class='id pr'>pr</span><span class='rbrace'>}</span>
  <span class='id file'>file</span> <span class='op'>=</span> <span class='id conf'>conf</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='comma'>,</span> <span class='symbol'>:open_projects</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id file'>file</span>
    <span class='id prj'>prj</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:main_window</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id safe_open_project'>safe_open_project</span> <span class='id file'>file</span>
    <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:projects</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id current_project'>current_project</span> <span class='op'>=</span> <span class='id prj'>prj</span> <span class='kw'>if</span> <span class='id prj'>prj</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="restore_session-instance_method">
  
    - (<tt>nil</tt>) <strong>restore_session</strong>(data) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Restores Ruber&#8217;s state as it was in last session</p>
<p>Since this method deals with session management, it ignores the user settings</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


264
265
266
267
268
269
270
271
272
273
274</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 264</span>

<span class='kw'>def</span> <span class='id restore_session'>restore_session</span> <span class='id data'>data</span>
  <span class='id hash'>hash</span> <span class='op'>=</span> <span class='id data'>data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>State</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='symbol'>:open_projects</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:open_documents</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:active_document</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='rbrace'>}</span>
  <span class='id hash'>hash</span> <span class='op'>=</span> <span class='id hash'>hash</span><span class='period'>.</span><span class='id map_hash'>map_hash</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id k'>k</span><span class='comma'>,</span> <span class='id v'>v</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='comma'>,</span> <span class='id k'>k</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id v'>v</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
  <span class='kw'>def</span> <span class='id hash'>hash</span><span class='period'>.</span><span class='op'>[]</span> <span class='id k'>k</span><span class='comma'>,</span> <span class='id v'>v</span>
    <span class='kw'>super</span> <span class='lbracket'>[</span><span class='id k'>k</span><span class='comma'>,</span> <span class='id v'>v</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id with'>with</span><span class='lparen'>(</span><span class='symbol'>:restore_project_files</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:restore_cursor_position</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:force</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id restore'>restore</span> <span class='id hash'>hash</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="save_settings-instance_method">
  
    - (<tt>nil</tt>) <strong>save_settings</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Saves Ruber&#8217;s state to the global config object</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


281
282
283
284
285
286
287
288</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 281</span>

<span class='kw'>def</span> <span class='id save_settings'>save_settings</span>
  <span class='id h'>h</span> <span class='op'>=</span> <span class='id gather_settings'>gather_settings</span>
  <span class='id cfg'>cfg</span> <span class='op'>=</span> <span class='const'>Ruber</span><span class='lbracket'>[</span><span class='symbol'>:config</span><span class='rbracket'>]</span>
  <span class='lbracket'>[</span><span class='symbol'>:open_projects</span><span class='comma'>,</span> <span class='symbol'>:open_documents</span><span class='comma'>,</span> <span class='symbol'>:active_document</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id i'>i</span><span class='op'>|</span> 
    <span class='id cfg'>cfg</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='comma'>,</span> <span class='id i'>i</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id h'>h</span><span class='lbracket'>[</span><span class='id i'>i</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="session_data-instance_method">
  
    - (<tt>Hash</tt>) <strong>session_data</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Override of <span class='object_link'><a href="../PluginLike.html#session_data-instance_method" title="Ruber::PluginLike#session_data (method)">PluginLike#session_data</a></span></p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>a hash containing the session information under the <code>State</code> key</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


295
296
297</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 295</span>

<span class='kw'>def</span> <span class='id session_data'>session_data</span>
  <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>State</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='id gather_settings'>gather_settings</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="with-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>with</strong>(hash) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Executes a block temporarily overriding the user&#8217;s settings about what should be
restored and what shouldn&#8217;t.</p>
<p>Nested calls to this method are allowed. By default, the outer call wins over the
inner, meaning that a value set by the inner call are only used if the outer
call didn&#8217;t set that value. You can change this behaviour by passing the <code>:force</code>
option.
remain as chosen by the user
method, the values specified by the inner call will override values set by the
outer call.
in documents should be restored, regardless of what the user chose
files in projects should be restored, regardless of what the user chose</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <span class='name'>hash</span>
      
      
      
        &mdash;
        <div class='inline'><p>the settings to change. All settings not specified here will</p></div>
      
    </li>
  
</ul>

  
    
    
    <h3>Options Hash (<tt>hash</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="name">:force</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          &mdash;<div class='inline'><p>if <strong>true</strong>, in case of a nested call to this</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="name">:restore_cursor_position</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          &mdash;<div class='inline'><p>whether or not the cursor position</p></div>
        </tr>
      
        <li>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="name">:restore_project_files</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          &mdash;<div class='inline'><p>whether or not the open</p></div>
        </tr>
      
    </ul>
  
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>the value returned by the block</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'plugins/state/state.rb', line 135</span>

<span class='kw'>def</span> <span class='id with'>with</span> <span class='id hash'>hash</span>
  <span class='id old_doc'>old_doc</span> <span class='op'>=</span> <span class='ivar'>@force_restore_cursor_position</span>
  <span class='id old_projects'>old_projects</span> <span class='op'>=</span> <span class='ivar'>@force_restore_project_files</span>
  <span class='kw'>if</span> <span class='id hash'>hash</span><span class='period'>.</span><span class='id has_key?'>has_key?</span> <span class='symbol'>:restore_cursor_position</span>
    <span class='kw'>if</span> <span class='ivar'>@force_restore_cursor_position</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='kw'>or</span> <span class='id hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
      <span class='ivar'>@force_restore_cursor_position</span> <span class='op'>=</span> <span class='id hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:restore_cursor_position</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span> 
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id hash'>hash</span><span class='period'>.</span><span class='id has_key?'>has_key?</span> <span class='symbol'>:restore_project_files</span>
    <span class='kw'>if</span> <span class='ivar'>@force_restore_project_files</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='kw'>or</span> <span class='id hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
      <span class='ivar'>@force_restore_project_files</span> <span class='op'>=</span> <span class='id hash'>hash</span><span class='lbracket'>[</span><span class='symbol'>:restore_project_files</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span> 
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>begin</span> <span class='kw'>yield</span>
  <span class='kw'>ensure</span>
    <span class='ivar'>@force_restore_cursor_position</span> <span class='op'>=</span> <span class='id old_doc'>old_doc</span>
    <span class='ivar'>@force_restore_project_files</span> <span class='op'>=</span> <span class='id old_projects'>old_projects</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>



</div>
    
    <div id="footer">
  Generated on Sun Nov 14 17:10:00 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>